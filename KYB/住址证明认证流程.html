<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½å€è¯æ˜è®¤è¯æµç¨‹</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        .file-upload-area {
            transition: all 0.3s ease;
        }
        .file-upload-area:hover {
            border-color: #3B82F6;
            background-color: #EFF6FF;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900" x-data="addressProofApp()">

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="bg-white shadow sticky top-0 z-10">
        <div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between">
            <h1 class="text-2xl font-bold tracking-tight">ä½å€è¯æ˜è®¤è¯</h1>
            <div class="flex space-x-2">
                <button class="px-3 py-1 rounded hover:bg-gray-100" :class="{ 'font-bold text-blue-600': page==='home' }" @click="page='home'">é¦–é¡µ</button>
            </div>
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-4 py-8">
        
        <!-- è¿›åº¦æ¡ -->
        <div x-show="page !== 'home' && page !== 'status'" class="mb-8">
            <div class="bg-white rounded-lg shadow p-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-gray-700">è®¤è¯è¿›åº¦</span>
                    <span class="text-sm text-gray-500" x-text="getProgressText()"></span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" :style="`width: ${getProgressPercentage()}%`"></div>
                </div>
                <div class="flex justify-between mt-2 text-xs text-gray-500">
                    <span>å¡«å†™åœ°å€</span>
                    <span>ä¸Šä¼ è¯æ˜</span>
                    <span>æäº¤å®Œæˆ</span>
                </div>
            </div>
        </div>

        <!-- è®¤è¯é¦–é¡µ -->
        <section x-show="page==='home'" x-transition x-cloak>
            <div class="flex flex-col items-center">
                <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?auto=format&fit=crop&w=600&q=80" alt="ä½å€è¯æ˜" class="rounded-xl w-64 h-40 object-cover mb-6 shadow">
                <h2 class="text-xl font-semibold mb-2">ä½å€è¯æ˜è®¤è¯</h2>
                <p class="mb-6 text-gray-600 text-center max-w-md">æ ¹æ®ç›‘ç®¡è¦æ±‚ï¼Œéœ€è¦éªŒè¯æ‚¨çš„å±…ä½åœ°å€ã€‚è¯·ä¸Šä¼ æœ‰æ•ˆçš„ä½å€è¯æ˜æ–‡ä»¶ã€‚</p>
                
                <div class="w-full max-w-md mb-6">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                        <p class="text-sm text-blue-700 mb-2">
                            <strong>ä»€ä¹ˆæ˜¯ä½å€è¯æ˜ï¼Ÿ</strong>
                        </p>
                        <p class="text-sm text-gray-700">
                            ä½å€è¯æ˜æ˜¯ç”¨äºéªŒè¯æ‚¨å½“å‰å±…ä½åœ°å€çš„å®˜æ–¹æ–‡ä»¶ï¼Œé€šå¸¸åŒ…æ‹¬æ‚¨çš„å§“åå’Œå®Œæ•´åœ°å€ä¿¡æ¯ã€‚
                        </p>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-4 mb-4">
                        <h3 class="font-medium mb-3 text-gray-800">å¯æ¥å—çš„ä½å€è¯æ˜ç±»å‹ï¼š</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span>æ°´ç”µç…¤æ°”è´¹è´¦å•ï¼ˆ3ä¸ªæœˆå†…ï¼‰</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span>é“¶è¡Œå¯¹è´¦å•ï¼ˆ3ä¸ªæœˆå†…ï¼‰</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span>æ”¿åºœæœºæ„ä¿¡ä»¶ï¼ˆ3ä¸ªæœˆå†…ï¼‰</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span>ç§ŸèµåˆåŒæˆ–æˆ¿äº§è¯æ˜</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span>äº’è”ç½‘ã€ç”µè¯æˆ–ç”µè§†è´¦å•ï¼ˆ3ä¸ªæœˆå†…ï¼‰</span>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                        <p class="text-sm text-yellow-700 mb-1">
                            <strong>é‡è¦æç¤ºï¼š</strong>
                        </p>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ æ–‡ä»¶å¿…é¡»æ¸…æ™°å¯è¯»</li>
                            <li>â€¢ å¿…é¡»æ˜¾ç¤ºæ‚¨çš„å…¨åå’Œå®Œæ•´åœ°å€</li>
                            <li>â€¢ å¿…é¡»æ˜¯è¿‘3ä¸ªæœˆå†…çš„æ–‡ä»¶</li>
                            <li>â€¢ æ”¯æŒæ ¼å¼ï¼šPDFã€JPGã€PNGï¼ˆå•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡10MBï¼‰</li>
                        </ul>
                    </div>
                </div>
                
                <button class="w-full max-w-md py-3 bg-blue-600 text-white rounded-lg font-semibold shadow hover:bg-blue-700 transition" @click="page='address-info'">å¼€å§‹è®¤è¯</button>
            </div>
        </section>

        <!-- ä¸Šä¼ æ–‡ä»¶é¡µ -->
        <section x-show="page==='upload'" x-transition x-cloak>
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow p-8">
                <h2 class="text-lg font-bold mb-4">ä¸Šä¼ ä½å€è¯æ˜æ–‡ä»¶</h2>
                
                <div class="mb-6">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                        <p class="text-sm text-blue-700">
                            <strong>ç¬¬2æ­¥ï¼š</strong>è¯·ä¸Šä¼ è¯æ˜æ–‡ä»¶æ¥éªŒè¯æ‚¨çš„å±…ä½åœ°å€ï¼š<strong x-text="getFullAddress()"></strong>
                        </p>
                    </div>

                    <!-- é€‰æ‹©è¯æ˜ç±»å‹ -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold mb-3">é€‰æ‹©è¯æ˜ç±»å‹ <span class="text-red-500">*</span></label>
                        <select x-model="form.proofType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4">
                            <option value="">è¯·é€‰æ‹©è¯æ˜æ–‡ä»¶ç±»å‹</option>
                            <option value="utility_bill">æ°´ç”µç…¤æ°”è´¹è´¦å•ï¼ˆéœ€3ä¸ªæœˆå†…ï¼Œè®¤è¯æœ‰æ•ˆæœŸ1å¹´ï¼‰</option>
                            <option value="bank_statement">é“¶è¡Œå¯¹è´¦å•ï¼ˆéœ€3ä¸ªæœˆå†…ï¼Œè®¤è¯æœ‰æ•ˆæœŸ1å¹´ï¼‰</option>
                            <option value="telecom_bill">é€šä¿¡æœåŠ¡è´¦å•ï¼ˆéœ€3ä¸ªæœˆå†…ï¼Œè®¤è¯æœ‰æ•ˆæœŸ1å¹´ï¼‰</option>
                            <option value="government_letter">æ”¿åºœæœºæ„ä¿¡ä»¶ï¼ˆéœ€3ä¸ªæœˆå†…ï¼Œè®¤è¯æœ‰æ•ˆæœŸ1å¹´ï¼‰</option>
                            <option value="lease_contract">ç§ŸèµåˆåŒï¼ˆè·ŸéšåˆåŒæœ‰æ•ˆæœŸï¼‰</option>
                            <option value="property_deed">æˆ¿äº§è¯æ˜ï¼ˆè®¤è¯æœ‰æ•ˆæœŸ2-3å¹´ï¼‰</option>
                        </select>
                        
                        <div class="bg-purple-50 border-l-4 border-purple-400 p-3 mt-3">
                            <p class="text-xs text-purple-700">
                                <strong>ğŸ“… æœ‰æ•ˆæœŸè¯´æ˜ï¼š</strong>ä¸åŒæ–‡ä»¶ç±»å‹çš„è®¤è¯æœ‰æ•ˆæœŸä¸åŒï¼Œé€‰æ‹©åˆé€‚çš„æ–‡ä»¶ç±»å‹å¯å»¶é•¿è®¤è¯æœ‰æ•ˆæœŸã€‚
                            </p>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold mb-2">ä¸Šä¼ æ–‡ä»¶ <span class="text-red-500">*</span></label>
                    </div>

                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center file-upload-area cursor-pointer" @click="triggerFileUpload()">
                        <div x-show="!uploadedFile">
                            <svg class="w-12 h-12 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            <p class="text-gray-600 mb-2">ç‚¹å‡»ä¸Šä¼ æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>
                            <p class="text-sm text-gray-500">æ”¯æŒ PDFã€JPGã€PNG æ ¼å¼ï¼Œå•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡10MB</p>
                        </div>
                        <div x-show="uploadedFile" class="flex items-center justify-center">
                            <div class="flex items-center space-x-3">
                                <svg class="w-10 h-10 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div class="text-left">
                                    <p class="font-medium text-gray-800" x-text="uploadedFileName"></p>
                                    <p class="text-sm text-gray-500">æ–‡ä»¶å·²ä¸Šä¼ </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="file" id="fileInput" class="hidden" accept=".pdf,.jpg,.jpeg,.png" @change="handleFileUpload($event)">

                    <div x-show="uploadedFile" class="mt-4 text-center">
                        <button class="text-blue-600 hover:text-blue-800 text-sm" @click="removeFile()">é‡æ–°ä¸Šä¼ </button>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-6">
                        <p class="text-sm text-yellow-700 mb-2">
                            <strong>æ–‡ä»¶è¦æ±‚ï¼š</strong>
                        </p>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ æ–‡ä»¶å¿…é¡»æ¸…æ™°å¯è¯»</li>
                            <li>â€¢ å¿…é¡»æ˜¾ç¤ºæ‚¨çš„å…¨åå’Œå®Œæ•´åœ°å€</li>
                            <li>â€¢ åœ°å€å¿…é¡»ä¸ä¸Šä¸€æ­¥å¡«å†™çš„åœ°å€ä¸€è‡´</li>
                            <li>â€¢ å¿…é¡»æ˜¯è¿‘3ä¸ªæœˆå†…çš„æ–‡ä»¶ï¼ˆç§ŸèµåˆåŒé™¤å¤–ï¼‰</li>
                        </ul>
                    </div>
                </div>

                <div class="flex space-x-2">
                    <button class="flex-1 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300" @click="page='address-info'">è¿”å›</button>
                    <button class="flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" 
                            :disabled="!canSubmitUpload()"
                            :class="{'opacity-50': !canSubmitUpload()}"
                            @click="submitApplication()">æäº¤ç”³è¯·</button>
                </div>
            </div>
        </section>

        <!-- å¡«å†™åœ°å€ä¿¡æ¯é¡µ -->
        <section x-show="page==='address-info'" x-transition x-cloak>
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow p-8">
                <h2 class="text-lg font-bold mb-4">å¡«å†™å±…ä½åœ°å€</h2>
                
                <div class="mb-6">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                        <p class="text-sm text-blue-700">
                            <strong>ç¬¬1æ­¥ï¼š</strong>è¯·å¡«å†™æ‚¨å½“å‰çš„å±…ä½åœ°å€ï¼Œä¸‹ä¸€æ­¥éœ€è¦ä¸Šä¼ è¯æ˜æ–‡ä»¶æ¥éªŒè¯è¯¥åœ°å€ã€‚
                        </p>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">å›½å®¶/åœ°åŒº <span class="text-red-500">*</span></label>
                            <select x-model="form.country" class="w-full border rounded p-2">
                                <option value="">è¯·é€‰æ‹©å›½å®¶/åœ°åŒº</option>
                                <option value="CN">ä¸­å›½å¤§é™†</option>
                                <option value="HK">é¦™æ¸¯</option>
                                <option value="MO">æ¾³é—¨</option>
                                <option value="TW">å°æ¹¾</option>
                                <option value="US">ç¾å›½</option>
                                <option value="GB">è‹±å›½</option>
                                <option value="SG">æ–°åŠ å¡</option>
                                <option value="JP">æ—¥æœ¬</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2">çœ/å· <span class="text-red-500">*</span></label>
                            <input type="text" x-model="form.province" class="w-full border rounded p-2" placeholder="ä¾‹å¦‚ï¼šCalifornia">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2">åŸå¸‚ <span class="text-red-500">*</span></label>
                            <input type="text" x-model="form.city" class="w-full border rounded p-2" placeholder="ä¾‹å¦‚ï¼šLos Angeles">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2">åŒº/å¿</label>
                            <input type="text" x-model="form.district" class="w-full border rounded p-2" placeholder="ä¾‹å¦‚ï¼šLos Angeles County">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2">è¯¦ç»†åœ°å€ <span class="text-red-500">*</span></label>
                            <textarea x-model="form.detailedAddress" class="w-full border rounded p-2" rows="3" placeholder="ä¾‹å¦‚ï¼š1234 Main Street, Apt 567"></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2">é‚®æ”¿ç¼–ç </label>
                            <input type="text" x-model="form.postalCode" class="w-full border rounded p-2" placeholder="ä¾‹å¦‚ï¼š90001">
                        </div>
                    </div>
                </div>

                <div class="flex space-x-2">
                    <button class="flex-1 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300" @click="page='home'">è¿”å›</button>
                    <button class="flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" 
                            :disabled="!isAddressComplete()"
                            :class="{'opacity-50': !isAddressComplete()}"
                            @click="page='upload'">ä¸‹ä¸€æ­¥</button>
                </div>
            </div>
        </section>

        <!-- è®¤è¯çŠ¶æ€é¡µ -->
        <section x-show="page==='status'" x-transition x-cloak>
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow p-8">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-4">
                        <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <h2 class="text-xl font-bold mb-2">æäº¤æˆåŠŸï¼</h2>
                    <p class="text-gray-600">æ‚¨çš„ä½å€è¯æ˜å·²æäº¤ï¼Œæˆ‘ä»¬å°†åœ¨1-2ä¸ªå·¥ä½œæ—¥å†…å®Œæˆå®¡æ ¸ã€‚</p>
                </div>

                <div class="bg-gray-50 rounded-lg p-6 mb-6">
                    <h3 class="font-medium mb-4">æäº¤ä¿¡æ¯æ‘˜è¦</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">è¯æ˜ç±»å‹ï¼š</span>
                            <span class="font-medium" x-text="getProofTypeName(form.proofType)"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ä¸Šä¼ æ–‡ä»¶ï¼š</span>
                            <span class="font-medium" x-text="uploadedFileName"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">åœ°å€ï¼š</span>
                            <span class="font-medium text-right ml-4" x-text="getFullAddress()"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">æäº¤æ—¶é—´ï¼š</span>
                            <span class="font-medium" x-text="submissionTime"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">å½“å‰çŠ¶æ€ï¼š</span>
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">å®¡æ ¸ä¸­</span>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
                    <p class="text-sm text-blue-700 mb-2">
                        <strong>æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong>
                    </p>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>â€¢ æˆ‘ä»¬çš„å›¢é˜Ÿå°†å®¡æ ¸æ‚¨æäº¤çš„ä½å€è¯æ˜</li>
                        <li>â€¢ å¦‚æœéœ€è¦è¡¥å……ææ–™ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡é‚®ä»¶é€šçŸ¥æ‚¨</li>
                        <li>â€¢ å®¡æ ¸é€šè¿‡åï¼Œæ‚¨å°†æ”¶åˆ°ç¡®è®¤é€šçŸ¥</li>
                    </ul>
                </div>

                <button class="w-full py-2 bg-blue-600 text-white rounded hover:bg-blue-700" @click="resetForm()">å®Œæˆ</button>
            </div>
        </section>

    </main>

    <script>
        function addressProofApp() {
            return {
                page: 'home',
                uploadedFile: null,
                uploadedFileName: '',
                submissionTime: '',
                
                form: {
                    proofType: '',
                    country: '',
                    province: '',
                    city: '',
                    district: '',
                    detailedAddress: '',
                    postalCode: ''
                },

                // è§¦å‘æ–‡ä»¶ä¸Šä¼ 
                triggerFileUpload() {
                    document.getElementById('fileInput').click();
                },

                // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
                handleFileUpload(event) {
                    const file = event.target.files[0];
                    if (file) {
                        // éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
                        if (file.size > 10 * 1024 * 1024) {
                            alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
                            return;
                        }

                        // éªŒè¯æ–‡ä»¶ç±»å‹
                        const validTypes = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
                        if (!validTypes.includes(file.type)) {
                            alert('åªæ”¯æŒ PDFã€JPGã€PNG æ ¼å¼çš„æ–‡ä»¶');
                            return;
                        }

                        this.uploadedFile = file;
                        this.uploadedFileName = file.name;
                    }
                },

                // åˆ é™¤å·²ä¸Šä¼ æ–‡ä»¶
                removeFile() {
                    this.uploadedFile = null;
                    this.uploadedFileName = '';
                    document.getElementById('fileInput').value = '';
                },

                // è·å–è¯æ˜ç±»å‹åç§°
                getProofTypeName(type) {
                    const typeMap = {
                        'utility_bill': 'æ°´ç”µç…¤æ°”è´¹è´¦å•',
                        'bank_statement': 'é“¶è¡Œå¯¹è´¦å•',
                        'government_letter': 'æ”¿åºœæœºæ„ä¿¡ä»¶',
                        'lease_contract': 'ç§ŸèµåˆåŒ/æˆ¿äº§è¯æ˜',
                        'telecom_bill': 'é€šä¿¡æœåŠ¡è´¦å•'
                    };
                    return typeMap[type] || '';
                },

                // æ£€æŸ¥åœ°å€æ˜¯å¦å¡«å†™å®Œæ•´
                isAddressComplete() {
                    return this.form.country && 
                           this.form.province && 
                           this.form.city && 
                           this.form.detailedAddress;
                },

                // æ£€æŸ¥æ˜¯å¦å¯ä»¥æäº¤ä¸Šä¼ 
                canSubmitUpload() {
                    return this.form.proofType && this.uploadedFile;
                },

                // è·å–å®Œæ•´åœ°å€
                getFullAddress() {
                    let address = [];
                    if (this.form.country) address.push(this.getCountryName(this.form.country));
                    if (this.form.province) address.push(this.form.province);
                    if (this.form.city) address.push(this.form.city);
                    if (this.form.district) address.push(this.form.district);
                    if (this.form.detailedAddress) address.push(this.form.detailedAddress);
                    return address.join(' ');
                },

                // è·å–å›½å®¶åç§°
                getCountryName(code) {
                    const countryMap = {
                        'CN': 'ä¸­å›½å¤§é™†',
                        'HK': 'é¦™æ¸¯',
                        'MO': 'æ¾³é—¨',
                        'TW': 'å°æ¹¾',
                        'US': 'ç¾å›½',
                        'GB': 'è‹±å›½',
                        'SG': 'æ–°åŠ å¡',
                        'JP': 'æ—¥æœ¬'
                    };
                    return countryMap[code] || code;
                },

                // æäº¤ç”³è¯·
                submitApplication() {
                    // æ¨¡æ‹Ÿæäº¤
                    const now = new Date();
                    this.submissionTime = now.toLocaleString('zh-CN', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    });

                    // è·³è½¬åˆ°çŠ¶æ€é¡µ
                    this.page = 'status';
                    
                    alert('ä½å€è¯æ˜è®¤è¯ç”³è¯·æäº¤æˆåŠŸï¼\n\næˆ‘ä»¬å°†åœ¨1-2ä¸ªå·¥ä½œæ—¥å†…å®Œæˆå®¡æ ¸ã€‚\næ‚¨å°†é€šè¿‡é‚®ä»¶æ”¶åˆ°å®¡æ ¸ç»“æœé€šçŸ¥ã€‚');
                },

                // é‡ç½®è¡¨å•
                resetForm() {
                    this.page = 'home';
                    this.uploadedFile = null;
                    this.uploadedFileName = '';
                    this.submissionTime = '';
                    this.form = {
                        proofType: '',
                        country: '',
                        province: '',
                        city: '',
                        district: '',
                        detailedAddress: '',
                        postalCode: ''
                    };
                    document.getElementById('fileInput').value = '';
                },

                // è·å–è¿›åº¦ç™¾åˆ†æ¯”
                getProgressPercentage() {
                    if (this.page === 'address-info') return 50;
                    if (this.page === 'upload') return 100;
                    return 0;
                },

                // è·å–è¿›åº¦æ–‡æœ¬
                getProgressText() {
                    if (this.page === 'address-info') return 'ç¬¬1æ­¥ï¼šå¡«å†™å±…ä½åœ°å€';
                    if (this.page === 'upload') return 'ç¬¬2æ­¥ï¼šä¸Šä¼ è¯æ˜æ–‡ä»¶';
                    return '';
                }
            }
        }
    </script>
</body>
</html>

