# RWA个人认证完整流程产品需求文档

## 文档信息
- **文档版本**: v3.0
- **创建日期**: 2024-11-06
- **最后更新**: 2024-11-07
- **产品名称**: RWA个人认证系统
- **核心功能**: KYC认证 → 补充信息 → 住址证明 → 合规审查 → 专业投资者认证 → 风险测评（六合一连续流程）

---

## 1. 产品概述

### 1.1 背景与目标
RWA个人认证是一个**连续的、六阶段的认证流程**，将KYC、补充信息、住址证明、合规审查、专业投资者认证、风险测评整合为一个统一的用户体验。用户从头到尾完成所有认证步骤后，才会收到"认证完成，等待审核"的最终提示。

**重要说明**：本RWA产品为**高风险产品**，仅适合成长型（R4）及以上的专业投资者参与。风险测评作为流程的最后一道关卡，确保用户充分了解并具备相应的风险承受能力。

### 1.2 核心设计理念
- **连续性**：六个认证环节无缝衔接，用户感知为一个完整流程
- **进度透明**：全局进度条实时显示整体完成度
- **体验统一**：统一的UI风格、交互模式和提示规范
- **状态同步**：各阶段数据和状态实时同步，支持中断恢复
- **风险匹配**：通过风险测评确保用户适合参与高风险产品

### 1.3 认证流程总览
```
首页 → KYC认证（4步） → 补充信息（1步） → 住址证明（2步） → 合规审查（1步） → 专业投资者认证（2步） → 风险测评（3步） → 提交成功
```

---

## 2. 整体流程交互设计

### 2.1 全局进度管理

#### 2.1.1 整体进度条
**显示时机**：除首页和成功页外的所有页面顶部显示

**进度计算**：
- KYC认证：0-20%
- 补充信息：20-35%
- 住址证明：35-50%
- 合规审查：50-65%
- 专业投资者认证：65-80%
- 风险测评：80-100%

**交互规则**：
- 进度条实时更新，平滑过渡动画
- 显示当前阶段名称（如"第1阶段：KYC身份认证"）
- 显示具体进度百分比
- 使用蓝色渐变背景高亮当前阶段

#### 2.1.2 阶段指示器
**展示形式**：6个横向排列的阶段标签

**标签内容**：
- KYC认证
- 补充信息
- 住址证明
- 合规审查
- 专业投资者
- 风险测评

**状态样式**：
- **进行中**：蓝色高亮文字 + 加粗
- **未开始**：灰色文字
- **已完成**：蓝色文字（不加粗）

**交互行为**：
- 不可点击（用户必须按顺序完成）
- 鼠标悬停无特殊效果

### 2.2 流程跳转规则

#### 2.2.1 前进规则
- 必须按顺序完成：KYC → 补充信息 → 住址证明 → 合规审查 → 专业投资者 → 风险测评
- 每个阶段完成后自动跳转至下一阶段
- 不允许跳过任何阶段
- **特别说明**：风险测评结果为R1-R3（保守型/稳健型/平衡型）的用户，将无法继续完成认证流程，需重新测评或退出

#### 2.2.2 返回规则
- 每个页面都有"返回"按钮（除首页外）
- 返回到上一个操作页面
- 顶部导航栏始终显示"返回首页"按钮
- 点击"返回首页"触发确认弹窗（如有未保存数据）

#### 2.2.3 中断恢复
- 用户中途退出，下次进入时从中断位置继续
- 已填写数据自动保存（草稿）
- 进度条显示实际完成进度

### 2.3 数据传递机制

**阶段间数据共享**：
- KYC阶段采集的姓名、证件号自动传递至后续阶段
- 补充信息阶段的地址信息传递至住址证明阶段
- 避免用户重复填写相同信息

**显示方式**：
- 在新阶段顶部用信息框展示"已从[前阶段]获取的信息"
- 列出具体字段和值
- 部分字段可编辑，部分字段只读

---

## 3. 草稿保存与恢复机制

### 3.1 功能背景
RWA个人认证流程包含**5个阶段、多达10+页面**，用户需要填写大量信息并上传多个文件，完整流程预计需要**10-15分钟**。考虑到：
- 用户可能需要中途离开查找材料
- 网络可能临时中断
- 用户可能需要分多次完成
- 避免用户重复填写造成的挫败感

因此，系统必须提供**自动草稿保存和智能恢复**功能。

### 3.2 自动保存机制

#### 3.2.1 保存时机
**实时自动保存**（无需用户手动操作）：
- 表单字段失焦后立即保存（300ms防抖）
- 文件上传成功后立即保存
- 下拉选择/单选/复选框变更后立即保存
- 点击"下一步"/"提交"按钮时保存
- 页面关闭/刷新前自动保存（beforeunload事件）

**保存提示**：
- 首次自动保存后，右上角显示"已自动保存"提示（3秒后消失）
- 后续保存静默进行，不打扰用户

#### 3.2.2 保存内容
**完整保存的数据**：
1. **当前进度**：
   - 当前所在页面（currentStage）
   - 当前阶段索引（0-5）
   - 各阶段完成状态

2. **KYC阶段数据**：
   - 证件类型（身份证/护照）
   - OCR识别数据（姓名、证件号、国籍、出生日期、有效期、地址）
   - 人脸识别完成状态

3. **补充信息阶段数据**：
   - 居住地址（国家、州/省、城市、街道地址、邮编）
   - 职业、行业
   - 资金来源

4. **住址证明阶段数据**：
   - 证明类型
   - 已上传文件信息（文件名、大小）

5. **合规审查阶段数据**：
   - 出生地（国家、州、城市）
   - 中间名
   - 税务居住国

6. **专业投资者阶段数据**：
   - 已上传净资产证明文件
   - 已上传专业资格证明文件
   - 声明确认状态

7. **风险测评阶段数据**：
   - 当前题目索引
   - 已选答案数组（10个元素）
   - 测评结果（总分、风险等级、是否通过）
   - 独立性声明确认状态

8. **元数据**：
   - 最后保存时间（用于判断草稿有效期）
   - 设备标识（用于多设备同步提示）
   - 会话ID（用于安全验证）

**不保存的数据**：
- 临时的人脸识别过程数据
- 密码、Token等敏感信息
- 临时的验证错误提示

#### 3.2.3 保存位置
**优先级1：后端保存**（推荐）
- 保存至数据库草稿表
- 与用户账号绑定
- 支持多设备访问
- 更安全、更可靠

**优先级2：LocalStorage保存**（备选）
- 保存至浏览器本地存储
- Key格式：`rwa_personal_certification_draft_{userId}`
- 仅限当前设备和浏览器
- 容量限制：5-10MB

**混合方案**（最优）：
- 已登录用户：后端保存 + LocalStorage缓存
- 未登录用户：仅LocalStorage保存
- 提交时若检测到LocalStorage有草稿，同步至后端

### 3.3 恢复机制

#### 3.3.1 恢复入口检测
**场景1：用户进入首页**
- 系统检测是否存在未完成的草稿
- 检测条件：
  - 草稿存在
  - 草稿未过期（7天内）
  - 草稿未提交
  - 当前页面状态不是"已完成"

**检测结果**：
- **有草稿**：显示恢复提示弹窗
- **无草稿**：正常显示首页内容

#### 3.3.2 恢复提示弹窗

**弹窗样式**：
- 模态框，半透明遮罩
- 居中显示
- 蓝色边框，白色背景

**弹窗内容**：
```
标题：检测到未完成的认证
图标：🔄（蓝色圆形图标）

内容：
您有一份进行到 [阶段名称] 的认证申请未完成
最后保存时间：YYYY-MM-DD HH:mm

已完成内容：
✓ KYC身份认证（已完成）
✓ 补充个人信息（已完成）
✓ 住址证明（已完成）
✓ 合规审查（已完成）
✓ 专业投资者认证（已完成）
⏳ 风险测评（进行中 - 第5题/共10题）
○ 最终确认（未开始）

温馨提示：草稿将在 X 天后过期
```

**操作按钮**：
- **继续填写**（主按钮，蓝色）：恢复草稿，跳转至中断页面
- **重新开始**（次要按钮，灰色）：清空草稿，从头开始
- **关闭**（X按钮）：关闭弹窗，留在首页

#### 3.3.3 恢复流程

**点击"继续填写"后**：
1. 显示加载动画："正在恢复您的进度..."（1-2秒）
2. 从保存位置读取草稿数据
3. 恢复所有表单字段和上传文件
4. 恢复进度条状态
5. 跳转至中断时的具体页面
6. 显示成功提示："已恢复至上次进度"（3秒后消失）

**恢复后的交互**：
- 进度条显示实际进度
- 已填字段显示已填内容（可编辑）
- 已上传文件显示文件名（可重新上传）
- 已完成阶段可点击"返回"查看
- 未完成阶段按正常流程继续

**点击"重新开始"后**：
1. 显示二次确认弹窗："确认重新开始吗？当前进度将被清除。"
2. 确认后清空草稿数据
3. 显示首页初始状态
4. 显示提示："已清除草稿"（3秒后消失）

#### 3.3.4 恢复异常处理

**场景1：草稿数据损坏**
- 检测：JSON解析失败或关键字段缺失
- 提示："草稿数据异常，建议重新开始"
- 仅显示"重新开始"按钮

**场景2：草稿版本不兼容**
- 检测：草稿版本号与当前系统版本不匹配
- 提示："检测到旧版本草稿，部分数据可能丢失，建议重新开始"
- 显示"继续填写（可能有数据丢失）"和"重新开始"按钮

**场景3：后端草稿与本地草稿冲突**
- 检测：后端和LocalStorage同时存在草稿，且保存时间不一致
- 提示："检测到多份草稿，请选择恢复哪一份"
- 显示：
  - 云端草稿：最后保存时间、进度
  - 本地草稿：最后保存时间、进度
- 按钮："恢复云端草稿" / "恢复本地草稿" / "重新开始"

### 3.4 草稿有效期管理

#### 3.4.1 有效期规则
- **有效期**：草稿保存后**7天**内有效
- **计算方式**：从最后保存时间开始计算
- **过期处理**：
  - 自动清除过期草稿（每日定时任务）
  - 用户尝试恢复过期草稿时提示："草稿已过期，请重新填写"

#### 3.4.2 过期提醒
- **剩余1天**：用户登录时顶部显示横幅提示
  - "您有一份未完成的RWA个人认证，将在1天后过期，请尽快完成"
  - "继续填写"按钮
  - 可关闭（X按钮）

### 3.5 多设备同步

#### 3.5.1 后端保存方案
- 草稿绑定用户账号，支持多设备访问
- 设备A保存 → 设备B登录 → 自动同步最新草稿

#### 3.5.2 冲突处理
**场景**：设备A和设备B同时编辑草稿

**处理策略**：
- **最后保存优先**：后保存的数据覆盖先保存的数据
- **冲突提示**：当检测到服务器草稿比本地草稿新时
  - 提示："检测到其他设备有更新的进度，是否同步？"
  - 显示两份草稿的保存时间和进度对比
  - 按钮："同步最新进度" / "保留本地进度" / "重新开始"

### 3.6 草稿清除机制

#### 3.6.1 自动清除时机
- 用户点击"提交全部认证"并成功提交
- 草稿过期（7天后）
- 用户主动选择"重新开始"

#### 3.6.2 手动清除入口
**位置**：用户个人中心 → 认证管理

**显示内容**：
- 草稿状态：进行中
- 当前进度：XX%
- 最后保存：YYYY-MM-DD HH:mm
- 操作按钮：
  - "继续填写"（主按钮）
  - "删除草稿"（次要按钮，红色）

**删除确认**：
- 点击"删除草稿"弹出确认："确认删除草稿吗？此操作不可恢复。"
- 确认后清除草稿数据

### 3.7 用户提示与引导

#### 3.7.1 首次使用提示
**时机**：用户第一次填写表单时

**内容**：
- 浅蓝色提示框（可关闭）
- 图标：💾
- 文字："系统会自动保存您的填写进度，您可以随时离开并继续填写"

#### 3.7.2 保存状态提示
**样式**：右上角浮动提示

**状态1：保存成功**
- 图标：绿色勾选 ✓
- 文字："已自动保存"
- 显示3秒后淡出

**状态2：保存中**
- 图标：旋转加载动画
- 文字："保存中..."
- 保存完成后切换至"已自动保存"

**状态3：保存失败**
- 图标：红色感叹号 ⚠️
- 文字："保存失败，请检查网络"
- 显示"重试"按钮
- 不自动消失

#### 3.7.3 离开提示
**时机**：用户填写过程中尝试关闭页面/浏览器

**提示**：
- 浏览器原生确认框（beforeunload）
- 文字："您有未完成的认证，确认离开吗？系统已自动保存您的进度。"
- 按钮："离开" / "留在此页"

### 3.8 技术实现要点

#### 3.8.1 防抖节流
```javascript
// 表单输入防抖保存
const debouncedSave = debounce(saveDraft, 300);

// 监听字段变化
input.addEventListener('input', () => {
  debouncedSave();
});
```

#### 3.8.2 数据结构
```javascript
{
  version: '2.0', // 草稿版本
  userId: 'xxx',
  savedAt: '2024-11-07T10:30:00Z',
  expiresAt: '2024-11-14T10:30:00Z',
  currentStage: 'risk-assessment-question',
  progress: 85, // 总体进度百分比
  data: {
    kyc: { /* KYC数据 */ },
    supplement: { /* 补充信息数据 */ },
    address: { /* 住址证明数据 */ },
    aml: { /* 合规审查数据 */ },
    investor: { /* 专业投资者数据 */ },
    riskAssessment: { 
      currentQuestion: 5,
      answers: [3, 4, 5, 2, 4, null, null, null, null, null],
      totalScore: 0,
      riskLevel: '',
      confirmDeclaration: false
    }
  },
  metadata: {
    device: 'Chrome/Windows',
    sessionId: 'xxx'
  }
}
```

#### 3.8.3 保存API设计
```javascript
// 保存草稿
POST /api/certification/personal/draft/save
Body: { data: {...}, stage: 'xxx' }

// 获取草稿
GET /api/certification/personal/draft/get

// 删除草稿
DELETE /api/certification/personal/draft/delete
```

---

## 4. 第一阶段：KYC身份认证交互

### 4.1 流程步骤
```
选择证件类型 → 拍摄证件 → 人脸识别 → 确认信息 → 完成
```

### 4.2 核心交互逻辑

#### 4.2.1 选择证件类型页

**页面元素**：
- 标题："选择您的证件类型"
- 两个大卡片：身份证、护照
- 每个卡片显示图标、名称、适用说明

**交互要点**：
- 点击卡片选中（蓝色边框 + 蓝色背景）
- 显示"✓ 已选择"徽章
- 只能单选，选中新卡片时自动取消之前的选中
- 选中后"下一步"按钮可用

**验证规则**：
- 必须选择一种证件类型

**跳转**：点击"下一步" → 拍摄证件页

#### 4.2.2 拍摄证件页

**身份证模式**：
- 显示两个上传区域：
  - 左侧："拍摄身份证正面"
  - 右侧："拍摄身份证反面"
- 每个区域独立操作

**护照模式**：
- 显示一个上传区域："拍摄护照信息页"

**交互要点**：
- 未拍摄状态：虚线边框 + 相机图标 + "点击拍摄"
- 点击上传区域 → 模拟拍照（500ms后显示已拍摄）
- 已拍摄状态：绿色实线边框 + 勾选图标 + "已拍摄" + "重新拍摄"
- 显示OCR识别进度（2秒加载动画）
  - "正在识别证件信息..."
  - 旋转加载图标
  - 进度条动画

**验证规则**：
- 身份证模式：必须拍摄正反两面
- 护照模式：必须拍摄信息页
- OCR识别完成后"下一步"按钮可用

**跳转**：点击"下一步" → 人脸识别页

#### 4.2.3 人脸识别页

**页面元素**：
- 标题："人脸识别"
- 说明："请将面部置于识别区域内"
- 摄像头预览区域（黑色背景，圆角矩形）
- "开始人脸识别"按钮

**未开始状态**：
- 摄像头图标（灰色）
- "点击下方按钮开始"文字

**识别中状态**：
- 显示人脸图标（蓝色）
- 扫描线动画（蓝色，上下移动）
- 识别步骤文字（每0.8秒切换）：
  1. "正在启动摄像头..."
  2. "正在检测人脸..."
  3. "正在进行活体检测..."
  4. "正在提取面部特征..."
  5. "正在与证件照比对..."
  6. "正在分析相似度..."

**识别成功状态**：
- 绿色勾选图标
- "✓ 人脸识别成功"
- "相似度：98.5%"（示例数据）
- "下一步"按钮可用

**识别失败状态**：
- 红色错误图标
- "✗ 人脸识别失败"
- 失败原因："请确保光线充足，面部完整清晰"
- "重新识别"按钮

**交互规则**：
- 识别过程中按钮禁用
- 识别成功后才能进入下一步
- 允许无限次重试

**跳转**：点击"下一步" → 确认信息页

#### 4.2.4 确认信息页

**信息提示框**（绿色）：
- 图标：ℹ️
- 标题："以下信息由AI自动识别，请仔细核对"
- 说明："如有错误，请手动修改"

**表单字段**（所有字段可编辑）：
- 姓名 *
- 证件号 *
- 国籍 *
- 出生日期 *
- 证件有效期 *
- 证件地址

**字段显示**：
- 自动填充OCR识别的数据
- 必填字段标注红色星号
- 输入框样式：白色背景，灰色边框
- 聚焦时：蓝色边框

**验证规则**：
- 必填字段不能为空
- 出生日期格式：YYYY-MM-DD
- 证件号格式验证（根据国籍）
- 所有验证通过后"确认并完成认证"按钮可用

**按钮操作**：
- "返回"按钮：返回人脸识别页
- "确认并完成认证"按钮：
  - 保存KYC数据
  - 自动跳转至补充信息页

---

## 5. 第二阶段：补充个人信息交互

### 5.1 流程步骤
```
填写补充信息表单 → 完成
```

### 5.2 核心交互逻辑

#### 5.2.1 信息展示

**顶部信息框**（蓝色）：
- 图标：ℹ️
- 标题："已从KYC获取的信息"
- 显示：姓名、证件号
- 只读显示，不可编辑

#### 5.2.2 表单填写

**居住地址部分**：
- 居住国家 * （下拉选择）
- 州/省 * （下拉选择，根据国家动态加载）
- 城市 * （下拉选择，根据州/省动态加载）
- 街道地址 *
- 邮政编码 *

**三级联动逻辑**：
- 选择国家 → 清空州/省和城市 → 加载该国家的州/省列表
- 选择州/省 → 清空城市 → 加载该州/省的城市列表
- 选择城市 → 显示已选择的完整地址

**个人信息部分**：
- 职业 * （输入框）
- 行业 * （输入框）
- 资金来源 * （输入框）

**实时验证**：
- 字段失焦时验证
- 错误提示显示在字段下方（红色文字）
- 所有必填字段填写完成后"提交并继续"按钮可用

**按钮操作**：
- "返回"按钮：返回KYC确认信息页
- "提交并继续"按钮：
  - 保存补充信息数据
  - 自动跳转至住址证明页

---

## 6. 第三阶段：住址证明交互

### 6.1 流程步骤
```
选择证明类型 → 上传证明文件 → 完成
```

### 6.2 核心交互逻辑

#### 6.2.1 选择证明类型页

**页面元素**：
- 标题："选择住址证明类型"
- 说明："请选择您可以提供的住址证明文件类型"

**证明类型选项**（单选）：
1. 水电费账单
   - 说明：近3个月内的水电费账单
2. 银行对账单
   - 说明：近3个月内的银行对账单
3. 政府信件
   - 说明：政府机构发出的正式信件
4. 租赁合同
   - 说明：有效的房屋租赁合同
5. 房产证明
   - 说明：房产所有权证明文件

**交互要点**：
- 单选框选择
- 选中后高亮显示（蓝色背景）
- 显示详细说明
- 选中后"下一步"按钮可用

**跳转**：点击"下一步" → 上传文件页

#### 6.2.2 上传证明文件页

**页面元素**：
- 标题："上传住址证明"
- 选中类型提示："您选择的证明类型：[类型名称]"
- 文件上传区域

**文件要求提示**（蓝色信息框）：
- 文件格式：PDF、JPG、PNG
- 文件大小：不超过10MB
- 文件要求：
  - 文件清晰可读
  - 必须显示姓名和地址
  - 必须在有效期内（近3个月）

**上传区域**：
- **未上传状态**：
  - 虚线边框
  - 上传图标
  - "点击上传或拖拽文件至此"
  - "支持 PDF、JPG、PNG 格式"
- **已上传状态**：
  - 绿色实线边框
  - 文件图标
  - 文件名
  - 文件大小
  - "重新上传"按钮

**交互逻辑**：
- 支持点击上传
- 支持拖拽上传
- 文件验证：格式、大小
- 验证失败弹出提示
- 上传成功后"提交并继续"按钮可用

**按钮操作**：
- "返回"按钮：返回选择证明类型页
- "提交并继续"按钮：
  - 保存住址证明数据
  - 自动跳转至合规审查页

---

## 7. 第四阶段：合规审查交互

### 7.1 流程步骤
```
填写合规审查信息表单 → 完成
```

### 7.2 核心交互逻辑

#### 7.2.1 信息展示

**顶部信息框**（蓝色）：
- 图标：ℹ️
- 标题："已从前面阶段获取的信息"
- 显示：姓名、证件号、国籍
- 只读显示，不可编辑

#### 7.2.2 表单填写

**出生地信息**：
- 出生国家 * （下拉选择）
- 出生州/省 * （下拉选择，根据国家动态加载）
- 出生城市 * （下拉选择，根据州/省动态加载）

**三级联动逻辑**：
- 与补充信息页的地址选择逻辑相同
- 选择国家 → 清空州/省和城市 → 加载州/省列表
- 选择州/省 → 清空城市 → 加载城市列表

**其他信息**：
- 出生地详细地址（可选，输入框）
- 中间名（可选，输入框）
- 税务居住国 * （下拉选择）

**实时验证**：
- 字段失焦时验证
- 错误提示显示在字段下方（红色文字）
- 所有必填字段填写完成后"完成合规审查"按钮可用

**按钮操作**：
- "返回"按钮：返回住址证明上传页
- "完成合规审查"按钮：
  - 保存合规审查数据
  - 自动跳转至专业投资者认证页

---

## 8. 第五阶段：专业投资者认证交互

### 8.1 流程步骤
```
上传证明材料 + 确认声明 → 最终声明确认 → 提交完整申请
```

### 8.2 核心交互逻辑

#### 8.2.1 页面标题
- 标题："上传证明材料"
- 说明："请上传以下必需的证明材料"

#### 8.2.2 财务资格证明（必须）

**1. 净资产证明 ***

**说明文字**：
- "个人或与配偶共同拥有≥100万美元的净资产证明"
- "如：银行资产证明、证券账户资产证明等"

**上传区域**：
- **未上传状态**：
  - 虚线边框
  - 上传图标
  - "点击上传净资产证明"
- **已上传状态**：
  - 绿色边框
  - 绿色勾选图标
  - 文件名
  - "重新上传"按钮

**文件验证**：
- 格式：PDF、JPG、JPEG、PNG
- 大小：≤10MB

#### 8.2.3 专业资格证明（必须）

**2. 专业资格证明 ***

**信息提示框**（蓝色）：
- 标题："请提供专业资格证明。可接受的证明材料包括："
- 列表：
  - 金融机构在职证明或工作证明
  - 企业高管任职证明或职责说明
  - 券商账户持仓证明或交易记录
  - 基金投资记录或持有证明
  - 其他能证明您具有投资经验的材料

**说明文字**：
- "可提供：金融机构在职证明、高管任职证明、券商持仓证明、基金投资记录等"

**上传区域**：
- 交互逻辑与净资产证明相同
- 显示文字："点击上传专业资格证明"
- 副标题："在职证明/任职证明/券商持仓/基金投资记录等"

#### 8.2.4 声明确认

**分隔线**：
- 边框顶部分隔

**标题**：
- "声明确认"

**复选框**（1个必选）：
1. "本人同意被作为专业投资者对待，并理解专业投资者的权利和义务。"

**样式**：
- 灰色背景框
- 复选框在左侧
- 文字在右侧，小字体
- 行间距适中

#### 8.2.5 提交条件

**必须满足以下所有条件**：
- 已上传净资产证明文件
- 已上传专业资格证明文件
- 已勾选声明复选框

**按钮状态**：
- 未满足条件：禁用状态（灰色，cursor: not-allowed，opacity: 50%）
- 满足条件：可用状态（蓝色，cursor: pointer）

#### 8.2.6 按钮操作

**"返回"按钮**：
- 样式：灰色次要按钮
- 操作：返回合规审查页

**"提交专业投资者认证"按钮**：
- 样式：蓝色主按钮
- 操作：
  - 保存专业投资者认证数据
  - 跳转至最终声明确认页

### 8.3 最终声明确认页

#### 8.3.1 页面布局

**标题**：
- "最终确认"
- 居中显示

**声明内容框**（蓝色提示框）：
- 样式：蓝色左侧边框，浅蓝色背景
- 包含复选框和声明文字
- 复选框在左侧，尺寸较大（h-5 w-5）
- 声明文字："本人确认以上信息真实、准确、完整，并了解提供虚假信息可能承担的法律后果。本人已充分了解投资风险，并自愿承担投资结果。"

#### 8.3.2 交互逻辑

**复选框状态**：
- 默认未勾选
- 必须勾选后才能提交

**按钮操作**：

**"返回"按钮**：
- 样式：灰色次要按钮
- 操作：返回专业投资者认证页

**"提交全部认证"按钮**：
- 样式：绿色主按钮
- 禁用条件：未勾选声明复选框时禁用（灰色，opacity: 50%）
- 启用条件：勾选声明复选框后启用
- 操作：
  1. 收集所有阶段的数据
  2. 验证数据完整性
  3. 提交至后端
  4. 显示提交中状态（可选）
  5. 成功后跳转至成功页面
  6. 清除草稿数据

---

## 9. 第六阶段：风险测评交互

### 9.1 流程步骤
```
风险测评欢迎页 → 测评问卷（10题） → 测评结果 → 声明确认 → 继续/退出
```

### 9.2 核心交互逻辑

#### 9.2.1 风险测评欢迎页

**页面标题**：
- 标题："风险承受能力测评"
- 副标题："请根据您的真实情况完成以下测评"

**重要提示框**（红色边框）：
- 图标：⚠️
- 标题："重要提示："
- 内容："本RWA产品为高风险产品，仅适合成长型（R4）及以上的专业投资者参与。"

**测评说明框**（蓝色边框）：
- 标题："测评说明："
- 内容列表：
  - 共10道问题，预计需要3-5分钟
  - 请根据您的真实情况作答
  - 测评结果将影响您是否可以参与本产品
  - 测评结果有效期为1年

**按钮操作**：
- "开始测评"按钮：蓝色主按钮，点击后进入问卷页面

#### 9.2.2 测评问卷页

**页面结构**：
- 顶部：进度指示器（如"第1题 / 共10题"）
- 中部：当前问题和选项
- 底部：导航按钮

**问题展示**：
- 问题序号和内容（大字体，加粗）
- 4-5个选项（单选框形式）
- 每个选项清晰列出，便于理解

**10个问题概览**：
1. **年龄**：18-30岁 / 31-40岁 / 41-50岁 / 51-60岁 / 60岁以上（5-1分）
2. **年收入**：10万以下 / 10-30万 / 30-50万 / 50-100万 / 100万以上（1-5分）
3. **投资经验**：没有 / 1年以下 / 1-3年 / 3-5年 / 5年以上（1-5分）
4. **高风险产品经验**：没有 / 少量 / 一些 / 较多 / 大量（1-5分）
5. **投资占收入比例**：5%以下 / 5-10% / 10-30% / 30-50% / 50%以上（1-5分）
6. **投资目标**：保本 / 保值 / 跑赢通胀 / 资产增值 / 高收益（1-5分）
7. **风险承受能力**：极其谨慎 / 比较谨慎 / 适度 / 积极 / 非常积极（1-5分）
8. **投资期限**：3个月内 / 3-6个月 / 6-12个月 / 1-3年 / 3年以上（1-5分）
9. **收益期望**：2%以下 / 2-5% / 5-10% / 10-20% / 20%以上（1-5分）
10. **区块链知识**：完全不了解 / 略有了解 / 一般了解 / 比较了解 / 非常了解（1-5分）

**评分机制**：
- 每题1-5分，总分10-50分
- 实时累加，不显示给用户
- 完成所有题目后自动计算总分和风险等级

**导航按钮**：
- "上一题"按钮（第一题时禁用）
- "下一题"按钮（选择选项后可用）
- 最后一题显示"查看结果"按钮

**交互规则**：
- 必须选择一个选项才能进入下一题
- 支持返回修改已答题目
- 进度条实时更新

#### 9.2.3 测评结果页（R4-R5通过）

**成功图标**：
- 绿色圆形背景
- 绿色勾选图标

**结果展示**：
- 标题："风险测评完成"
- 副标题："✓ 符合产品要求"

**测评结果卡片**（绿色边框）：
- 风险等级：成长型（R4）或 进取型（R5）
- 总分：XX分
- 等级描述：详细说明用户的风险承受特征
- 适合产品：高风险/高收益产品

**提示信息框**（蓝色）：
- 标题："温馨提示："
- 内容："测评结果有效期为1年，有效期内无需重新测评。"

**声明确认框**（灰色边框）：
- 标题："声明确认："
- 复选框："本人确认以上风险测评问卷由本人独立完成，未受到任何机构或个人的诱导或不当影响。本人承诺所有答案均基于本人真实情况如实填写，并理解虚假填写可能导致不适当的投资建议和相应的投资风险及法律责任。"
- **必须勾选**后才能继续

**按钮操作**：
- "继续完成认证"按钮：绿色主按钮，勾选声明后可用
- 点击后跳转至最终声明确认页

#### 9.2.4 测评结果页（R1-R3不通过）

**警告图标**：
- 红色圆形背景
- 红色感叹号图标

**结果展示**：
- 标题："风险测评完成"
- 副标题："✗ 不符合产品要求"

**测评结果卡片**（红色边框）：
- 风险等级：保守型（R1）/ 稳健型（R2）/ 平衡型（R3）
- 总分：XX分
- 等级描述：详细说明用户的风险承受特征
- 适合产品：低风险/稳健型产品

**不符合要求说明框**（红色边框）：
- 图标：✗
- 标题："不符合产品要求"
- 内容："根据监管要求，本RWA产品为高风险产品，仅适合成长型（R4）及以上的专业投资者参与。"
- 次行："您的风险承受能力评估结果为[风险等级]，暂不符合本产品的投资要求。"

**操作提示框**（蓝色边框）：
- 标题："您可以选择："
- 选项：
  - 重新测评（如果您认为测评结果不准确）
  - 退出认证（我们会为您推荐更适合的产品）

**按钮操作**：
- "重新测评"按钮：橙色按钮，点击返回测评欢迎页，清空之前的答案
- "退出认证"按钮：灰色次要按钮，点击返回首页

**特别说明**：
- 不允许用户绕过风险测评要求
- 测评结果会保存到用户档案
- 系统会记录测评次数，防止恶意刷分

### 9.3 数据管理

#### 9.3.1 测评数据结构
```javascript
riskAssessment: {
  currentQuestion: 0,           // 当前题目索引
  answers: [null, ...],          // 答案数组（10个元素）
  totalScore: 0,                 // 总分（10-50）
  riskLevel: '',                 // 风险等级（R1-R5）
  riskType: '',                  // 风险类型名称
  description: '',               // 等级描述
  confirmDeclaration: false,     // 声明确认状态
  completedAt: '',              // 完成时间
  expiresAt: ''                 // 过期时间（1年后）
}
```

#### 9.3.2 风险等级划分
| 总分范围 | 风险等级 | 风险类型 | 是否可参与 |
|---------|---------|---------|-----------|
| 10-18分 | R1 | 保守型 | ❌ 否 |
| 19-26分 | R2 | 稳健型 | ❌ 否 |
| 27-34分 | R3 | 平衡型 | ❌ 否 |
| 35-42分 | R4 | 成长型 | ✅ 是 |
| 43-50分 | R5 | 进取型 | ✅ 是 |

#### 9.3.3 有效期管理
- **有效期**：测评完成后1年内有效
- **过期提醒**：到期前30天提醒用户重新测评
- **过期处理**：过期后用户需重新测评才能继续使用相关功能

### 9.4 合规要求

#### 9.4.1 独立性声明
- 用户必须确认测评过程独立完成
- 不得受到诱导或不当影响
- 必须如实填写

#### 9.4.2 结果匹配
- 严格执行"等于或低于"匹配规则
- R1-R3用户**强制拦截**，不可参与
- 系统记录拦截日志，便于合规审计

#### 9.4.3 数据安全
- 测评结果加密存储
- 仅授权人员可查看
- 遵守数据保护法规

---

## 10. 提交成功页面交互

### 9.1 页面元素

**成功图标**：
- 绿色圆形背景（w-20 h-20）
- 白色勾选图标（w-12 h-12）
- 居中显示

**标题**：
- "🎉 认证申请提交成功！"（大字体，加粗）
- "您已完成RWA个人认证的全部流程"（小字体，灰色）

**已完成认证列表**（蓝色卡片）：
- 标题："已完成认证"
- 列表：
  - ✓ KYC身份认证
  - ✓ 补充信息
  - ✓ 住址证明
  - ✓ 合规审查
  - ✓ 专业投资者认证
  - ✓ 风险测评

**申请信息摘要**（灰色卡片）：
- 标题："申请信息"
- 内容：
  - 姓名：[从KYC获取]
  - 证件号：[从KYC获取]
  - 国籍：[从KYC获取]
  - 提交时间：YYYY-MM-DD HH:mm:ss
  - 申请ID：[自动生成，如：RWA-P-20241106-XXXXX]
  - 审核状态：等待审核（黄色标签）

**后续流程说明**（蓝色信息卡片）：
- 标题："接下来会发生什么？"
- 列表：
  - 审核时间：我们将在1-3个工作日内完成审核
  - 通知方式：审核结果将通过邮件和站内消息通知您
  - 审核通过：通过后您即可访问RWA投资产品
  - 有效期：认证有效期为365天，到期前30天需重新认证

### 9.2 操作按钮

**"完成"按钮**：
- 样式：蓝色主按钮，宽度100%
- 文字："完成"
- 操作：
  1. 清除所有表单数据
  2. 重置currentStage为'home'
  3. 清除草稿数据
  4. 返回首页

---

## 11. 异常处理与边界场景

### 11.1 中断恢复
**场景**：用户在任何阶段退出流程

**处理**：
- 草稿自动保存至本地/后台
- 下次进入时显示提示："检测到未完成的认证，是否继续？"
- 点击"继续" → 跳转至中断页面，恢复所有数据
- 点击"重新开始" → 清空草稿，从首页开始

### 11.2 网络异常
**场景**：文件上传中网络断开

**处理**：
- 显示上传失败提示
- 保留已上传文件列表
- 提供"重试"按钮
- 不清空已填写数据
- 自动保存当前进度

### 11.3 人脸识别失败
**场景**：人脸识别失败或相似度过低

**处理**：
- 显示失败原因："请确保光线充足，面部完整清晰"
- 显示红色错误图标
- 提供"重新识别"按钮
- 允许无限次重试
- 不影响已完成的拍摄步骤

### 11.4 OCR识别错误
**场景**：OCR识别结果不准确

**处理**：
- 在确认信息页允许用户手动修改所有字段
- 绿色提示框说明："以下信息由AI自动识别，请仔细核对"
- 提供清晰的编辑界面
- 验证必填字段
- 保存用户修改后的数据

### 11.5 文件格式/大小错误
**场景**：用户上传不支持的文件格式或超大文件

**处理**：
- 拒绝上传
- 弹出提示：
  - 格式错误："仅支持PDF、JPG、PNG格式"
  - 大小超限："文件大小不能超过10MB"
- 清空文件选择
- 上传区域恢复初始状态
- 不影响其他数据

### 11.6 表单验证失败
**场景**：用户提交前未填写所有必填字段

**处理**：
- 按钮保持禁用状态
- 显示黄色警告框，列出未完成项
- 字段下方显示红色错误提示
- 自动滚动到第一个错误字段
- 不允许提交

### 11.7 三级联动数据加载失败
**场景**：选择国家后州/省列表加载失败

**处理**：
- 显示加载失败提示："数据加载失败，请重试"
- 提供"重新加载"按钮
- 保留已选择的国家
- 允许用户手动输入（降级方案）

### 11.8 风险测评结果不符合
**场景**：用户风险测评结果为R1-R3，不符合产品要求

**处理**：
- 显示测评结果页（不通过版本）
- 清晰说明不符合原因
- 提供两个选项：
  - 重新测评（返回欢迎页，清空答案）
  - 退出认证（返回首页）
- **强制拦截**，不允许绕过
- 记录测评结果和拦截日志

---

## 12. 状态管理规范

### 12.1 全局状态
```javascript
{
  currentStage: 'home' | 
                'kyc-select-id-type' | 'kyc-capture-id' | 'kyc-face-recognition' | 'kyc-confirm-info' |
                'kyc-supplement' | 
                'address-proof-type' | 'address-proof-upload' |
                'aml-input' | 
                'investor-info' | 'investor-final-declaration' |
                'risk-assessment-welcome' | 'risk-assessment-question' | 'risk-assessment-result' | 'risk-assessment-fail' |
                'success'
}
```

### 12.2 阶段状态
每个阶段维护独立的数据对象：
- `kycForm`: KYC阶段数据
  - idType: 证件类型
  - idFrontCaptured, idBackCaptured, passportCaptured: 拍摄状态
  - ocrProcessing: OCR处理状态
  - faceRecognitionDone: 人脸识别完成状态
  - ocrData: OCR识别数据（姓名、证件号、国籍等）

- `supplementForm`: 补充信息数据
  - 居住地址（国家、州、城市、街道、邮编）
  - 职业、行业、资金来源

- `addressForm`: 住址证明数据
  - proofType: 证明类型
  - uploadedFile: 上传文件

- `amlForm`: AML数据
  - 出生地（国家、州、城市）
  - 中间名、税务居住国

- `investorForm`: 专业投资者数据
  - netAssetFile: 净资产证明文件
  - qualificationFile: 专业资格证明文件
  - confirmProfessional: 声明确认状态
  - confirmDeclaration: 最终声明确认状态

- `riskAssessment`: 风险测评数据
  - currentQuestion: 当前题目索引（0-9）
  - answers: 答案数组（10个元素）
  - totalScore: 总分（10-50）
  - riskLevel: 风险等级（R1-R5）
  - riskType: 风险类型名称
  - description: 等级描述
  - confirmDeclaration: 独立性声明确认状态
  - completedAt: 完成时间
  - expiresAt: 过期时间

### 12.3 状态同步规则
- KYC完成 → 数据传递至补充信息（姓名、证件号）
- 补充信息完成 → 地址数据传递至住址证明
- 合规审查完成 → 启用专业投资者认证
- 专业投资者完成 → 启用风险测评
- 风险测评完成（R4-R5）→ 启用最终声明确认
- 风险测评完成（R1-R3）→ 显示不通过页面，拦截流程
- 最终声明确认完成 → 启用"提交全部认证"按钮
- 成功提交 → 清除所有表单数据和草稿

---

## 13. 测试要点

### 13.1 流程完整性测试
- [ ] 从首页到成功页完整走通（包含风险测评）
- [ ] 每个阶段数据正确传递至下一阶段
- [ ] 进度条准确反映实际进度（包含风险测评进度）
- [ ] 所有必填验证生效

### 13.2 KYC流程测试
- [ ] 证件类型选择正确
- [ ] 拍摄功能正常（模拟）
- [ ] OCR识别流程完整
- [ ] 人脸识别流程完整
- [ ] 信息确认页数据正确

### 13.3 三级联动测试
- [ ] 国家选择触发州/省加载
- [ ] 州/省选择触发城市加载
- [ ] 更改上级选项清空下级选项
- [ ] 数据正确回显

### 13.4 文件上传测试
- [ ] 点击上传功能正常
- [ ] 拖拽上传功能正常
- [ ] 文件格式验证
- [ ] 文件大小验证
- [ ] 重新上传功能
- [ ] 上传失败重试

### 13.5 表单验证测试
- [ ] 必填字段验证
- [ ] 格式验证（日期、证件号等）
- [ ] 实时验证提示
- [ ] 提交按钮状态联动
- [ ] 未完成提示正确显示

### 13.6 风险测评测试
- [ ] 欢迎页显示正常
- [ ] 10题问卷逐题展示
- [ ] 题目导航（上一题/下一题）正常
- [ ] 答案选择和修改功能
- [ ] 进度指示器准确
- [ ] 评分计算准确（10-50分）
- [ ] R4-R5结果：显示通过页面，可继续认证
- [ ] R1-R3结果：显示不通过页面，强制拦截
- [ ] 重新测评功能正常
- [ ] 独立性声明必须勾选才能继续
- [ ] 测评结果保存到用户档案
- [ ] 有效期（1年）正确设置

### 13.7 草稿保存恢复测试
- [ ] 自动保存功能正常（包含风险测评数据）
- [ ] 保存提示显示正确
- [ ] 恢复提示弹窗正常
- [ ] 恢复数据完整准确（包含风险测评答案）
- [ ] 草稿过期处理
- [ ] 多设备冲突处理

### 13.8 边界场景测试
- [ ] 中断恢复功能正常
- [ ] 网络异常提示和重试
- [ ] 文件格式/大小验证
- [ ] 空白表单提交被阻止
- [ ] 人脸识别失败重试
- [ ] OCR识别错误可修正
- [ ] 风险测评不通过拦截生效
- [ ] 防止绕过风险测评要求

### 13.9 交互体验测试
- [ ] 所有按钮hover效果
- [ ] 禁用状态正确显示
- [ ] 加载动画流畅
- [ ] 错误提示友好清晰
- [ ] 移动端适配良好
- [ ] 风险测评页面过渡动画
- [ ] 测评结果展示美观清晰

---

## 14. 附录

### 14.1 页面跳转流程图
```
home
  ↓ [开始认证]
kyc-select-id-type
  ↓ [下一步]
kyc-capture-id
  ↓ [下一步]
kyc-face-recognition
  ↓ [下一步]
kyc-confirm-info
  ↓ [确认并完成认证]
kyc-supplement
  ↓ [提交并继续]
address-proof-type
  ↓ [下一步]
address-proof-upload
  ↓ [提交并继续]
aml-input
  ↓ [完成合规审查]
investor-info
  ↓ [提交专业投资者认证]
investor-final-declaration
  ↓ [确认并继续]
risk-assessment-welcome
  ↓ [开始测评]
risk-assessment-question (10题)
  ↓ [查看结果]
risk-assessment-result
  ├─ [R4-R5] ↓ [勾选声明后继续完成认证]
  │           investor-final-declaration (最终声明)
  │           ↓ [提交全部认证]
  │           success
  │           ↓ [完成]
  │           home
  └─ [R1-R3] ↓
             risk-assessment-fail
             ├─ [重新测评] → risk-assessment-welcome
             └─ [退出认证] → home
```

### 14.2 进度计算规则
```javascript
const stages = {
  'home': 0,
  'kyc-select-id-type': 4,
  'kyc-capture-id': 8,
  'kyc-face-recognition': 12,
  'kyc-confirm-info': 16,
  'kyc-supplement': 20,
  'address-proof-type': 35,
  'address-proof-upload': 40,
  'aml-input': 50,
  'investor-info': 65,
  'investor-final-declaration': 75,
  'risk-assessment-welcome': 80,
  'risk-assessment-question': 85,
  'risk-assessment-result': 95,
  'success': 100
};
```

### 14.3 术语表
- **KYC**: Know Your Customer，了解你的客户
- **合规审查**: 根据相关地区的合规要求进行的审查
- **RWA**: Real World Assets，真实世界资产
- **OCR**: Optical Character Recognition，光学字符识别
- **UBO**: Ultimate Beneficial Owner，最终受益所有人
- **PEP**: Politically Exposed Person，政治公众人物
- **风险测评**: 评估投资者风险承受能力的问卷调查
- **R1-R5**: 风险等级分级，从保守型(R1)到进取型(R5)

### 14.4 数据字典

#### KYC数据结构
| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| idType | String | 是 | 证件类型：'id_card' / 'passport' |
| idFrontCaptured | Boolean | 否 | 身份证正面拍摄状态 |
| idBackCaptured | Boolean | 否 | 身份证反面拍摄状态 |
| passportCaptured | Boolean | 否 | 护照拍摄状态 |
| faceRecognitionDone | Boolean | 是 | 人脸识别完成状态 |
| name | String | 是 | 姓名 |
| idNumber | String | 是 | 证件号 |
| nationality | String | 是 | 国籍 |
| birthDate | String | 是 | 出生日期（YYYY-MM-DD） |
| expiryDate | String | 是 | 证件有效期 |
| address | String | 否 | 证件地址 |

#### 补充信息数据结构
| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| residentialCountry | String | 是 | 居住国家 |
| residentialState | String | 是 | 居住州/省 |
| residentialCity | String | 是 | 居住城市 |
| streetAddress | String | 是 | 街道地址 |
| postalCode | String | 是 | 邮政编码 |
| occupation | String | 是 | 职业 |
| industry | String | 是 | 行业 |
| sourceOfFunds | String | 是 | 资金来源 |

#### 住址证明数据结构
| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| proofType | String | 是 | 证明类型：'utility_bill' / 'bank_statement' / 'government_letter' / 'lease' / 'property_deed' |
| uploadedFile | String | 是 | 上传文件名 |

#### AML数据结构
| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| birthCountry | String | 是 | 出生国家 |
| birthState | String | 是 | 出生州/省 |
| birthCity | String | 是 | 出生城市 |
| middleName | String | 否 | 中间名 |
| taxResidenceCountry | String | 是 | 税务居住国 |

#### 专业投资者数据结构
| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| netAssetFile | File | 是 | 净资产证明文件 |
| qualificationFile | File | 是 | 专业资格证明文件 |
| confirmProfessional | Boolean | 是 | 确认专业投资者声明 |
| confirmDeclaration | Boolean | 是 | 确认信息真实性声明（最终声明） |

#### 风险测评数据结构
| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| currentQuestion | Integer | 是 | 当前题目索引（0-9） |
| answers | Array | 是 | 答案数组（10个元素，每个元素1-5） |
| totalScore | Integer | 是 | 总分（10-50） |
| riskLevel | String | 是 | 风险等级：'R1' / 'R2' / 'R3' / 'R4' / 'R5' |
| riskType | String | 是 | 风险类型：'保守型' / '稳健型' / '平衡型' / '成长型' / '进取型' |
| description | String | 是 | 风险等级详细描述 |
| confirmDeclaration | Boolean | 是 | 独立性声明确认状态 |
| completedAt | String | 是 | 完成时间（ISO 8601格式） |
| expiresAt | String | 是 | 过期时间（完成时间+1年） |
| isPassed | Boolean | 是 | 是否通过（R4-R5为true，R1-R3为false） |

### 14.5 API接口列表

#### 3.5.1 草稿管理
```
POST /api/certification/personal/draft/save
GET /api/certification/personal/draft/get
DELETE /api/certification/personal/draft/delete
```

#### 3.5.2 文件上传
```
POST /api/certification/personal/upload/id-card
POST /api/certification/personal/upload/address-proof
POST /api/certification/personal/upload/asset-proof
POST /api/certification/personal/upload/qualification-proof
```

#### 3.5.3 认证提交
```
POST /api/certification/personal/submit
```

#### 3.5.4 风险测评
```
POST /api/risk-assessment/save          # 保存测评答案
POST /api/risk-assessment/calculate     # 计算测评结果
GET /api/risk-assessment/result         # 获取测评结果
POST /api/risk-assessment/restart       # 重新开始测评
GET /api/risk-assessment/history        # 获取历史测评记录
```

#### 3.5.5 数据查询
```
GET /api/certification/personal/status
GET /api/certification/personal/result
```

### 14.6 更新记录
| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|---------|--------|
| v1.0 | 2024-11-06 | 初始版本创建 | 产品团队 |
| v2.0 | 2024-11-06 | 1. 将"AML反洗钱认证"统一更名为"合规审查"<br>2. 删除补充信息页面的未完成提示<br>3. 删除合规审查页面的检查说明和未完成提示<br>4. 调整专业投资者认证流程：删除第二个声明、删除未完成提示<br>5. 新增最终声明确认页面（独立页面，需勾选后才能提交）<br>6. 更新所有相关的进度计算、页面流转和术语表 | 产品团队 |
| v3.0 | 2024-11-07 | **新增风险测评环节**<br>1. 在专业投资者认证后新增风险测评环节（第六阶段）<br>2. 风险测评包含：欢迎页、10题问卷、测评结果页、独立性声明<br>3. 评分机制：10题累加制，总分10-50分，划分为R1-R5五个风险等级<br>4. **强制准入控制**：R4-R5（成长型/进取型）可继续认证，R1-R3（保守型/稳健型/平衡型）强制拦截<br>5. 测评结果有效期为1年，过期需重新测评<br>6. 新增独立性声明：用户需确认测评由本人独立完成，未受诱导<br>7. 更新流程说明：明确本RWA产品为高风险产品，仅适合R4及以上投资者<br>8. 更新进度计算：调整各阶段进度百分比，风险测评占80-100%<br>9. 新增风险测评API接口、数据结构、状态管理<br>10. 新增风险测评相关测试要点和异常处理 | 产品团队 |

---

**文档结束**

