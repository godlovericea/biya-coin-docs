# 用户积分系统 PRD

> 产品经理：张三 | 版本：v1.0 | 日期：2025-11-10

---

## 一、需求背景（1分钟读完）

**为什么做？**
- 用户注册后活跃度低，30天留存率仅35%
- 缺少激励手段，用户粘性不足

**目标是什么？**
- 提升日活 30%
- 提升30天留存至 60%

**谁在用？**
- 所有注册用户

---

## 二、核心功能（3个功能）

### 功能1：赚取积分

**方式1 - 每日签到**
- 每天首次打开APP，自动签到
- 奖励10积分
- 连续签到有额外奖励：3天+10，7天+50，30天+200

**方式2 - 完成订单**
- 订单完成后自动发放
- 奖励 = 实付金额 × 5%（向下取整）
- 例如：实付200元，得10积分

**方式3 - 评价商品**
- 写评价（≥10个字）
- 奖励20积分
- 每天最多5次

### 功能2：使用积分

**用法1 - 积分商城**
- 500积分换5元优惠券
- 1000积分换10元优惠券
- 2000积分换20元优惠券

**用法2 - 订单抵扣**
- 100积分 = 1元
- 每单最多抵扣30%
- 订单满10元可用

### 功能3：积分过期

- 有效期365天
- 过期前30/7/1天推送提醒
- 过期自动清零

---

## 三、完整流程（重点！）

### 流程1：用户赚取积分

```
用户打开APP
    ↓
系统检测：今天是否已签到？
    ├─ 是 → 不发积分
    └─ 否 ↓
检查：是否连续签到？
    ├─ 连续3天 → 发10+10=20积分
    ├─ 连续7天 → 发10+50=60积分  
    ├─ 连续30天 → 发10+200=210积分
    └─ 其他 → 发10积分
        ↓
弹窗提示："签到成功！获得XX积分"
    ↓
更新积分余额
    ↓
记录到积分明细
    ↓
完成
```

### 流程2：积分商城兑换

```
用户进入积分商城
    ↓
选择商品，点击"立即兑换"
    ↓
弹窗确认：
  - 商品名称
  - 需要积分
  - 当前积分
  - 兑换后剩余
    ↓
用户点击"确认兑换"
    ↓
检查1：积分够吗？
    ├─ 不够 → 提示"积分不足" → 结束
    └─ 够 ↓
检查2：商品有库存吗？
    ├─ 没有 → 提示"已兑完" → 结束
    └─ 有 ↓
扣除积分
    ↓
发放商品（优惠券到卡包）
    ↓
显示"兑换成功"
    ↓
完成
```

### 流程3：订单抵扣积分

```
用户在结算页
    ↓
看到"使用积分"入口（显示可用积分）
    ↓
点击"使用积分"
    ↓
弹窗显示：
  - 当前积分：1000
  - 订单金额：100元
  - 最多可抵：30元（30%限制）
  - 实际可抵：10元（因为只有1000积分）
    ↓
用户输入积分数（或点"使用最大"）
    ↓
系统计算抵扣金额
    ↓
更新订单金额
    ↓
用户支付
    ↓
支付成功后扣除积分
    ↓
记录积分明细
    ↓
完成

【如果退款】
退款金额 × (积分抵扣/订单总额) = 退还积分
```

---

## 四、业务规则（一张表看懂）

### 规则表

| 项目 | 规则 | 备注 |
|-----|------|------|
| **签到积分** | 10/次，1次/天 | 连续签到有额外奖励 |
| **订单积分** | 实付×5% | 退款扣回 |
| **评价积分** | 20/次，5次/天 | 文字≥10字 |
| **兑换优惠券** | 500/1000/2000积分 | 最低100积分可兑换 |
| **订单抵扣** | 100积分=1元 | 最多抵30% |
| **有效期** | 365天 | 先进先出 |
| **过期提醒** | 30/7/1天前 | APP推送 |
| **抵扣限制** | 订单满10元 | 不可与优惠券叠加 |

### 计算公式

```
订单积分 = Math.floor(实付金额 × 0.05)
抵扣金额 = Math.floor(积分数 ÷ 100)
退还积分 = Math.floor(退款金额 × (使用积分÷订单金额))
```

---

## 五、页面原型（开发看这里）

### 页面1：积分中心首页

```
┌──────────────────────────┐
│ < 返回   积分中心   规则  │
├──────────────────────────┤
│                          │
│    【我的积分：1,250】    │
│    即将过期：100          │
│    [查看明细]             │
│                          │
│   [签到] [商城] [任务]   │
│                          │
│   ✓ 每日签到    +10积分  │
│   ○ 完成订单    +50积分  │
│   ○ 评价商品    +20积分  │
│                          │
│   推荐兑换                │
│   [5元券] [10元券] ...   │
│                          │
└──────────────────────────┘
```

### 页面2：积分商城

```
┌──────────────────────────┐
│ < 返回   积分商城         │
├──────────────────────────┤
│                          │
│ ┌────────┐  ┌────────┐  │
│ │ 5元券  │  │10元券  │  │
│ │ 500积分│  │1000积分│  │
│ │[立即兑换]│  │[立即兑换]│  │
│ └────────┘  └────────┘  │
│                          │
└──────────────────────────┘
```

### 弹窗：兑换确认

```
┌─────────────────┐
│   确认兑换      │
├─────────────────┤
│  [商品图片]     │
│  5元优惠券      │
│  需要：500积分  │
│  当前：1250积分 │
│  剩余：750积分  │
│                 │
│ [取消][确认兑换]│
└─────────────────┘
```

### 页面3：订单结算（积分抵扣）

```
┌──────────────────────────┐
│ 商品金额       ¥100.00   │
│ 运费           ¥10.00    │
│ ─────────────────────── │
│ 使用积分  [1000积分 -¥10>]│
│ ─────────────────────── │
│ 实付           ¥100.00   │
│                          │
│      [立即支付]          │
└──────────────────────────┘
```

---

## 六、异常处理（开发必看）

| 场景 | 提示文案 | 处理方式 |
|-----|---------|---------|
| 积分不足 | "积分不足，还差XX积分" | 兑换失败 |
| 今日次数用完 | "今日任务次数已用完" | 不发积分 |
| 商品没库存 | "该商品已兑完" | 兑换失败 |
| 订单退款 | "已退还XX积分" | 按比例退积分 |
| 评价删除（7天内） | "评价删除，扣除20积分" | 扣回积分 |

---

## 七、数据需求（给数据团队）

### 需要的统计数据

| 数据项 | 说明 | 用途 |
|-------|------|------|
| 今日发放积分 | 各任务发放的积分总数 | 评估成本 |
| 今日消耗积分 | 各场景使用的积分总数 | 评估使用率 |
| 积分参与率 | 使用积分功能的用户占比 | 评估效果 |
| 热门兑换TOP5 | 兑换最多的商品 | 优化商品 |

---

## 八、开发排期

| 阶段 | 时间 | 产出 |
|-----|------|------|
| 需求评审 | 11.11-11.12 | 确认无遗漏 |
| UI设计 | 11.13-11.15 | 设计稿 |
| 开发 | 11.16-11.28 | 功能实现 |
| 测试 | 11.29-12.02 | 测试通过 |
| 上线 | 12.05 | 正式上线 |

---

## 九、验收标准

- [ ] 用户能正常签到并获得积分
- [ ] 用户能在商城兑换商品
- [ ] 用户能在订单中使用积分抵扣
- [ ] 积分过期前有提醒
- [ ] 退款后积分正确退还
- [ ] 所有提示文案正确显示

---

## 附录：常见问题

**Q：积分会清零吗？**
A：只有过期的积分会清零（365天）

**Q：积分能送给别人吗？**
A：不能，只能自己用

**Q：积分和优惠券能一起用吗？**
A：不能，只能二选一

---

**文档说明**：
- ✅ 所有流程都有详细说明
- ✅ 所有规则都有明确数字
- ✅ 所有页面都有原型示意
- ✅ 所有异常都有处理方式

**开发同学接到这个文档后，可以直接用AI拆解任务并开发！**

