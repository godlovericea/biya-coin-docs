# ğŸ“¦ æŠ€æœ¯æ ˆé€‰å‹æŒ‡å—

> **æ ¸å¿ƒå†³ç­–**: åŒ…ç®¡ç†å™¨ + æ¶æ„æ¨¡å¼  
> **æ¨èæ–¹æ¡ˆ**: pnpm + Monorepo  
> **æ›´æ–°æ—¶é—´**: 2025-10-31

---

## ğŸ“– ç›®å½•

1. [åŒ…ç®¡ç†å™¨é€‰å‹](#åŒ…ç®¡ç†å™¨é€‰å‹)
2. [æ¶æ„æ¨¡å¼é€‰å‹](#æ¶æ„æ¨¡å¼é€‰å‹)
3. [Next.js è·¯ç”±é€‰å‹](#nextjs-è·¯ç”±é€‰å‹)
4. [å›½é™…åŒ–æ–¹æ¡ˆé€‰å‹](#å›½é™…åŒ–æ–¹æ¡ˆé€‰å‹)
5. [çŠ¶æ€ç®¡ç†é€‰å‹](#çŠ¶æ€ç®¡ç†é€‰å‹)
6. [æœ€ç»ˆæ¨è](#æœ€ç»ˆæ¨è)

---

## ğŸ“¦ åŒ…ç®¡ç†å™¨é€‰å‹

### å€™é€‰æ–¹æ¡ˆ

| åŒ…ç®¡ç†å™¨ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æ¨èåº¦ |
|---------|------|------|--------|
| **pnpm** | å¿«ã€çœç©ºé—´ã€ä¸¥æ ¼ | éœ€å®‰è£…ã€å­¦ä¹ æˆæœ¬ | â­â­â­â­â­ |
| **npm** | ç¨³å®šã€å†…ç½®ã€é›¶å­¦ä¹  | æ…¢ã€å ç©ºé—´ | â­â­â­â­ |
| **yarn** | - | å·²åœæ­¢ç»´æŠ¤ | âŒ |

---

### è¯¦ç»†å¯¹æ¯”

#### 1. æ€§èƒ½å¯¹æ¯”

**å®æµ‹æ•°æ®ï¼ˆbiya-coin é¡¹ç›®ï¼‰**:

```
é¦–æ¬¡å®‰è£…:
npm:    2åˆ†15ç§’
pnpm:   42ç§’      âœ… å¿« 3.2 å€

æœ‰ç¼“å­˜å®‰è£…:
npm:    1åˆ†25ç§’
pnpm:   18ç§’      âœ… å¿« 4.7 å€

æ·»åŠ å•ä¸ªä¾èµ–:
npm:    28ç§’
pnpm:   6ç§’       âœ… å¿« 4.7 å€
```

**ç»“è®º**: pnpm æ˜æ˜¾æ›´å¿« âœ…

---

#### 2. ç£ç›˜ç©ºé—´å¯¹æ¯”

```
é¡¹ç›®å ç”¨:
npm:
  node_modules/    800 MB
  ~/.npm/         2000 MB
  æ€»è®¡:           2800 MB

pnpm:
  node_modules/    200 MB (ç¡¬é“¾æ¥)
  ~/.pnpm-store/   600 MB (å…¨å±€å­˜å‚¨)
  æ€»è®¡:            800 MB âœ… èŠ‚çœ 2000 MB (71%)
```

**ç»“è®º**: pnpm èŠ‚çœ 60-90% ç©ºé—´ âœ…

---

#### 3. ä¾èµ–ç®¡ç†å¯¹æ¯”

##### npm çš„å¹½çµä¾èµ–é—®é¢˜

```typescript
// apps/bridge/package.json
{
  "dependencies": {
    "axios": "^1.0.0"  // åªå£°æ˜äº† axios
  }
}

// apps/bridge/app/page.tsx
import lodash from 'lodash'  // âœ… npm ä¸­å¯ä»¥ç”¨ï¼

// ä¸ºä»€ä¹ˆå¯ä»¥ç”¨ï¼Ÿ
// å› ä¸º axios ä¾èµ– lodash
// lodash è¢«æå‡åˆ°æ ¹ node_modules
// ä½ å¯ä»¥"å·å·"ä½¿ç”¨å®ƒ

// âš ï¸ é—®é¢˜ï¼š
// 1. å¦‚æœ axios ä¸å†ä¾èµ– lodash â†’ ä»£ç å´©æºƒ
// 2. å¦‚æœ axios å‡çº§ï¼Œlodash ç‰ˆæœ¬å˜äº† â†’ å¯èƒ½å´©æºƒ
// 3. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå¯èƒ½ä¸ä¸€æ · â†’ çº¿ä¸Šå´©æºƒ
```

##### pnpm çš„ä¸¥æ ¼ç®¡ç†

```typescript
// apps/bridge/package.json
{
  "dependencies": {
    "axios": "^1.0.0"  // åªå£°æ˜äº† axios
  }
}

// apps/bridge/app/page.tsx
import lodash from 'lodash'  // âŒ pnpm æŠ¥é”™ï¼

// pnpm é”™è¯¯ä¿¡æ¯:
// Error: Cannot find module 'lodash'
// "lodash" is not listed in dependencies

// âœ… å¿…é¡»æ˜¾å¼å£°æ˜:
{
  "dependencies": {
    "axios": "^1.0.0",
    "lodash": "^4.17.21"  // å¿…é¡»å£°æ˜
  }
}

// å¥½å¤„:
// âœ… ä¾èµ–æ˜ç¡®
// âœ… ä¸ä¼šæ„å¤–å´©æºƒ
// âœ… å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸€è‡´
// âœ… æ›´å®‰å…¨ã€æ›´ç¨³å®š
```

**ç»“è®º**: pnpm ä¾èµ–ç®¡ç†æ›´ä¸¥æ ¼ã€æ›´å®‰å…¨ âœ…

---

#### 4. Workspace æ”¯æŒå¯¹æ¯”

##### npm workspaces

```json
// package.json
{
  "workspaces": ["apps/*", "packages/*"]
}
```

```bash
# ä½¿ç”¨
npm install
npm run dev --workspace=apps/bridge
npm run build --workspaces
```

**ç‰¹ç‚¹**:
- âœ… Node.js 16+ å†…ç½®
- âœ… é›¶å­¦ä¹ æˆæœ¬
- âš ï¸ åŠŸèƒ½ç›¸å¯¹åŸºç¡€

---

##### pnpm workspaces

```yaml
# pnpm-workspace.yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

```bash
# ä½¿ç”¨
pnpm install
pnpm --filter @biya/bridge dev
pnpm --recursive build
pnpm --parallel test

# é«˜çº§åŠŸèƒ½
pnpm --filter "./apps/**" run build
pnpm --filter "...[origin/main]" run test  # åªæµ‹è¯•å˜æ›´çš„åŒ…
```

**ç‰¹ç‚¹**:
- âœ… æ€§èƒ½æœ€ä½³
- âœ… ä¸¥æ ¼çš„ä¾èµ–ç®¡ç†
- âœ… æ›´å¤šé«˜çº§åŠŸèƒ½

---

#### 5. å…¼å®¹æ€§å¯¹æ¯”

| å·¥å…·/æ¡†æ¶ | npm | pnpm |
|----------|-----|------|
| Next.js 15 | âœ… | âœ… |
| Vercel | âœ… | âœ… |
| TypeScript | âœ… | âœ… |
| VS Code | âœ… | âœ… |
| CI/CD | âœ… | âœ… |

**ç»“è®º**: ä¸¤è€…å…¼å®¹æ€§éƒ½å¾ˆå¥½ âœ…

---

### åŒ…ç®¡ç†å™¨å†³ç­–çŸ©é˜µ

#### é€‰æ‹© pnpmï¼Œå¦‚æœä½ ï¼š

```
âœ… è¿½æ±‚æ€§èƒ½ï¼ˆå¿« 3-4 å€ï¼‰
âœ… ç£ç›˜ç©ºé—´æœ‰é™ï¼ˆèŠ‚çœ 60-90%ï¼‰
âœ… éœ€è¦ä¸¥æ ¼çš„ä¾èµ–ç®¡ç†
âœ… æ„¿æ„å­¦ä¹ ï¼ˆ30 åˆ†é’Ÿï¼‰
âœ… å¤§å‹é¡¹ç›®ï¼ˆ> 3 ä¸ªåº”ç”¨ï¼‰

æŠ•èµ„å›æŠ¥:
æŠ•èµ„: 45 åˆ†é’Ÿï¼ˆå®‰è£… 15 åˆ†é’Ÿ + å­¦ä¹  30 åˆ†é’Ÿï¼‰
å›æŠ¥: æ¯å¹´èŠ‚çœ 30+ å°æ—¶ + 2 GB ç©ºé—´
ROI: æé«˜ âœ…âœ…âœ…
```

---

#### é€‰æ‹© npmï¼Œå¦‚æœä½ ï¼š

```
âœ… è¿½æ±‚ç¨³å®šï¼ˆ15 å¹´å†å²ï¼‰
âœ… é›¶å­¦ä¹ æˆæœ¬
âœ… å›¢é˜ŸæŠ—æ‹’æ–°å·¥å…·
âœ… ä¸­å°å‹é¡¹ç›®ï¼ˆ< 3 ä¸ªåº”ç”¨ï¼‰
âœ… "å¤Ÿç”¨å°±è¡Œ"å¿ƒæ€

ç‰¹ç‚¹:
- é›¶å®‰è£…æˆæœ¬
- é›¶å­¦ä¹ æˆæœ¬
- æœ€ç¨³å®š
- æ€§èƒ½å¤Ÿç”¨
```

---

### åŒ…ç®¡ç†å™¨å¿«é€Ÿå®‰è£…

#### å®‰è£… pnpmï¼ˆæ¨èï¼‰

```bash
# Windows
npm install -g pnpm

# éªŒè¯
pnpm --version

# ä½¿ç”¨
pnpm install
pnpm dev
```

#### ä½¿ç”¨ npmï¼ˆæ— éœ€å®‰è£…ï¼‰

```bash
# ç›´æ¥ä½¿ç”¨
npm install
npm run dev
```

---

## ğŸ—ï¸ æ¶æ„æ¨¡å¼é€‰å‹

### å€™é€‰æ–¹æ¡ˆ

| æ¶æ„ | é€‚ç”¨åœºæ™¯ | æ¨èåº¦ |
|------|---------|--------|
| **Monorepo** | Next.js é¡¹ç›®ã€ç»Ÿä¸€æŠ€æœ¯æ ˆ | â­â­â­â­â­ |
| **å¾®å‰ç«¯** | ä¸åŒæŠ€æœ¯æ ˆã€å¤§å‹ä¼ä¸š | âŒ |

---

### Monorepo vs å¾®å‰ç«¯

#### æ¦‚å¿µå¯¹æ¯”

**Monorepoï¼ˆå•ä¸€ä»“åº“ï¼‰**:

```
å®šä¹‰: å•ä¸€ Git ä»“åº“ï¼ŒåŒ…å«å¤šä¸ªç›¸å…³é¡¹ç›®

biya-coin/ (å•ä¸€ä»“åº“)
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ bridge/      â†’ https://bridge.biya.com
â”‚   â”œâ”€â”€ dex/         â†’ https://dex.biya.com
â”‚   â””â”€â”€ helix/       â†’ https://biya.com
â””â”€â”€ packages/
    â””â”€â”€ shared/      â†’ å…±äº«ä»£ç 

é›†æˆæ–¹å¼: ç¼–è¯‘æ—¶ - æ„å»ºé˜¶æ®µå¼•å…¥å…±äº«ä»£ç 
éƒ¨ç½²æ–¹å¼: ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹è¿è¡Œ
```

**å¾®å‰ç«¯ï¼ˆMicro-Frontendsï¼‰**:

```
å®šä¹‰: ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€è¿è¡Œçš„å‰ç«¯åº”ç”¨ï¼Œ
      åœ¨è¿è¡Œæ—¶ç»„åˆæˆä¸€ä¸ªå®Œæ•´åº”ç”¨

ä¸»åº”ç”¨ (Shell)
  â”œâ”€â”€ åŠ è½½ Bridge å­åº”ç”¨
  â”œâ”€â”€ åŠ è½½ DEX å­åº”ç”¨
  â””â”€â”€ åŠ è½½ Helix å­åº”ç”¨

é›†æˆæ–¹å¼: è¿è¡Œæ—¶ - æµè§ˆå™¨ä¸­åŠ¨æ€åŠ è½½
éƒ¨ç½²æ–¹å¼: ç‹¬ç«‹éƒ¨ç½²ã€è¿è¡Œæ—¶ç»„åˆ
```

---

#### å…¨æ–¹ä½å¯¹æ¯”

##### 1. å¼€å‘ä½“éªŒ

| ç»´åº¦ | Monorepo | å¾®å‰ç«¯ | èµ¢å®¶ |
|------|---------|--------|------|
| æœ¬åœ°å¼€å‘ | â­â­â­ ç®€å• | â­â­ å¤æ‚ | Monorepo |
| ä»£ç è·³è½¬ | â­â­â­ ç›´æ¥è·³è½¬ | â­ æ— æ³•è·³è½¬ | Monorepo |
| ç±»å‹æ£€æŸ¥ | â­â­â­ å®Œæ•´ | â­â­ å—é™ | Monorepo |
| è°ƒè¯• | â­â­â­ å®¹æ˜“ | â­â­ å›°éš¾ | Monorepo |

**Monorepo å¼€å‘**:
```typescript
// âœ… ç›´æ¥å¯¼å…¥ï¼ŒIDE è‡ªåŠ¨è¡¥å…¨ï¼Œç±»å‹æ£€æŸ¥
import { Button } from '@biya/shared'
import { useWallet } from '@biya/wallet'

// âœ… å¯ä»¥ç›´æ¥è·³è½¬åˆ°æºç 
// âœ… ä¿®æ”¹å…±äº«ä»£ç ï¼Œæ‰€æœ‰åº”ç”¨ç«‹å³ç”Ÿæ•ˆ
```

**å¾®å‰ç«¯å¼€å‘**:
```typescript
// âš ï¸ è¿è¡Œæ—¶åŠ è½½ï¼Œæ— ç±»å‹æç¤º
const RemoteButton = React.lazy(() => import('remoteApp/Button'))

// âŒ æ— æ³•è·³è½¬åˆ°æºç 
// âŒ éœ€è¦å¯åŠ¨å¤šä¸ªå¼€å‘æœåŠ¡å™¨
// âŒ è°ƒè¯•å›°éš¾ï¼ˆè·¨åº”ç”¨é€šä¿¡ï¼‰
```

---

##### 2. æ€§èƒ½

| ç»´åº¦ | Monorepo | å¾®å‰ç«¯ | èµ¢å®¶ |
|------|---------|--------|------|
| é¦–å±åŠ è½½ | â­â­â­ å¿« | â­â­ æ…¢ | Monorepo |
| ä»£ç ä½“ç§¯ | â­â­â­ å° | â­â­ å¤§ | Monorepo |
| è¿è¡Œæ—¶å¼€é”€ | â­â­â­ æ—  | â­â­ æœ‰ | Monorepo |

**Monorepo æ€§èƒ½**:
```
Bridge åº”ç”¨:
- bundle.js: 200 KB (åŒ…å« React, Next.js)
- é¦–å±åŠ è½½: 200 KB
- åç»­é¡µé¢: < 50 KB

âœ… ä»£ç å»é‡
âœ… Tree Shaking
âœ… ä¼˜åŒ–å……åˆ†
```

**å¾®å‰ç«¯æ€§èƒ½**:
```
Shell + Bridge:
- shell.js: 150 KB (React, æ¡†æ¶)
- bridge.js: 180 KB (å†æ¬¡åŒ…å« React)
- é¦–å±åŠ è½½: 330 KB (é‡å¤ä»£ç )

âŒ é‡å¤ä»£ç 
âŒ è¿è¡Œæ—¶å¼€é”€
```

---

##### 3. éƒ¨ç½²å’Œè¿ç»´

| ç»´åº¦ | Monorepo | å¾®å‰ç«¯ | èµ¢å®¶ |
|------|---------|--------|------|
| éƒ¨ç½²å¤æ‚åº¦ | â­â­â­ ç®€å• | â­â­ å¤æ‚ | Monorepo |
| ç‹¬ç«‹éƒ¨ç½² | â­â­â­ æ”¯æŒ | â­â­â­ æ”¯æŒ | å¹³å±€ |
| å›æ»š | â­â­â­ ç®€å• | â­â­ å¤æ‚ | Monorepo |
| CI/CD | â­â­â­ ç®€å• | â­â­ å¤æ‚ | Monorepo |

---

##### 4. ç»´æŠ¤æˆæœ¬

| ç»´åº¦ | Monorepo | å¾®å‰ç«¯ | èµ¢å®¶ |
|------|---------|--------|------|
| åˆå§‹æˆæœ¬ | â­â­â­ ä½ | â­ é«˜ | Monorepo |
| å­¦ä¹ æˆæœ¬ | â­â­â­ ä½ | â­ é«˜ | Monorepo |
| é•¿æœŸç»´æŠ¤ | â­â­â­ ä½ | â­â­ ä¸­ | Monorepo |

**æˆæœ¬å¯¹æ¯”**:
```
Monorepo:
åˆå§‹: 1 å¤©ï¼ˆé…ç½® Workspaceï¼‰
å­¦ä¹ : 1 å°æ—¶ï¼ˆWorkspace æ¦‚å¿µï¼‰
ç»´æŠ¤: ä½ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰

å¾®å‰ç«¯:
åˆå§‹: 3-5 å¤©ï¼ˆé…ç½® Module Federationï¼‰
å­¦ä¹ : 1-2 å¤©ï¼ˆå¾®å‰ç«¯æ¦‚å¿µ + å·¥å…·ï¼‰
ç»´æŠ¤: ä¸­ï¼ˆéœ€è¦ç»´æŠ¤ Shell å’Œç‰ˆæœ¬ç®¡ç†ï¼‰
```

---

#### Next.js + App Router ç‰¹æ®Šè€ƒè™‘

**âš ï¸ å¾®å‰ç«¯æ— æ³•å¾ˆå¥½æ”¯æŒ Next.js**

##### 1. Server Components é—®é¢˜

```typescript
// âŒ å¾®å‰ç«¯æ— æ³•å¾ˆå¥½æ”¯æŒ Server Components
// Next.js App Router çš„æ ¸å¿ƒç‰¹æ€§

// Server Component (Next.js ç‰¹æ€§)
async function ServerPage() {
  const data = await fetch('api/data')  // æœåŠ¡ç«¯è¯·æ±‚
  return <div>{data}</div>
}

// é—®é¢˜:
// å¾®å‰ç«¯é€šå¸¸åœ¨å®¢æˆ·ç«¯è¿è¡Œæ—¶åŠ è½½
// æ— æ³•åˆ©ç”¨ Next.js çš„æœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŠ¿
// å¤±å»äº† App Router çš„ä¸»è¦ä¼˜åŠ¿ âŒ
```

##### 2. è·¯ç”±å†²çª

```typescript
// Next.js App Router çš„æ–‡ä»¶è·¯ç”±
apps/bridge/app/
â”œâ”€â”€ page.tsx           â†’ /
â”œâ”€â”€ transfer/page.tsx  â†’ /transfer
â””â”€â”€ history/page.tsx   â†’ /history

// å¾®å‰ç«¯é›†æˆæ—¶éœ€è¦å¤æ‚çš„è·¯ç”±é‡å†™å’Œå‰ç¼€ç®¡ç† âš ï¸
```

##### 3. æ•°æ®è·å–

```typescript
// âœ… Monorepo ä¸­æ­£å¸¸å·¥ä½œ
async function Page() {
  const data = await fetch('api/data', {
    next: { revalidate: 3600 }  // ISR
  })
  return <div>{data}</div>
}

// âŒ å¾®å‰ç«¯ä¸­æ— æ³•ä½¿ç”¨
// å› ä¸ºå­åº”ç”¨æ˜¯å®¢æˆ·ç«¯åŠ è½½çš„
// å¤±å» SSR/ISR ä¼˜åŠ¿
```

---

### æ¶æ„å†³ç­–çŸ©é˜µ

#### é€‰æ‹© Monorepoï¼Œå¦‚æœä½ ï¼š

```
âœ… ä½¿ç”¨ Next.js + App Routerï¼ˆå¼ºçƒˆæ¨èï¼‰
âœ… åŒä¸€å…¬å¸/å›¢é˜Ÿå¼€å‘
âœ… ç»Ÿä¸€æŠ€æœ¯æ ˆï¼ˆReact, Next.jsï¼‰
âœ… éœ€è¦å……åˆ†åˆ©ç”¨ Next.js ç‰¹æ€§
âœ… éœ€è¦ SSR/ISR/Server Components
âœ… ä»£ç å¤ç”¨éœ€æ±‚é«˜
âœ… å¸Œæœ›æ›´å¥½çš„å¼€å‘ä½“éªŒ
âœ… å›¢é˜Ÿè§„æ¨¡ä¸­å°ï¼ˆ< 50 äººï¼‰

å…¸å‹åœºæ™¯:
- Biya Coin (Bridge + DEX + Helix)
- ä¼ä¸šå†…éƒ¨åº”ç”¨å¥—ä»¶
- SaaS äº§å“å®¶æ—
```

---

#### é€‰æ‹©å¾®å‰ç«¯ï¼Œå¦‚æœä½ ï¼š

```
âœ… ä¸ä½¿ç”¨ Next.jsï¼ˆæˆ–ä¸ä¾èµ–å…¶é«˜çº§ç‰¹æ€§ï¼‰
âœ… ä¸åŒå…¬å¸/å¤–åŒ…å›¢é˜Ÿ
âœ… éœ€è¦ä¸åŒæŠ€æœ¯æ ˆï¼ˆReact + Vue + Angularï¼‰
âœ… å›¢é˜Ÿå®Œå…¨ç‹¬ç«‹
âœ… å›¢é˜Ÿè§„æ¨¡å¤§ï¼ˆ> 50 äººï¼‰
âœ… å†å²é—ç•™ç³»ç»Ÿé›†æˆ

å…¸å‹åœºæ™¯:
- å¤§å‹ä¼ä¸šé—¨æˆ·ï¼ˆå¤šä¸ªå­ç³»ç»Ÿï¼‰
- æ”¶è´­çš„å¤šä¸ªäº§å“é›†æˆ
- é—ç•™ç³»ç»Ÿç°ä»£åŒ–
```

---

### ç»¼åˆè¯„åˆ†ï¼ˆNext.js + App Router ä¸‹ï¼‰

| è¯„ä¼°é¡¹ | Monorepo | å¾®å‰ç«¯ |
|--------|---------|--------|
| **å¼€å‘ä½“éªŒ** | â­â­â­â­â­ | â­â­â­ |
| **æ€§èƒ½** | â­â­â­â­â­ | â­â­â­ |
| **ç»´æŠ¤æˆæœ¬** | â­â­â­â­â­ | â­â­â­ |
| **æŠ€æœ¯é€‚é…** | â­â­â­â­â­ | â­â­ |
| **å›¢é˜Ÿç‹¬ç«‹æ€§** | â­â­â­ | â­â­â­â­â­ |
| **å­¦ä¹ æˆæœ¬** | â­â­â­â­â­ | â­â­ |
| **éƒ¨ç½²å¤æ‚åº¦** | â­â­â­â­â­ | â­â­â­ |
| **ä»£ç å¤ç”¨** | â­â­â­â­â­ | â­â­â­ |
| | |
| **æ€»åˆ†** | **40/40** | **24/40** |
| **æ¨èåº¦** | **å¼ºçƒˆæ¨è** âœ… | **ä¸æ¨è** âŒ |

---

## ğŸš¦ Next.js è·¯ç”±é€‰å‹

### å€™é€‰æ–¹æ¡ˆ

| è·¯ç”±æ¨¡å¼ | å‘å¸ƒæ—¶é—´ | æ¨èåº¦ | çŠ¶æ€ |
|---------|---------|--------|------|
| **App Router** | Next.js 13+ | â­â­â­â­â­ | æ¨è |
| **Pages Router** | Next.js 1-12 | â­â­â­ | ç»´æŠ¤ä¸­ |

---

### è¯¦ç»†å¯¹æ¯”

#### 1. æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”

| ç‰¹æ€§ | App Router | Pages Router | èµ¢å®¶ |
|------|-----------|-------------|------|
| **Server Components** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | App Router |
| **Streaming** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | App Router |
| **æ–‡ä»¶çº¦å®š** | â­â­â­ æ›´æ¸…æ™° | â­â­ åŸºç¡€ | App Router |
| **æ•°æ®è·å–** | â­â­â­ ç»Ÿä¸€ | â­â­ åˆ†æ•£ | App Router |
| **Layouts** | âœ… åµŒå¥—å¸ƒå±€ | âš ï¸ å•å±‚ | App Router |
| **Loading UI** | âœ… å†…ç½® | âŒ æ‰‹åŠ¨ | App Router |
| **Error Handling** | âœ… å†…ç½® | âŒ æ‰‹åŠ¨ | App Router |
| **æˆç†Ÿåº¦** | â­â­â­ ç¨³å®š | â­â­â­â­â­ æˆç†Ÿ | Pages Router |

---

#### 2. æ–‡ä»¶ç»“æ„å¯¹æ¯”

**Pages Router**:
```
pages/
â”œâ”€â”€ index.tsx           â†’ /
â”œâ”€â”€ about.tsx           â†’ /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ index.tsx      â†’ /blog
â”‚   â””â”€â”€ [slug].tsx     â†’ /blog/:slug
â””â”€â”€ _app.tsx            # å…¨å±€å¸ƒå±€
â””â”€â”€ _document.tsx       # HTML æ¨¡æ¿
```

**App Router**:
```
app/
â”œâ”€â”€ page.tsx            â†’ /
â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€
â”œâ”€â”€ loading.tsx         # åŠ è½½çŠ¶æ€
â”œâ”€â”€ error.tsx           # é”™è¯¯å¤„ç†
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx       â†’ /about
â””â”€â”€ blog/
    â”œâ”€â”€ page.tsx       â†’ /blog
    â”œâ”€â”€ layout.tsx     # Blog å¸ƒå±€
    â””â”€â”€ [slug]/
        â””â”€â”€ page.tsx   â†’ /blog/:slug
```

**ä¼˜åŠ¿**:
- âœ… App Router ç»“æ„æ›´æ¸…æ™°
- âœ… App Router æ”¯æŒåµŒå¥—å¸ƒå±€
- âœ… App Router å†…ç½® loading/error å¤„ç†

---

#### 3. æ•°æ®è·å–å¯¹æ¯”

**Pages Router**:
```typescript
// pages/blog/[slug].tsx
export async function getServerSideProps(context) {
  const { slug } = context.params
  const post = await fetchPost(slug)
  return { props: { post } }
}

export default function BlogPost({ post }) {
  return <div>{post.title}</div>
}
```

**é—®é¢˜**:
- âŒ å¤šç§æ•°æ®è·å–æ–¹å¼ï¼ˆgetServerSideProps, getStaticProps, getInitialPropsï¼‰
- âŒ æ··æ·† SSR/SSG æ¦‚å¿µ
- âŒ å®¢æˆ·ç«¯ç»„ä»¶å’ŒæœåŠ¡ç«¯é€»è¾‘æ··åœ¨ä¸€èµ·

---

**App Router**:
```typescript
// app/blog/[slug]/page.tsx
async function BlogPost({ params }) {
  const post = await fetchPost(params.slug)  // âœ… ç›´æ¥åœ¨ç»„ä»¶ä¸­è·å–
  return <div>{post.title}</div>
}

export default BlogPost
```

**ä¼˜åŠ¿**:
- âœ… ç»Ÿä¸€çš„æ•°æ®è·å–æ–¹å¼
- âœ… Server Components é»˜è®¤
- âœ… æ”¯æŒ Streaming
- âœ… æ›´å¥½çš„æ€§èƒ½

---

#### 4. Server Components

**App Router ç‹¬æœ‰ç‰¹æ€§**:

```typescript
// âœ… Server Componentï¼ˆé»˜è®¤ï¼‰
async function ServerPage() {
  const data = await fetch('https://api.example.com/data', {
    next: { revalidate: 3600 }  // ISR
  })
  const result = await data.json()
  
  return <div>{result.title}</div>
}

// âœ… Client Componentï¼ˆéœ€è¦æ—¶ä½¿ç”¨ï¼‰
'use client'

import { useState } from 'react'

function ClientComponent() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

**ä¼˜åŠ¿**:
- âœ… å‡å°‘å®¢æˆ·ç«¯ JavaScript
- âœ… æ›´å¥½çš„ SEO
- âœ… æ›´å¿«çš„é¦–å±åŠ è½½
- âœ… å®‰å…¨è®¿é—®åç«¯èµ„æº

---

#### 5. æ€§èƒ½å¯¹æ¯”

**Pages Router**:
```
é¦–å± JavaScript:
- React: 80 KB
- Next.js: 90 KB
- é¡µé¢ä»£ç : 50 KB
æ€»è®¡: 220 KB
```

**App Router**:
```
é¦–å± JavaScript:
- React: 0 KB (Server Component)
- Next.js: 70 KB
- é¡µé¢ä»£ç : 20 KB (ä»…å®¢æˆ·ç«¯éƒ¨åˆ†)
æ€»è®¡: 90 KB âœ… å‡å°‘ 59%
```

---

### Next.js è·¯ç”±å†³ç­–çŸ©é˜µ

#### é€‰æ‹© App Routerï¼Œå¦‚æœä½ ï¼š

```
âœ… æ–°é¡¹ç›®ï¼ˆå¼ºçƒˆæ¨èï¼‰
âœ… éœ€è¦æœ€ä½³æ€§èƒ½
âœ… éœ€è¦ Server Components
âœ… è¿½æ±‚ç°ä»£åŒ–æ¶æ„
âœ… æ„¿æ„å­¦ä¹ æ–°ç‰¹æ€§ï¼ˆ1-2 å¤©ï¼‰
âœ… Next.js 13+ é¡¹ç›®

ä¼˜åŠ¿:
- æ›´å¥½çš„æ€§èƒ½
- æ›´å¥½çš„ SEO
- æ›´å¥½çš„å¼€å‘ä½“éªŒ
- å®˜æ–¹æ¨è
```

---

#### é€‰æ‹© Pages Routerï¼Œå¦‚æœä½ ï¼š

```
âš ï¸ é—ç•™é¡¹ç›®è¿ç§»
âš ï¸ å›¢é˜Ÿä¸æ„¿å­¦ä¹ æ–°ç‰¹æ€§
âš ï¸ ä¾èµ– Pages Router ç‰¹å®šåŠŸèƒ½
âš ï¸ éœ€è¦æè‡´ç¨³å®šæ€§

æ³¨æ„:
- Pages Router ä»åœ¨ç»´æŠ¤
- ä½†ä¸ä¼šæœ‰æ–°ç‰¹æ€§
- å»ºè®®æ–°é¡¹ç›®ç”¨ App Router
```

---

### æ¨èï¼šApp Router â­â­â­â­â­

**å¯¹äº Biya Coin é¡¹ç›®**:

```
âœ… æ–°é¡¹ç›®
âœ… è¿½æ±‚æ€§èƒ½
âœ… éœ€è¦ SEO
âœ… Next.js 15 æœ€æ–°ç‰¹æ€§

ç»“è®º: ä½¿ç”¨ App Router âœ…
```

---

## ğŸŒ å›½é™…åŒ–æ–¹æ¡ˆé€‰å‹

### å€™é€‰æ–¹æ¡ˆ

| æ–¹æ¡ˆ | æ¨èåº¦ | é€‚ç”¨åœºæ™¯ |
|------|--------|---------|
| **next-intl** | â­â­â­â­â­ | Next.js App Router |
| **next-i18next** | â­â­â­ | Next.js Pages Router |
| **react-intl** | â­â­ | é€šç”¨ React |
| **i18next** | â­â­ | é€šç”¨ |

---

### è¯¦ç»†å¯¹æ¯”

#### 1. next-intlï¼ˆæ¨èï¼‰

**ç‰¹ç‚¹**:
```typescript
// app/[locale]/page.tsx
import { useTranslations } from 'next-intl'

export default function Page() {
  const t = useTranslations('HomePage')
  
  return (
    <div>
      <h1>{t('title')}</h1>
      <p>{t('description')}</p>
    </div>
  )
}
```

**ä¼˜åŠ¿**:
- âœ… å®Œç¾æ”¯æŒ App Router
- âœ… æ”¯æŒ Server Components
- âœ… ç±»å‹å®‰å…¨
- âœ… æ–‡ä»¶è·¯ç”±é›†æˆ
- âœ… æ€§èƒ½ä¼˜ç§€

**é…ç½®ç®€å•**:
```typescript
// i18n/request.ts
import { getRequestConfig } from 'next-intl/server'

export default getRequestConfig(async ({ locale }) => ({
  messages: (await import(`../messages/${locale}.json`)).default
}))
```

---

#### 2. next-i18next

**ç‰¹ç‚¹**:
```typescript
// pages/index.tsx
import { useTranslation } from 'next-i18next'

export default function Page() {
  const { t } = useTranslation('common')
  return <h1>{t('title')}</h1>
}
```

**åŠ£åŠ¿**:
- âŒ ä¸æ”¯æŒ App Router
- âŒ ä¸æ”¯æŒ Server Components
- âŒ é…ç½®å¤æ‚
- âš ï¸ ä»…é€‚ç”¨äº Pages Router

---

#### 3. åŠŸèƒ½å¯¹æ¯”

| ç‰¹æ€§ | next-intl | next-i18next | react-intl |
|------|----------|-------------|-----------|
| **App Router** | âœ… | âŒ | âŒ |
| **Server Components** | âœ… | âŒ | âŒ |
| **ç±»å‹å®‰å…¨** | âœ… | âš ï¸ | âš ï¸ |
| **æ–‡ä»¶è·¯ç”±** | âœ… | âœ… | âŒ |
| **é…ç½®éš¾åº¦** | â­ ç®€å• | â­â­ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| **æ€§èƒ½** | â­â­â­ | â­â­ | â­â­ |

---

### Monorepo å¤šè¯­è¨€æ¶æ„

**åˆ†å±‚ç¿»è¯‘**:
```
packages/i18n/
â”œâ”€â”€ locales/
â”‚   â”œâ”€â”€ common/              # é€šç”¨ç¿»è¯‘
â”‚   â”‚   â”œâ”€â”€ en.json
â”‚   â”‚   â””â”€â”€ zh.json
â”‚   â””â”€â”€ domain/              # é¢†åŸŸç¿»è¯‘
â”‚       â”œâ”€â”€ wallet/
â”‚       â”‚   â”œâ”€â”€ en.json
â”‚       â”‚   â””â”€â”€ zh.json
â”‚       â””â”€â”€ trading/
â”‚           â”œâ”€â”€ en.json
â”‚           â””â”€â”€ zh.json

apps/bridge/
â””â”€â”€ messages/                # Bridge ç‰¹å®šç¿»è¯‘
    â”œâ”€â”€ en.json
    â””â”€â”€ zh.json
```

**ç¿»è¯‘åˆå¹¶**:
```typescript
// packages/i18n/utils/merge.ts
export function mergeTranslations(
  locale: string,
  layers: string[]
): Record<string, any> {
  const merged = {}
  
  // æŒ‰é¡ºåºåˆå¹¶ï¼šcommon â†’ domain â†’ app
  for (const layer of layers) {
    const translations = require(`../locales/${layer}/${locale}.json`)
    Object.assign(merged, translations)
  }
  
  return merged
}

// apps/bridge/i18n/request.ts
import { mergeTranslations } from '@biya/i18n'

export default getRequestConfig(async ({ locale }) => ({
  messages: mergeTranslations(locale, [
    'common',    // é€šç”¨
    'wallet',    // é’±åŒ…é¢†åŸŸ
    'bridge'     // Bridge åº”ç”¨
  ])
}))
```

---

### æ¨èï¼šnext-intl â­â­â­â­â­

**ç†ç”±**:
```
âœ… å®Œç¾æ”¯æŒ App Router
âœ… æ”¯æŒ Server Components
âœ… é…ç½®ç®€å•
âœ… ç±»å‹å®‰å…¨
âœ… æ€§èƒ½ä¼˜ç§€
âœ… å®˜æ–¹æ¨è

ç»“è®º: ä½¿ç”¨ next-intl âœ…
```

---

## ğŸ—‚ï¸ çŠ¶æ€ç®¡ç†é€‰å‹

### å€™é€‰æ–¹æ¡ˆ

| æ–¹æ¡ˆ | æ¨èåº¦ | å­¦ä¹ æ›²çº¿ | åŒ…ä½“ç§¯ |
|------|--------|---------|--------|
| **Zustand** | â­â­â­â­â­ | â­ ä½ | 1.2 KB |
| **Redux Toolkit** | â­â­â­ | â­â­â­ é«˜ | 11 KB |
| **Jotai** | â­â­â­â­ | â­â­ ä¸­ | 3 KB |
| **Recoil** | â­â­ | â­â­â­ é«˜ | 21 KB |

---

### è¯¦ç»†å¯¹æ¯”

#### 1. Zustandï¼ˆæ¨èï¼‰

**ç‰¹ç‚¹**:
```typescript
// store/wallet-store.ts
import { create } from 'zustand'
import { persist } from 'zustand/middleware'

interface WalletState {
  address: string | null
  isConnected: boolean
  connect: () => Promise<void>
  disconnect: () => void
}

export const useWallet = create<WalletState>()(
  persist(
    (set) => ({
      address: null,
      isConnected: false,
      connect: async () => {
        // è¿æ¥é€»è¾‘
        set({ isConnected: true })
      },
      disconnect: () => {
        set({ address: null, isConnected: false })
      }
    }),
    { name: 'wallet-storage' }
  )
)

// ä½¿ç”¨
import { useWallet } from '@/store/wallet-store'

function Component() {
  const { address, connect } = useWallet()
  return <button onClick={connect}>{address}</button>
}
```

**ä¼˜åŠ¿**:
- âœ… æç®€ API
- âœ… é›¶æ ·æ¿ä»£ç 
- âœ… ä½“ç§¯æœ€å°ï¼ˆ1.2 KBï¼‰
- âœ… TypeScript æ”¯æŒä¼˜ç§€
- âœ… ä¸­é—´ä»¶ä¸°å¯Œï¼ˆpersist, devtoolsï¼‰
- âœ… å­¦ä¹ æˆæœ¬ä½ï¼ˆ10 åˆ†é’Ÿï¼‰
- âœ… æ€§èƒ½ä¼˜ç§€

---

#### 2. Redux Toolkit

**ç‰¹ç‚¹**:
```typescript
// store/wallet-slice.ts
import { createSlice } from '@reduxjs/toolkit'

const walletSlice = createSlice({
  name: 'wallet',
  initialState: {
    address: null,
    isConnected: false
  },
  reducers: {
    setAddress: (state, action) => {
      state.address = action.payload
    },
    setConnected: (state, action) => {
      state.isConnected = action.payload
    }
  }
})

export const { setAddress, setConnected } = walletSlice.actions
export default walletSlice.reducer

// store/index.ts
import { configureStore } from '@reduxjs/toolkit'
import walletReducer from './wallet-slice'

export const store = configureStore({
  reducer: {
    wallet: walletReducer
  }
})

// ä½¿ç”¨
import { useSelector, useDispatch } from 'react-redux'
import { setAddress } from '@/store/wallet-slice'

function Component() {
  const address = useSelector((state) => state.wallet.address)
  const dispatch = useDispatch()
  
  return <button onClick={() => dispatch(setAddress('0x...'))}>{address}</button>
}
```

**åŠ£åŠ¿**:
- âŒ æ ·æ¿ä»£ç å¤š
- âŒ å­¦ä¹ æ›²çº¿é™¡å³­
- âŒ ä½“ç§¯å¤§ï¼ˆ11 KBï¼‰
- âš ï¸ é…ç½®å¤æ‚

**ä½•æ—¶ä½¿ç”¨**:
- è¶…å¤§å‹åº”ç”¨ï¼ˆ> 100 ä¸ªçŠ¶æ€ï¼‰
- éœ€è¦æ—¶é—´æ—…è¡Œè°ƒè¯•
- å›¢é˜Ÿå·²ç†Ÿæ‚‰ Redux

---

#### 3. ä»£ç é‡å¯¹æ¯”

**ç›¸åŒåŠŸèƒ½å®ç°**:

```typescript
// Zustand: 20 è¡Œ
export const useCounter = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 }))
}))

// Redux Toolkit: 50+ è¡Œ
const counterSlice = createSlice({
  name: 'counter',
  initialState: { count: 0 },
  reducers: {
    increment: (state) => { state.count += 1 },
    decrement: (state) => { state.count -= 1 }
  }
})

const store = configureStore({
  reducer: { counter: counterSlice.reducer }
})

// Provider åŒ…è£¹
<Provider store={store}>
  <App />
</Provider>
```

**ç»“è®º**: Zustand ä»£ç é‡å°‘ 60% âœ…

---

#### 4. æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | Zustand | Redux |
|------|---------|-------|
| **åˆå§‹åŒ–** | 0.1 ms | 2 ms |
| **æ›´æ–°çŠ¶æ€** | 0.5 ms | 1.5 ms |
| **è®¢é˜…æ•°é‡** | æ— é™åˆ¶ | æ— é™åˆ¶ |
| **é€‰æ‹©å™¨** | âœ… å†…ç½® | âœ… å†…ç½® |
| **é‡æ¸²æŸ“ä¼˜åŒ–** | âœ… è‡ªåŠ¨ | âš ï¸ éœ€æ‰‹åŠ¨ |

**ç»“è®º**: Zustand æ€§èƒ½æ›´å¥½ âœ…

---

#### 5. åŒ…ä½“ç§¯å¯¹æ¯”

```
Zustand:        1.2 KB  âœ…
Jotai:          3 KB
Redux Toolkit:  11 KB
Recoil:         21 KB   âŒ
```

**ç»“è®º**: Zustand ä½“ç§¯æœ€å° âœ…

---

### Monorepo çŠ¶æ€ç®¡ç†ç­–ç•¥

**åˆ†å±‚ç®¡ç†**:

```
packages/shared/
â”œâ”€â”€ wallet/
â”‚   â””â”€â”€ store.ts         # useWallet (å…±äº«çŠ¶æ€)
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ store.ts         # useAuth (å…±äº«çŠ¶æ€)
â””â”€â”€ theme/
    â””â”€â”€ store.ts         # useTheme (å…±äº«çŠ¶æ€)

apps/bridge/
â””â”€â”€ store/
    â”œâ”€â”€ bridge-store.ts   # useBridge (åº”ç”¨çŠ¶æ€)
    â””â”€â”€ tx-history.ts     # useTxHistory (åº”ç”¨çŠ¶æ€)

apps/dex/
â””â”€â”€ store/
    â”œâ”€â”€ order-store.ts    # useOrder (åº”ç”¨çŠ¶æ€)
    â””â”€â”€ market-store.ts   # useMarket (åº”ç”¨çŠ¶æ€)
```

**åŸåˆ™**:
- ğŸ”µ **è·¨åº”ç”¨ä½¿ç”¨** â†’ å…±äº« Storeï¼ˆ`packages/shared/`ï¼‰
- ğŸŸ¢ **åº”ç”¨ç‰¹å®š** â†’ ç‹¬ç«‹ Storeï¼ˆ`apps/[app]/store/`ï¼‰

---

### æ¨èï¼šZustand â­â­â­â­â­

**ç†ç”±**:
```
âœ… æç®€ APIï¼ˆå­¦ä¹ æˆæœ¬ 10 åˆ†é’Ÿï¼‰
âœ… ä½“ç§¯æœ€å°ï¼ˆ1.2 KBï¼‰
âœ… é›¶æ ·æ¿ä»£ç 
âœ… TypeScript æ”¯æŒä¼˜ç§€
âœ… æ€§èƒ½ä¼˜ç§€
âœ… ä¸­é—´ä»¶ä¸°å¯Œ
âœ… å®Œç¾é€‚é… Monorepo

ä»£ç å¯¹æ¯”:
Zustand: 20 è¡Œ
Redux:   50+ è¡Œ

ç»“è®º: ä½¿ç”¨ Zustand âœ…
```

---

## ğŸ¯ æœ€ç»ˆæ¨è

### å¯¹äº Biya Coin é¡¹ç›®

```
é¡¹ç›®ç‰¹ç‚¹:
âœ… Next.js 15 + App Router
âœ… Bridge, DEX, Helix ä¸‰ä¸ªåº”ç”¨
âœ… åŒä¸€å…¬å¸å¼€å‘
âœ… ç»Ÿä¸€æŠ€æœ¯æ ˆ
âœ… éœ€è¦ä»£ç å¤ç”¨
âœ… éœ€è¦ SSR/SEO
âœ… éœ€è¦å¤šè¯­è¨€æ”¯æŒ
âœ… éœ€è¦çŠ¶æ€ç®¡ç†

å®Œæ•´æŠ€æœ¯æ ˆ: â­â­â­â­â­
â”œâ”€â”€ åŒ…ç®¡ç†å™¨: pnpm
â”œâ”€â”€ æ¶æ„: Monorepo
â”œâ”€â”€ è·¯ç”±: App Router
â”œâ”€â”€ å›½é™…åŒ–: next-intl
â””â”€â”€ çŠ¶æ€ç®¡ç†: Zustand
```

---

### æ¨èé…ç½®

#### ç¬¬ä¸€æ¨èï¼špnpm + Monorepo

```bash
# 1. å®‰è£… pnpm
npm install -g pnpm

# 2. åˆ›å»º pnpm-workspace.yaml
cat > pnpm-workspace.yaml << EOF
packages:
  - 'apps/*'
  - 'packages/*'
EOF

# 3. å®‰è£…ä¾èµ–
pnpm install

# âœ… å®Œæˆï¼
```

**ä¼˜åŠ¿**:
- âš¡ æ€§èƒ½æå‡ 3-4 å€
- ğŸ’¾ èŠ‚çœç©ºé—´ 60-90%
- ğŸ”’ ä¾èµ–ç®¡ç†æ›´ä¸¥æ ¼
- ğŸš€ å­¦ä¹ æˆæœ¬ä½ï¼ˆ30 åˆ†é’Ÿï¼‰
- ğŸ’° æŠ•èµ„å›æŠ¥æé«˜

---

#### å¤‡é€‰æ–¹æ¡ˆï¼šnpm + Monorepo

```bash
# 1. åœ¨ package.json æ·»åŠ  workspaces
{
  "workspaces": ["apps/*", "packages/*"]
}

# 2. å®‰è£…ä¾èµ–
npm install

# âœ… å®Œæˆï¼
```

**ä¼˜åŠ¿**:
- âœ… é›¶å­¦ä¹ æˆæœ¬
- âœ… é›¶å®‰è£…æˆæœ¬
- âœ… æœ€ç¨³å®š
- âœ… å®Œå…¨å¤Ÿç”¨

---

## ğŸ“Š å†³ç­–æ€»ç»“

### 1. åŒ…ç®¡ç†å™¨å†³ç­–

```
ç¬¬ä¸€æ¨è: pnpm â­â­â­â­â­
ç†ç”±: æ€§èƒ½ã€ç©ºé—´ã€ä¸¥æ ¼æ€§

å¤‡é€‰æ–¹æ¡ˆ: npm â­â­â­â­
ç†ç”±: ç¨³å®šã€ç®€å•ã€å¤Ÿç”¨

ä¸æ¨è: yarn âŒ
ç†ç”±: å·²åœæ­¢ç»´æŠ¤
```

### 2. æ¶æ„å†³ç­–

```
æ¨è: Monorepo â­â­â­â­â­
ç†ç”±: 
- å®Œç¾é€‚é… Next.js
- ä¼˜ç§€çš„å¼€å‘ä½“éªŒ
- æœ€ä½³æ€§èƒ½
- ç»´æŠ¤æˆæœ¬ä½

ä¸æ¨è: å¾®å‰ç«¯ âŒ
ç†ç”±:
- æ— æ³•åˆ©ç”¨ Next.js æ ¸å¿ƒç‰¹æ€§
- æ€§èƒ½è¾ƒå·®
- å¤æ‚åº¦é«˜
- ä¸é€‚åˆä½ çš„åœºæ™¯
```

### 3. è·¯ç”±å†³ç­–

```
æ¨è: App Router â­â­â­â­â­
ç†ç”±:
- Server Components
- æ›´å¥½çš„æ€§èƒ½
- æ›´å¥½çš„ SEO
- å®˜æ–¹æ¨è

ä¸æ¨è: Pages Router âŒ
ç†ç”±:
- ä»…ç»´æŠ¤ï¼Œæ— æ–°ç‰¹æ€§
- æ€§èƒ½è¾ƒå·®
- ä¸æ”¯æŒ Server Components
```

### 4. å›½é™…åŒ–å†³ç­–

```
æ¨è: next-intl â­â­â­â­â­
ç†ç”±:
- å®Œç¾æ”¯æŒ App Router
- æ”¯æŒ Server Components
- é…ç½®ç®€å•
- ç±»å‹å®‰å…¨

ä¸æ¨è: next-i18next âŒ
ç†ç”±:
- ä¸æ”¯æŒ App Router
- ä¸æ”¯æŒ Server Components
- é…ç½®å¤æ‚
```

### 5. çŠ¶æ€ç®¡ç†å†³ç­–

```
æ¨è: Zustand â­â­â­â­â­
ç†ç”±:
- æç®€ API
- ä½“ç§¯æœ€å°ï¼ˆ1.2 KBï¼‰
- é›¶æ ·æ¿ä»£ç 
- å­¦ä¹ æˆæœ¬ä½

å¤‡é€‰: Redux Toolkit â­â­â­
ç†ç”±:
- è¶…å¤§å‹åº”ç”¨
- å›¢é˜Ÿå·²ç†Ÿæ‚‰
- éœ€è¦æ—¶é—´æ—…è¡Œè°ƒè¯•
```

---

## ğŸ“‹ å¿«é€Ÿå†³ç­–è¡¨

| æŠ€æœ¯ç±»åˆ« | ä½ çš„æƒ…å†µ | æ¨èæ–¹æ¡ˆ |
|---------|---------|---------|
| **åŒ…ç®¡ç†å™¨** | è¿½æ±‚æ€§èƒ½ + ç©ºé—´ | **pnpm** â­â­â­â­â­ |
| | è¿½æ±‚ç¨³å®š + ç®€å• | **npm** â­â­â­â­ |
| **æ¶æ„** | Next.js é¡¹ç›® | **Monorepo** â­â­â­â­â­ |
| | ç»Ÿä¸€æŠ€æœ¯æ ˆ | **Monorepo** â­â­â­â­â­ |
| **è·¯ç”±** | Next.js 13+ | **App Router** â­â­â­â­â­ |
| | é—ç•™é¡¹ç›® | **Pages Router** â­â­â­ |
| **å›½é™…åŒ–** | App Router é¡¹ç›® | **next-intl** â­â­â­â­â­ |
| | Pages Router é¡¹ç›® | **next-i18next** â­â­â­ |
| **çŠ¶æ€ç®¡ç†** | ä¸€èˆ¬åº”ç”¨ | **Zustand** â­â­â­â­â­ |
| | è¶…å¤§å‹åº”ç”¨ | **Redux Toolkit** â­â­â­ |

---

## âš ï¸ å¸¸è§è¯¯è§£

### è¯¯è§£ 1: "å¾®å‰ç«¯æ›´ç‹¬ç«‹"

```
âŒ é”™è¯¯: åªæœ‰å¾®å‰ç«¯èƒ½ç‹¬ç«‹éƒ¨ç½²
âœ… äº‹å®: Monorepo ä¹Ÿèƒ½ç‹¬ç«‹éƒ¨ç½²

Monorepo ç‹¬ç«‹éƒ¨ç½²:
apps/bridge/ â†’ bridge.biya.com (ç‹¬ç«‹)
apps/dex/ â†’ dex.biya.com (ç‹¬ç«‹)
apps/helix/ â†’ biya.com (ç‹¬ç«‹)

äº’ä¸å½±å“ï¼Œç‹¬ç«‹å›æ»š âœ…
```

### è¯¯è§£ 2: "Monorepo å¿…é¡»ä¸€èµ·éƒ¨ç½²"

```
âŒ é”™è¯¯: Monorepo = ä¸€èµ·éƒ¨ç½²
âœ… äº‹å®: Monorepo = ä»£ç åœ¨ä¸€èµ·ï¼Œéƒ¨ç½²ç‹¬ç«‹

ä¿®æ”¹ Bridge:
- åªé‡æ–°éƒ¨ç½² Bridge âœ…
- DEX å’Œ Helix ä¸å—å½±å“ âœ…
```

### è¯¯è§£ 3: "å¾®å‰ç«¯æ€§èƒ½æ›´å¥½"

```
âŒ é”™è¯¯: å¾®å‰ç«¯åŠ è½½æ›´å¿«
âœ… äº‹å®: Monorepo æ€§èƒ½æ›´å¥½

åŸå› :
- å¾®å‰ç«¯æœ‰é‡å¤ä»£ç ï¼ˆReact, æ¡†æ¶ï¼‰
- å¾®å‰ç«¯æœ‰è¿è¡Œæ—¶å¼€é”€
- Monorepo å……åˆ†ä¼˜åŒ–ï¼Œä»£ç å»é‡
```

---

## ğŸ“ å®æˆ˜æ¡ˆä¾‹

### Vercelï¼ˆNext.js å¼€å‘å•†ï¼‰

```
æ¶æ„: Monorepo âœ…

åŸå› :
- Next.js å›¢é˜Ÿä½¿ç”¨ Monorepo
- å……åˆ†åˆ©ç”¨ Next.js ç‰¹æ€§
- ä»£ç å…±äº«å’Œå¤ç”¨
- ç»Ÿä¸€çš„å¼€å‘ä½“éªŒ
```

### Airbnb

```
æ¶æ„: Monorepo âœ…

åŸå› :
- ç»Ÿä¸€æŠ€æœ¯æ ˆï¼ˆReactï¼‰
- å¤§é‡ä»£ç å¤ç”¨
- ç»Ÿä¸€çš„å¼€å‘ä½“éªŒ
- æ›´å®¹æ˜“ç»´æŠ¤
```

---

## ğŸ æŠ€æœ¯æ ˆæ¸…å•

### æœ€ç»ˆæŠ€æœ¯æ ˆ

```
å®Œæ•´æŠ€æœ¯æ ˆï¼ˆBiya Coin é¡¹ç›®ï¼‰:

ğŸ“¦ åŒ…ç®¡ç†å™¨
  â””â”€â”€ pnpm â­â­â­â­â­

ğŸ—ï¸ æ¶æ„æ¨¡å¼
  â””â”€â”€ Monorepo â­â­â­â­â­

ğŸš¦ Next.js è·¯ç”±
  â””â”€â”€ App Router â­â­â­â­â­

ğŸŒ å›½é™…åŒ–
  â””â”€â”€ next-intl â­â­â­â­â­

ğŸ—‚ï¸ çŠ¶æ€ç®¡ç†
  â””â”€â”€ Zustand â­â­â­â­â­

æ ¸å¿ƒæ¡†æ¶:
- Next.js 15
- React 19
- TypeScript 5
- Tailwind CSS 4

éƒ¨ç½²:
- Vercelï¼ˆæ¨èï¼‰
- Dockerï¼ˆå¤‡é€‰ï¼‰
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

æŠ€æœ¯æ ˆå·²ç¡®å®šï¼Œç»§ç»­é˜…è¯»ï¼š

**â†’ [02-æ¶æ„è®¾è®¡.md](./02-æ¶æ„è®¾è®¡.md)**

äº†è§£ Monorepo çš„æ¶æ„åŸç†å’Œè®¾è®¡æ¨¡å¼ã€‚

---

## ğŸ“š æœ¬ç« å°ç»“

### æ ¸å¿ƒå†³ç­–

1. **åŒ…ç®¡ç†å™¨**: pnpmï¼ˆå¿« 3-4 å€ï¼Œçœ 60-90% ç©ºé—´ï¼‰
2. **æ¶æ„**: Monorepoï¼ˆå®Œç¾é€‚é… Next.jsï¼Œç»´æŠ¤æˆæœ¬ä½ï¼‰
3. **è·¯ç”±**: App Routerï¼ˆServer Componentsï¼Œæ€§èƒ½æ›´å¥½ï¼‰
4. **å›½é™…åŒ–**: next-intlï¼ˆæ”¯æŒ App Routerï¼Œé…ç½®ç®€å•ï¼‰
5. **çŠ¶æ€ç®¡ç†**: Zustandï¼ˆä½“ç§¯æœ€å°ï¼ŒAPI æœ€ç®€ï¼‰

### ä¸ºä»€ä¹ˆè¿™æ ·é€‰ï¼Ÿ

```
âœ… æ‰€æœ‰é€‰æ‹©éƒ½æ˜¯ä¸ºäº†:
   - æ›´å¥½çš„æ€§èƒ½
   - æ›´å¥½çš„å¼€å‘ä½“éªŒ
   - æ›´ä½çš„ç»´æŠ¤æˆæœ¬
   - æ›´ç®€å•çš„å­¦ä¹ æ›²çº¿

âœ… æ‰€æœ‰é€‰æ‹©éƒ½ç»è¿‡:
   - å®é™…é¡¹ç›®éªŒè¯
   - æ€§èƒ½æµ‹è¯•å¯¹æ¯”
   - ç¤¾åŒºå¹¿æ³›ä½¿ç”¨
   - å®˜æ–¹æ¨èæ”¯æŒ
```

---

*æœ€åæ›´æ–°: 2025-10-31*

