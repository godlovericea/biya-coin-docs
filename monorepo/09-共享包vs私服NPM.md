# ğŸ“¦ å…±äº«åŒ… vs ç§æœ NPM å¯¹æ¯”åˆ†æ

> **æ ¸å¿ƒå†…å®¹**: Monorepo Workspace å…±äº«åŒ…ä¸ç§æœ NPM çš„å…¨é¢å¯¹æ¯”  
> **ç›®æ ‡**: å¸®åŠ©ä½ é€‰æ‹©æœ€é€‚åˆé¡¹ç›®çš„ä»£ç å…±äº«æ–¹æ¡ˆ  
> **æ›´æ–°æ—¶é—´**: 2025-10-31

---

## ğŸ“– ç›®å½•

1. [æ–¹æ¡ˆæ¦‚è¿°](#æ–¹æ¡ˆæ¦‚è¿°)
2. [æ ¸å¿ƒå¯¹æ¯”](#æ ¸å¿ƒå¯¹æ¯”)
3. [è¯¦ç»†åˆ†æ](#è¯¦ç»†åˆ†æ)
4. [é€‚ç”¨åœºæ™¯](#é€‚ç”¨åœºæ™¯)
5. [æ··åˆæ–¹æ¡ˆ](#æ··åˆæ–¹æ¡ˆ)
6. [å†³ç­–å»ºè®®](#å†³ç­–å»ºè®®)

---

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

### æ–¹æ¡ˆ 1ï¼šMonorepo Workspace å…±äº«åŒ…ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰

**å®šä¹‰**: åœ¨ Monorepo å†…éƒ¨é€šè¿‡ npm/pnpm workspaces æœºåˆ¶å…±äº«ä»£ç ã€‚

```
biya-coin/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ helix/
â”‚   â”‚   â””â”€â”€ package.json â†’ "@biya/shared": "*"
â”‚   â””â”€â”€ bridge/
â”‚       â””â”€â”€ package.json â†’ "@biya/shared": "*"
â””â”€â”€ packages/
    â””â”€â”€ shared/
        â”œâ”€â”€ package.json â†’ "name": "@biya/shared"
        â””â”€â”€ components/
```

**ç‰¹ç‚¹**:
- âœ… ä»£ç åœ¨åŒä¸€ä»“åº“
- âœ… å³æ—¶åŒæ­¥æ›´æ–°
- âœ… ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç†
- âœ… æ— éœ€å‘å¸ƒæµç¨‹

---

### æ–¹æ¡ˆ 2ï¼šç§æœ NPM

**å®šä¹‰**: å°†å…±äº«åŒ…å‘å¸ƒåˆ°ç§æœ‰ NPM Registryï¼Œå…¶ä»–é¡¹ç›®é€šè¿‡ npm install å®‰è£…ã€‚

```
ç§æœ NPM Registry (Verdaccio / npm private)
    â†“ npm publish
@biya/shared@1.2.3
    â†“ npm install
åº”ç”¨é¡¹ç›®ï¼ˆå¯ä»¥åœ¨åŒä¸€ Monorepoï¼Œä¹Ÿå¯ä»¥åœ¨ä¸åŒä»“åº“ï¼‰
```

**ç‰¹ç‚¹**:
- âœ… ç‰ˆæœ¬åŒ–ç®¡ç†
- âœ… å¯è·¨ä»“åº“å…±äº«
- âœ… å‘å¸ƒå®¡æ ¸æµç¨‹
- âš ï¸ éœ€è¦é¢å¤–åŸºç¡€è®¾æ–½

---

## âš–ï¸ æ ¸å¿ƒå¯¹æ¯”

### å¯¹æ¯”è¡¨æ ¼

| ç»´åº¦ | Workspace å…±äº«åŒ… | ç§æœ NPM | èµ¢å®¶ |
|------|-----------------|----------|------|
| **å¼€å‘ä½“éªŒ** | â­â­â­â­â­ | â­â­â­ | Workspace |
| **è®¾ç½®éš¾åº¦** | â­â­â­â­â­ ç®€å• | â­â­ å¤æ‚ | Workspace |
| **ç‰ˆæœ¬ç®¡ç†** | â­â­ æ— ç‰ˆæœ¬ | â­â­â­â­â­ ä¸¥æ ¼ | NPM |
| **è·¨ä»“åº“å…±äº«** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | NPM |
| **ä»£ç åŒæ­¥** | â­â­â­â­â­ å³æ—¶ | â­â­ éœ€å‘å¸ƒ | Workspace |
| **å›æ»šèƒ½åŠ›** | â­â­ Git | â­â­â­â­â­ ç‰ˆæœ¬ | NPM |
| **å›¢é˜Ÿåä½œ** | â­â­â­â­ ç®€å• | â­â­â­ æµç¨‹åŒ– | Workspace |
| **ç»´æŠ¤æˆæœ¬** | â­â­â­â­â­ ä½ | â­â­ é«˜ | Workspace |
| **éƒ¨ç½²çµæ´»æ€§** | â­â­â­ ä¸­ç­‰ | â­â­â­â­â­ é«˜ | NPM |
| **CI/CD å¤æ‚åº¦** | â­â­â­â­ ç®€å• | â­â­â­ ä¸­ç­‰ | Workspace |

---

## ğŸ” è¯¦ç»†åˆ†æ

### 1. å¼€å‘ä½“éªŒ

#### Workspace å…±äº«åŒ… â­â­â­â­â­

```typescript
// âœ… ä¿®æ”¹å…±äº«åŒ…ä»£ç 
// packages/shared/components/Button.tsx
export function Button() {
  return <button>Click me</button>  // æ”¹è¿™é‡Œ
}

// âœ… åº”ç”¨ç«‹å³çœ‹åˆ°å˜åŒ–ï¼ˆçƒ­é‡è½½ï¼‰
// apps/helix/app/page.tsx
import { Button } from '@biya/shared'  // è‡ªåŠ¨æ›´æ–°

// æ— éœ€ä»»ä½•é¢å¤–æ“ä½œï¼
```

**ä¼˜ç‚¹**:
- âœ… å³æ—¶åé¦ˆï¼šä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ
- âœ… è°ƒè¯•æ–¹ä¾¿ï¼šå¯ä»¥ç›´æ¥åœ¨å…±äº«åŒ…ä¸­æ‰“æ–­ç‚¹
- âœ… ä»£ç è·³è½¬ï¼šIDE å¯ä»¥æ— ç¼è·³è½¬åˆ°æºç 
- âœ… é‡æ„å‹å¥½ï¼šé‡å‘½åã€ç§»åŠ¨æ–‡ä»¶éƒ½å¾ˆå®¹æ˜“

---

#### ç§æœ NPM â­â­â­

```bash
# âŒ ä¿®æ”¹å…±äº«åŒ…éœ€è¦å¤šæ­¥æ“ä½œ

# 1. ä¿®æ”¹ä»£ç 
# packages/shared/components/Button.tsx

# 2. æ›´æ–°ç‰ˆæœ¬å·
# packages/shared/package.json
"version": "1.2.4"

# 3. æ„å»º
cd packages/shared
npm run build

# 4. å‘å¸ƒåˆ°ç§æœ
npm publish

# 5. æ›´æ–°ä¾èµ–
cd ../../apps/helix
npm install @biya/shared@1.2.4

# 6. é‡å¯åº”ç”¨
npm run dev

# æ‰èƒ½çœ‹åˆ°å˜åŒ–ï¼
```

**ç¼ºç‚¹**:
- âŒ åé¦ˆæ…¢ï¼šéœ€è¦å‘å¸ƒæ‰èƒ½æµ‹è¯•
- âŒ è°ƒè¯•å›°éš¾ï¼šæ–­ç‚¹æ‰“åœ¨ node_modules ä¸­
- âŒ ç‰ˆæœ¬ç®¡ç†å¼€é”€ï¼šæ¯æ¬¡æ”¹åŠ¨éƒ½è¦æ›´æ–°ç‰ˆæœ¬
- âŒ é‡æ„æˆæœ¬é«˜ï¼šè·¨åŒ…é‡æ„å¾ˆéº»çƒ¦

---

### 2. è®¾ç½®éš¾åº¦

#### Workspace å…±äº«åŒ… â­â­â­â­â­

```json
// æ ¹ package.json
{
  "workspaces": ["apps/*", "packages/*"]
}

// packages/shared/package.json
{
  "name": "@biya/shared",
  "version": "1.0.0"
}

// apps/helix/package.json
{
  "dependencies": {
    "@biya/shared": "*"
  }
}
```

```bash
# å®‰è£…ä¾èµ–
npm install

# å®Œæˆï¼æ— éœ€é¢å¤–é…ç½®
```

**è®¾ç½®æ—¶é—´**: 5 åˆ†é’Ÿ

---

#### ç§æœ NPM â­â­

éœ€è¦æ­å»ºå’Œç»´æŠ¤ç§æœåŸºç¡€è®¾æ–½ï¼š

**æ–¹æ¡ˆ Aï¼šVerdaccioï¼ˆè‡ªå»ºï¼‰**

```bash
# 1. å®‰è£… Verdaccio
npm install -g verdaccio

# 2. é…ç½® config.yaml
storage: ./storage
auth:
  htpasswd:
    file: ./htpasswd
uplinks:
  npmjs:
    url: https://registry.npmjs.org/

# 3. å¯åŠ¨æœåŠ¡
verdaccio

# 4. é…ç½® npm
npm set registry http://localhost:4873/
npm adduser --registry http://localhost:4873/

# 5. å‘å¸ƒåŒ…
npm publish --registry http://localhost:4873/

# 6. åœ¨åº”ç”¨ä¸­å®‰è£…
npm install @biya/shared --registry http://localhost:4873/
```

**æ–¹æ¡ˆ Bï¼šnpm private packagesï¼ˆä»˜è´¹ï¼‰**

```bash
# 1. å‡çº§åˆ° npm Pro/Teams/Enterprise
# è´¹ç”¨ï¼š$7/user/month èµ·

# 2. ç™»å½• npm
npm login

# 3. å‘å¸ƒåŒ…
npm publish --access restricted

# 4. åœ¨åº”ç”¨ä¸­å®‰è£…
npm install @biya/shared
```

**æ–¹æ¡ˆ Cï¼šGitHub Packages**

```yaml
# 1. é…ç½® .npmrc
//npm.pkg.github.com/:_authToken=${GITHUB_TOKEN}
@your-org:registry=https://npm.pkg.github.com

# 2. é…ç½® package.json
{
  "name": "@your-org/shared",
  "publishConfig": {
    "registry": "https://npm.pkg.github.com"
  }
}

# 3. å‘å¸ƒ
npm publish
```

**è®¾ç½®æ—¶é—´**: 1-2 å¤©ï¼ˆåŒ…æ‹¬å­¦ä¹ å’Œé…ç½®ï¼‰

---

### 3. ç‰ˆæœ¬ç®¡ç†

#### Workspace å…±äº«åŒ… â­â­

**ä¼˜ç‚¹**:
- âœ… å§‹ç»ˆä½¿ç”¨æœ€æ–°ä»£ç 
- âœ… ä¸éœ€è¦ç®¡ç†ç‰ˆæœ¬å·
- âœ… åŸå­æ€§æäº¤ï¼šè·¨åŒ…ä¿®æ”¹ä¸€æ¬¡æäº¤

**ç¼ºç‚¹**:
- âŒ æ— ç‰ˆæœ¬æ§åˆ¶ï¼šéš¾ä»¥å›æ»šåˆ°ç‰¹å®šç‰ˆæœ¬
- âŒ ç ´åæ€§å˜æ›´ï¼šå¯èƒ½å½±å“æ‰€æœ‰åº”ç”¨
- âŒ éš¾ä»¥è¿½è¸ªï¼šä¸çŸ¥é“å“ªä¸ªåº”ç”¨ç”¨äº†å“ªä¸ªç‰ˆæœ¬

```bash
# Git æä¾›ç‰ˆæœ¬æ§åˆ¶
git log packages/shared/  # æŸ¥çœ‹å†å²
git checkout abc123 packages/shared/  # å›æ»šï¼ˆå½±å“æ‰€æœ‰åº”ç”¨ï¼‰
```

---

#### ç§æœ NPM â­â­â­â­â­

**ä¼˜ç‚¹**:
- âœ… è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š1.2.3ï¼ˆä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.è¡¥ä¸ï¼‰
- âœ… ç‹¬ç«‹å‡çº§ï¼šæ¯ä¸ªåº”ç”¨é€‰æ‹©ç‰ˆæœ¬
- âœ… å®‰å…¨å›æ»šï¼šé™çº§åˆ°ä»»æ„ç‰ˆæœ¬
- âœ… å˜æ›´è¿½è¸ªï¼šCHANGELOG è®°å½•
- âœ… ç°åº¦å‘å¸ƒï¼šéƒ¨åˆ†åº”ç”¨å…ˆå‡çº§

```json
// apps/helix/package.json
{
  "dependencies": {
    "@biya/shared": "^1.2.0"  // å…è®¸ 1.2.x
  }
}

// apps/bridge/package.json
{
  "dependencies": {
    "@biya/shared": "1.1.5"  // å›ºå®šç‰ˆæœ¬ï¼Œæš‚ä¸å‡çº§
  }
}
```

**ç‰ˆæœ¬ç­–ç•¥**:
```
1.0.0 â†’ 1.0.1  // Patch: Bug ä¿®å¤ï¼ˆå‘åå…¼å®¹ï¼‰
1.0.1 â†’ 1.1.0  // Minor: æ–°åŠŸèƒ½ï¼ˆå‘åå…¼å®¹ï¼‰
1.1.0 â†’ 2.0.0  // Major: ç ´åæ€§å˜æ›´ï¼ˆä¸å…¼å®¹ï¼‰
```

---

### 4. è·¨ä»“åº“å…±äº«

#### Workspace å…±äº«åŒ… âŒ

åªèƒ½åœ¨åŒä¸€ Monorepo å†…å…±äº«ï¼š

```
biya-coin/              # Monorepo A
â”œâ”€â”€ apps/helix/         âœ… å¯ä»¥ä½¿ç”¨ @biya/shared
â””â”€â”€ packages/shared/    

other-project/          # ç‹¬ç«‹ä»“åº“ B
â””â”€â”€ app/                âŒ æ— æ³•ä½¿ç”¨ @biya/shared
```

**è§£å†³æ–¹æ¡ˆ**ï¼ˆéƒ½ä¸ç†æƒ³ï¼‰:
- å¤åˆ¶ä»£ç ï¼ˆç»´æŠ¤å™©æ¢¦ï¼‰
- Git Submoduleï¼ˆå¤æ‚ä¸”è„†å¼±ï¼‰
- è½¯é“¾æ¥ï¼ˆä¸å¯ç§»æ¤ï¼‰

---

#### ç§æœ NPM âœ…

å¯ä»¥è·¨ä»»æ„ä»“åº“å…±äº«ï¼š

```
ç§æœ NPM Registry
    â†“
@biya/shared@1.2.3
    â†“
â”œâ”€â†’ biya-coin/apps/helix/       âœ… å®‰è£…
â”œâ”€â†’ biya-coin/apps/bridge/      âœ… å®‰è£…
â”œâ”€â†’ other-project/              âœ… å®‰è£…
â”œâ”€â†’ mobile-app/                 âœ… å®‰è£…
â””â”€â†’ admin-dashboard/            âœ… å®‰è£…
```

**é€‚ç”¨åœºæ™¯**:
- å¤šä¸ªç‹¬ç«‹ä»“åº“éœ€è¦å…±äº«ä»£ç 
- è·¨å›¢é˜Ÿå…±äº«ç»„ä»¶åº“
- å¼€æºå†…éƒ¨ç»„ä»¶ï¼ˆå‘å¸ƒåˆ°å…¬å…± npmï¼‰

---

### 5. å›¢é˜Ÿåä½œ

#### Workspace å…±äº«åŒ… â­â­â­â­

```bash
# å¼€å‘è€… A ä¿®æ”¹å…±äº«åŒ…
git checkout -b feature/new-button
# ä¿®æ”¹ packages/shared/components/Button.tsx
git add .
git commit -m "feat(shared): add new button variant"
git push

# å¼€å‘è€… B æ‹‰å–æ›´æ–°
git pull
npm install  # å¦‚æœæœ‰æ–°ä¾èµ–
# ç«‹å³å¯ä»¥ä½¿ç”¨æ–°åŠŸèƒ½
```

**ä¼˜ç‚¹**:
- âœ… ç®€å•ç›´æ¥ï¼šå°±æ˜¯æ™®é€šçš„ Git å·¥ä½œæµ
- âœ… Code Reviewï¼šPR åŒ…å«æ‰€æœ‰å˜æ›´
- âœ… åŸå­æ€§ï¼šå…±äº«åŒ…å’Œåº”ç”¨ä¸€èµ·æäº¤

**æŒ‘æˆ˜**:
- âš ï¸ éœ€è¦è‰¯å¥½çš„æµ‹è¯•ï¼šé¿å…ç ´åå…¶ä»–åº”ç”¨
- âš ï¸ éœ€è¦æ²Ÿé€šï¼šå¤§æ”¹åŠ¨è¦æå‰é€šçŸ¥

---

#### ç§æœ NPM â­â­â­

```bash
# å¼€å‘è€… A å‘å¸ƒæ–°ç‰ˆæœ¬
cd packages/shared
npm version minor  # 1.2.0 â†’ 1.3.0
npm publish

# é€šçŸ¥å›¢é˜Ÿ
# "heyï¼Œ@biya/shared 1.3.0 å·²å‘å¸ƒï¼Œå¢åŠ äº†æ–°æŒ‰é’®ç»„ä»¶"

# å¼€å‘è€… B é€‰æ‹©æ˜¯å¦å‡çº§
npm install @biya/shared@1.3.0
# æˆ–è€…æš‚æ—¶ä¸å‡çº§
```

**ä¼˜ç‚¹**:
- âœ… æ˜¾å¼å‡çº§ï¼šé¿å…æ„å¤–ç ´å
- âœ… ç‹¬ç«‹èŠ‚å¥ï¼šæ¯ä¸ªå›¢é˜Ÿè‡ªå·±å†³å®šä½•æ—¶å‡çº§
- âœ… å‘å¸ƒå®¡æ ¸ï¼šå¯ä»¥åŠ å…¥ review æµç¨‹

**æŒ‘æˆ˜**:
- âš ï¸ ç‰ˆæœ¬ç¢ç‰‡åŒ–ï¼šä¸åŒåº”ç”¨ç”¨ä¸åŒç‰ˆæœ¬
- âš ï¸ å‡çº§æ»åï¼šå¯èƒ½é•¿æœŸä¸å‡çº§
- âš ï¸ æ²Ÿé€šæˆæœ¬ï¼šéœ€è¦é€šçŸ¥å’Œæ–‡æ¡£

---

### 6. ç»´æŠ¤æˆæœ¬

#### Workspace å…±äº«åŒ… â­â­â­â­â­

**åŸºç¡€è®¾æ–½**: æ— ï¼ˆä½¿ç”¨ npm/pnpm å†…ç½®åŠŸèƒ½ï¼‰

**æ—¥å¸¸ç»´æŠ¤**:
- ä¿®æ”¹ä»£ç  â†’ æäº¤ Git â†’ å®Œæˆ
- æ— éœ€ç®¡ç†ç‰ˆæœ¬å·
- æ— éœ€å‘å¸ƒæµç¨‹
- æ— éœ€ç»´æŠ¤æœåŠ¡å™¨

**æ€»æˆæœ¬**: æ¥è¿‘äºé›¶

---

#### ç§æœ NPM â­â­

**åŸºç¡€è®¾æ–½**:

| æ–¹æ¡ˆ | è®¾ç½®æˆæœ¬ | è¿ç»´æˆæœ¬ | èµ„é‡‘æˆæœ¬ |
|------|---------|---------|---------|
| **Verdaccioï¼ˆè‡ªå»ºï¼‰** | 1-2 å¤© | æ¯æœˆ 4-8 å°æ—¶ | æœåŠ¡å™¨è´¹ç”¨ $10-50/æœˆ |
| **npm private** | 1 å°æ—¶ | æ—  | $7/user/æœˆ èµ· |
| **GitHub Packages** | 2-4 å°æ—¶ | ä½ | åŒ…å«åœ¨ GitHub è®¢é˜…ä¸­ |

**æ—¥å¸¸ç»´æŠ¤**:
- ä¿®æ”¹ä»£ç 
- æ›´æ–°ç‰ˆæœ¬å·
- è¿è¡Œæµ‹è¯•
- å†™ CHANGELOG
- å‘å¸ƒåˆ°ç§æœ
- é€šçŸ¥å›¢é˜Ÿ
- å¤„ç†ç‰ˆæœ¬å†²çª

**æ€»æˆæœ¬**: ä¸­ç­‰åˆ°é«˜

---

### 7. CI/CD é›†æˆ

#### Workspace å…±äº«åŒ… â­â­â­â­

```yaml
# .github/workflows/deploy-helix.yml
name: Deploy Helix

on:
  push:
    paths:
      - 'apps/helix/**'
      - 'packages/shared/**'  # å…±äº«åŒ…å˜æ›´ä¹Ÿè§¦å‘

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install
        run: npm ci  # è‡ªåŠ¨å¤„ç† workspace
      - name: Build
        run: npm run build:helix
      - name: Deploy
        run: vercel --prod
```

**ä¼˜ç‚¹**:
- âœ… ç®€å•ï¼šæ ‡å‡†çš„ Monorepo CI/CD
- âœ… å¿«é€Ÿï¼šä¸€æ¬¡æ„å»ºåŒ…å«æ‰€æœ‰ä¾èµ–
- âœ… å¯é ï¼šä¾èµ–å§‹ç»ˆåŒæ­¥

---

#### ç§æœ NPM â­â­â­

```yaml
# 1. å‘å¸ƒå…±äº«åŒ…
name: Publish Shared

on:
  push:
    paths:
      - 'packages/shared/**'

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup
        run: npm ci
      - name: Build
        run: npm run build --workspace=packages/shared
      - name: Publish
        run: npm publish --workspace=packages/shared
        env:
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}

# 2. éƒ¨ç½²åº”ç”¨ï¼ˆéœ€è¦ç­‰å¾…å‘å¸ƒå®Œæˆï¼‰
name: Deploy Helix

on:
  push:
    paths:
      - 'apps/helix/**'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install
        run: npm ci  # ä»ç§æœæ‹‰å– @biya/shared
      - name: Build
        run: npm run build:helix
      - name: Deploy
        run: vercel --prod
```

**æŒ‘æˆ˜**:
- âš ï¸ ä¸¤é˜¶æ®µï¼šå…ˆå‘å¸ƒå…±äº«åŒ…ï¼Œå†éƒ¨ç½²åº”ç”¨
- âš ï¸ æ—¶åºé—®é¢˜ï¼šåº”ç”¨å¯èƒ½ç”¨åˆ°æ—§ç‰ˆæœ¬
- âš ï¸ ç¼“å­˜é—®é¢˜ï¼šCDN ç¼“å­˜å¯¼è‡´å»¶è¿Ÿ

---

## ğŸ¯ é€‚ç”¨åœºæ™¯

### Workspace å…±äº«åŒ…æœ€é€‚åˆ

âœ… **å•ä¸ª Monorepo å†…å…±äº«**
- æ‰€æœ‰åº”ç”¨åœ¨åŒä¸€ä¸ªä»“åº“
- ä¾‹å¦‚ï¼šBridgeã€DEXã€Helix éƒ½åœ¨ biya-coin ä»“åº“

âœ… **å¿«é€Ÿè¿­ä»£**
- éœ€è¦é¢‘ç¹ä¿®æ”¹å…±äº«ä»£ç 
- éœ€è¦å³æ—¶åé¦ˆ

âœ… **å°å›¢é˜Ÿ**
- 2-10 äººå›¢é˜Ÿ
- æ²Ÿé€šæˆæœ¬ä½

âœ… **ç»Ÿä¸€æŠ€æœ¯æ ˆ**
- æ‰€æœ‰åº”ç”¨ä½¿ç”¨ç›¸åŒçš„æ¡†æ¶
- ä¾‹å¦‚ï¼šå…¨éƒ¨ä½¿ç”¨ Next.js + React

âœ… **èµ„æºæœ‰é™**
- æ— é¢„ç®—æ­å»ºç§æœ
- æ— è¿ç»´äººåŠ›

---

### ç§æœ NPM æœ€é€‚åˆ

âœ… **è·¨ä»“åº“å…±äº«**
- å¤šä¸ªç‹¬ç«‹ä»“åº“éœ€è¦å…±äº«ä»£ç 
- ä¾‹å¦‚ï¼šä¸»ç«™ + ç§»åŠ¨ç«¯ + ç®¡ç†åå°åœ¨ä¸åŒä»“åº“

âœ… **è·¨å›¢é˜Ÿåä½œ**
- 10+ äººå›¢é˜Ÿ
- å¤šä¸ªå›¢é˜Ÿç‹¬ç«‹å¼€å‘

âœ… **ä¸¥æ ¼ç‰ˆæœ¬æ§åˆ¶**
- éœ€è¦æ˜ç¡®çš„ç‰ˆæœ¬ç®¡ç†
- éœ€è¦å®¡æ‰¹å‘å¸ƒæµç¨‹

âœ… **ä¸åŒæŠ€æœ¯æ ˆ**
- æœ‰ React åº”ç”¨ï¼Œä¹Ÿæœ‰ Vue åº”ç”¨
- éœ€è¦å…±äº«çº¯ JS/TS å·¥å…·åº“

âœ… **ä¼ä¸šçº§åœºæ™¯**
- åˆè§„è¦æ±‚
- å®¡è®¡è¿½è¸ª
- ç°åº¦å‘å¸ƒ

---

## ğŸ”€ æ··åˆæ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šMonorepo + é€‰æ‹©æ€§å‘å¸ƒ

```
biya-coin/                    # Monorepo
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ helix/                â†’ ä½¿ç”¨ @biya/shared (workspace)
â”‚   â””â”€â”€ bridge/               â†’ ä½¿ç”¨ @biya/shared (workspace)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/               â†’ å†…éƒ¨ä½¿ç”¨ï¼ˆä¸å‘å¸ƒï¼‰
â”‚   â””â”€â”€ design-system/        â†’ å‘å¸ƒåˆ°ç§æœ NPM
â”‚       â””â”€â”€ package.json
â”‚           "name": "@biya/design-system"
â”‚           "publishConfig": {
â”‚             "registry": "https://npm.pkg.github.com"
â”‚           }

external-project/             # ç‹¬ç«‹ä»“åº“
â””â”€â”€ app/                      â†’ npm install @biya/design-system
```

**é€‚ç”¨åœºæ™¯**:
- å†…éƒ¨åº”ç”¨ç”¨ workspace å…±äº«
- è®¾è®¡ç³»ç»Ÿå‘å¸ƒç»™å¤–éƒ¨é¡¹ç›®ä½¿ç”¨

---

### æ–¹æ¡ˆ Bï¼šMonorepo ä¸»ä»“åº“ + é•œåƒå‘å¸ƒ

```bash
# 1. åœ¨ Monorepo å†…å¼€å‘ï¼ˆworkspaceï¼‰
cd biya-coin/packages/shared
# å¿«é€Ÿè¿­ä»£...

# 2. å‘å¸ƒç¨³å®šç‰ˆæœ¬åˆ°ç§æœï¼ˆæ‰‹åŠ¨æˆ– CIï¼‰
npm version minor
npm run build
npm publish --registry https://npm.pkg.github.com

# 3. å¤–éƒ¨é¡¹ç›®ä½¿ç”¨å‘å¸ƒçš„ç‰ˆæœ¬
cd other-project
npm install @biya/shared@1.5.0
```

**ä¼˜ç‚¹**:
- âœ… å†…éƒ¨å¼€å‘å¿«é€Ÿï¼ˆworkspaceï¼‰
- âœ… å¤–éƒ¨ä½¿ç”¨ç¨³å®šï¼ˆnpmï¼‰
- âœ… æœ€ä½³å®è·µï¼šå¼€å‘å’Œåˆ†å‘åˆ†ç¦»

---

## ğŸ’¡ å†³ç­–å»ºè®®

### å¯¹äº biya-coin é¡¹ç›®

#### å½“å‰çŠ¶æ€åˆ†æ

âœ… **ä½¿ç”¨ Workspace å…±äº«åŒ…**ï¼ˆå¼ºçƒˆæ¨èï¼‰

**ç†ç”±**:
1. âœ… **å•ä»“åº“**: æ‰€æœ‰åº”ç”¨ï¼ˆhelixã€bridgeã€dexï¼‰åœ¨åŒä¸€ä¸ª Monorepo
2. âœ… **å¿«é€Ÿè¿­ä»£**: Bridge åŠŸèƒ½è¿˜åœ¨å¼€å‘ï¼Œéœ€è¦é¢‘ç¹ä¿®æ”¹
3. âœ… **å°å›¢é˜Ÿ**: é¢„è®¡å›¢é˜Ÿè§„æ¨¡ä¸å¤§
4. âœ… **ç»Ÿä¸€æŠ€æœ¯æ ˆ**: å…¨éƒ¨ Next.js + React
5. âœ… **æˆæœ¬è€ƒè™‘**: æ— éœ€é¢å¤–åŸºç¡€è®¾æ–½
6. âœ… **å¼€å‘ä½“éªŒ**: æœ€ä½³çš„ DX

**ä¸æ¨èç§æœ NPM**ï¼Œé™¤éï¼š
- âŒ éœ€è¦è·¨ä»“åº“å…±äº«ï¼ˆç›®å‰ä¸éœ€è¦ï¼‰
- âŒ æœ‰å¤šä¸ªç‹¬ç«‹å›¢é˜Ÿï¼ˆç›®å‰æ²¡æœ‰ï¼‰
- âŒ éœ€è¦ä¸¥æ ¼ç‰ˆæœ¬æ§åˆ¶ï¼ˆGit å·²è¶³å¤Ÿï¼‰

---

### å†³ç­–æ ‘

```
ä½ çš„é¡¹ç›®æ˜¯å•ä¸ª Monorepo å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ æ‰€æœ‰åº”ç”¨éƒ½åœ¨è¿™ä¸ª Monorepo å—ï¼Ÿ
â”‚   â”œâ”€ æ˜¯ â†’ âœ… ä½¿ç”¨ Workspace å…±äº«åŒ…
â”‚   â””â”€ å¦ â†’ éœ€è¦è·¨ä»“åº“å…±äº«å—ï¼Ÿ
â”‚       â”œâ”€ æ˜¯ â†’ âš ï¸ è€ƒè™‘ç§æœ NPM
â”‚       â””â”€ å¦ â†’ âœ… ä½¿ç”¨ Workspace å…±äº«åŒ…
â”‚
â””â”€ å¦ â†’ ä½ æœ‰å¤šä¸ªç‹¬ç«‹ä»“åº“å—ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ éœ€è¦å…±äº«ä»£ç å—ï¼Ÿ
    â”‚   â”œâ”€ æ˜¯ â†’ âœ… ä½¿ç”¨ç§æœ NPM
    â”‚   â””â”€ å¦ â†’ å„è‡ªç‹¬ç«‹å¼€å‘
    â””â”€ å¦ â†’ è€ƒè™‘å…ˆå»ºç«‹ Monorepo
```

---

### æœªæ¥è€ƒè™‘

å¦‚æœä»¥åé‡åˆ°ä»¥ä¸‹æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘è¿ç§»åˆ°ç§æœ NPMï¼š

1. **éœ€è¦å¼€æºç»„ä»¶åº“**
   - å‘å¸ƒåˆ°å…¬å…± npm
   - ç¤ºä¾‹ï¼š`@biya/ui-components`

2. **æ–°å¢ç‹¬ç«‹ä»“åº“**
   - ç§»åŠ¨ç«¯ Appï¼ˆç‹¬ç«‹ä»“åº“ï¼‰
   - ç®¡ç†åå°ï¼ˆç‹¬ç«‹ä»“åº“ï¼‰
   - éœ€è¦ä½¿ç”¨ç›¸åŒçš„ UI ç»„ä»¶

3. **å›¢é˜Ÿæ‰©å¤§**
   - è¶…è¿‡ 10 äºº
   - å¤šä¸ªç‹¬ç«‹å›¢é˜Ÿ

4. **ä¼ä¸šè¦æ±‚**
   - åˆè§„å®¡è®¡
   - ä¸¥æ ¼çš„å‘å¸ƒæµç¨‹

**è¿ç§»æˆæœ¬**: ä¸­ç­‰
- è®¾ç½®ç§æœï¼š1-2 å¤©
- è¿ç§»ä»£ç ï¼š1-2 å¤©
- æ›´æ–° CI/CDï¼š1 å¤©

---

## ğŸ“‹ å¯¹æ¯”æ€»ç»“

### å¿«é€Ÿå¯¹æ¯”

| åœºæ™¯ | Workspace å…±äº«åŒ… | ç§æœ NPM |
|------|-----------------|----------|
| **å• Monorepo** | âœ…âœ…âœ… æœ€ä½³é€‰æ‹© | âš ï¸ è¿‡åº¦è®¾è®¡ |
| **è·¨ä»“åº“å…±äº«** | âŒ ä¸æ”¯æŒ | âœ…âœ…âœ… æœ€ä½³é€‰æ‹© |
| **å°å›¢é˜Ÿï¼ˆ<10äººï¼‰** | âœ…âœ…âœ… æ¨è | âš ï¸ å¯é€‰ |
| **å¤§å›¢é˜Ÿï¼ˆ>10äººï¼‰** | âœ… å¯ç”¨ | âœ…âœ…âœ… æ¨è |
| **å¿«é€Ÿè¿­ä»£** | âœ…âœ…âœ… å®Œç¾ | âš ï¸ æµç¨‹é‡ |
| **ç¨³å®šç‰ˆæœ¬** | âš ï¸ éœ€è¦çºªå¾‹ | âœ…âœ…âœ… å†…ç½® |
| **å¼€å‘ä½“éªŒ** | âœ…âœ…âœ… ä¼˜ç§€ | âš ï¸ ä¸€èˆ¬ |
| **ç»´æŠ¤æˆæœ¬** | âœ…âœ…âœ… ä½ | âš ï¸ ä¸­é«˜ |

---

### æ ¸å¿ƒå»ºè®®

**å¯¹äº biya-coin é¡¹ç›®**: âœ… **ç»§ç»­ä½¿ç”¨ Workspace å…±äº«åŒ…**

**å¯¹äºä¼ä¸šçº§åœºæ™¯**: âœ… **è€ƒè™‘ç§æœ NPM**

**å¯¹äºå¼€æºé¡¹ç›®**: âœ… **å‘å¸ƒåˆ°å…¬å…± npm**

---

## ğŸš€ ä¸‹ä¸€æ­¥

### å¦‚æœé€‰æ‹© Workspaceï¼ˆæ¨èï¼‰

ç»§ç»­é˜…è¯»ï¼š
- **[04-å…±äº«åŒ…è®¾è®¡.md](./04-å…±äº«åŒ…è®¾è®¡.md)** - äº†è§£å¦‚ä½•è®¾è®¡å…±äº«åŒ…
- **[06-å®æ–½æ­¥éª¤.md](./06-å®æ–½æ­¥éª¤.md)** - å¼€å§‹å®æ–½ Monorepo

### å¦‚æœé€‰æ‹©ç§æœ NPM

éœ€è¦é¢å¤–é˜…è¯»ï¼š
- [Verdaccio å®˜æ–¹æ–‡æ¡£](https://verdaccio.org/)
- [npm private packages](https://docs.npmjs.com/about-private-packages)
- [GitHub Packages](https://docs.github.com/en/packages)

---

## ğŸ“š å‚è€ƒèµ„æº

### Workspace æ–¹æ¡ˆ
- [npm workspaces](https://docs.npmjs.com/cli/v8/using-npm/workspaces)
- [pnpm workspace](https://pnpm.io/workspaces)
- [yarn workspaces](https://classic.yarnpkg.com/en/docs/workspaces/)

### ç§æœ NPM
- [Verdaccio](https://verdaccio.org/)
- [npm Enterprise](https://www.npmjs.com/products/enterprise)
- [Nexus Repository](https://www.sonatype.com/products/nexus-repository)
- [JFrog Artifactory](https://jfrog.com/artifactory/)

---

*æœ€åæ›´æ–°: 2025-10-31*

