# ğŸ“¦ å…±äº«åŒ…è®¾è®¡

> **æ ¸å¿ƒå†…å®¹**: sharedã€themeã€i18nã€walletã€auth åŒ…çš„è®¾è®¡ä¸å®ç°  
> **ç›®æ ‡**: åˆ›å»ºå¯å¤ç”¨çš„é«˜è´¨é‡å…±äº«åŒ…  
> **æ–¹æ¡ˆ**: Workspace å…±äº«åŒ…ï¼ˆMonorepo å†…éƒ¨å…±äº«ï¼‰  
> **æ›´æ–°æ—¶é—´**: 2025-10-31

---

## ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹© Workspace å…±äº«åŒ…ï¼Ÿ

### æœ¬æ–‡æ¡£é‡‡ç”¨çš„æ–¹æ¡ˆ

æœ¬æ–‡æ¡£ä»‹ç»çš„æ˜¯ **Workspace å…±äº«åŒ…**ï¼ˆä¹Ÿç§°ä¸º Monorepo å†…éƒ¨å…±äº«åŒ…ï¼‰æ–¹æ¡ˆã€‚

```
biya-coin/                    # Monorepo
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ helix/                â†’ ä½¿ç”¨ @biya/shared
â”‚   â””â”€â”€ bridge/               â†’ ä½¿ç”¨ @biya/shared
â””â”€â”€ packages/
    â””â”€â”€ shared/               â† Workspace å…±äº«åŒ…
```

**ç‰¹ç‚¹**:
- âœ… ä»£ç åœ¨åŒä¸€ä»“åº“
- âœ… ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼ˆçƒ­é‡è½½ï¼‰
- âœ… æ— éœ€å‘å¸ƒæµç¨‹
- âœ… é›¶é…ç½®æˆæœ¬

---

### ä¸ç§æœ NPM çš„å¯¹æ¯”

| ç‰¹æ€§ | Workspace å…±äº«åŒ… | ç§æœ NPM |
|------|-----------------|----------|
| **å¼€å‘ä½“éªŒ** | â­â­â­â­â­ å³æ—¶åé¦ˆ | â­â­â­ éœ€è¦å‘å¸ƒ |
| **è®¾ç½®éš¾åº¦** | â­â­â­â­â­ 5åˆ†é’Ÿ | â­â­ 1-2å¤© |
| **ç»´æŠ¤æˆæœ¬** | â­â­â­â­â­ é›¶æˆæœ¬ | â­â­ éœ€è¦è¿ç»´ |
| **è·¨ä»“åº“å…±äº«** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| **ç‰ˆæœ¬ç®¡ç†** | â­â­ Git ç®¡ç† | â­â­â­â­â­ ä¸¥æ ¼ç‰ˆæœ¬ |

**æ¨èä½¿ç”¨ Workspace å…±äº«åŒ…**ï¼Œå› ä¸º biya-coin é¡¹ç›®ï¼š
- âœ… æ‰€æœ‰åº”ç”¨åœ¨åŒä¸€ä¸ª Monorepo
- âœ… éœ€è¦å¿«é€Ÿè¿­ä»£
- âœ… å›¢é˜Ÿè§„æ¨¡å°
- âœ… æ— éœ€è·¨ä»“åº“å…±äº«

**å¦‚æœä½ éœ€è¦è·¨ä»“åº“å…±äº«æˆ–ä¸¥æ ¼ç‰ˆæœ¬æ§åˆ¶**ï¼Œè¯·æŸ¥çœ‹ï¼š
- **[09-å…±äº«åŒ…vsç§æœNPM.md](./09-å…±äº«åŒ…vsç§æœNPM.md)** - è¯¦ç»†å¯¹æ¯”åˆ†æ

---

## ğŸ“– ç›®å½•

1. [ä¸ºä»€ä¹ˆé€‰æ‹© Workspace å…±äº«åŒ…ï¼Ÿ](#ä¸ºä»€ä¹ˆé€‰æ‹©-workspace-å…±äº«åŒ…)
2. [@biya/shared - åŸºç¡€å…±äº«åŒ…](#biyashared---åŸºç¡€å…±äº«åŒ…)
3. [@biya/theme - ä¸»é¢˜ç®¡ç†åŒ…](#biyatheme---ä¸»é¢˜ç®¡ç†åŒ…)
4. [@biya/i18n - å›½é™…åŒ–åŒ…](#biyai18n---å›½é™…åŒ–åŒ…)
5. [@biya/wallet - é’±åŒ…ç®¡ç†åŒ…](#biyawallet---é’±åŒ…ç®¡ç†åŒ…)
6. [@biya/auth - è®¤è¯ç®¡ç†åŒ…](#biyaauth---è®¤è¯ç®¡ç†åŒ…)

---

## ğŸ¨ @biya/shared - åŸºç¡€å…±äº«åŒ…

### åŒ…ç»“æ„

```
packages/shared/
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ tsconfig.json
â”œâ”€â”€ ğŸ“„ index.ts                    # ç»Ÿä¸€å¯¼å‡º
â”‚
â”œâ”€â”€ ğŸ“ components/                 # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ index.ts
â”‚   â”œâ”€â”€ ğŸ“ ui/                     # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Button.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Input.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Card.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Dropdown.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Toast.tsx
â”‚   â”‚   â””â”€â”€ ğŸ“„ Loading.tsx
â”‚   â””â”€â”€ ğŸ“ layout/                 # å¸ƒå±€ç»„ä»¶
â”‚       â”œâ”€â”€ ğŸ“„ Header.tsx
â”‚       â”œâ”€â”€ ğŸ“„ Footer.tsx
â”‚       â”œâ”€â”€ ğŸ“„ Sidebar.tsx
â”‚       â””â”€â”€ ğŸ“„ Container.tsx
â”‚
â”œâ”€â”€ ğŸ“ hooks/                      # å…±äº« Hooks
â”‚   â”œâ”€â”€ ğŸ“„ index.ts
â”‚   â”œâ”€â”€ ğŸ“„ useDebounce.ts
â”‚   â”œâ”€â”€ ğŸ“„ useMediaQuery.ts
â”‚   â”œâ”€â”€ ğŸ“„ useLocalStorage.ts
â”‚   â”œâ”€â”€ ğŸ“„ useClickOutside.ts
â”‚   â””â”€â”€ ğŸ“„ useKeyPress.ts
â”‚
â”œâ”€â”€ ğŸ“ utils/                      # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ index.ts
â”‚   â”œâ”€â”€ ğŸ“„ format.ts               # æ ¼å¼åŒ–å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ validation.ts           # éªŒè¯å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ cn.ts                   # className åˆå¹¶
â”‚   â”œâ”€â”€ ğŸ“„ date.ts                 # æ—¥æœŸå¤„ç†
â”‚   â””â”€â”€ ğŸ“„ number.ts               # æ•°å­—å¤„ç†
â”‚
â””â”€â”€ ğŸ“ types/                      # å…±äº«ç±»å‹
    â”œâ”€â”€ ğŸ“„ index.ts
    â””â”€â”€ ğŸ“„ common.ts
```

---

### æ ¸å¿ƒå®ç°

#### 1. Button ç»„ä»¶

```typescript
// components/ui/Button.tsx
import { forwardRef } from 'react'
import { cn } from '../../utils/cn'

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'primary' | 'secondary' | 'outline' | 'ghost' | 'destructive'
  size?: 'sm' | 'md' | 'lg'
  isLoading?: boolean
}

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = 'default', size = 'md', isLoading, children, disabled, ...props }, ref) => {
    return (
      <button
        ref={ref}
        className={cn(
          // åŸºç¡€æ ·å¼
          'inline-flex items-center justify-center rounded-lg font-medium transition-colors',
          'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',
          'disabled:pointer-events-none disabled:opacity-50',
          
          // å°ºå¯¸
          {
            'h-8 px-3 text-sm': size === 'sm',
            'h-10 px-4 text-base': size === 'md',
            'h-12 px-6 text-lg': size === 'lg',
          },
          
          // å˜ä½“
          {
            'bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900': 
              variant === 'default',
            'bg-blue-600 text-white hover:bg-blue-700': 
              variant === 'primary',
            'bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-800 dark:text-gray-50': 
              variant === 'secondary',
            'border border-gray-300 bg-transparent hover:bg-gray-100 dark:border-gray-700': 
              variant === 'outline',
            'hover:bg-gray-100 dark:hover:bg-gray-800': 
              variant === 'ghost',
            'bg-red-600 text-white hover:bg-red-700': 
              variant === 'destructive',
          },
          
          className
        )}
        disabled={disabled || isLoading}
        {...props}
      >
        {isLoading && (
          <svg className="mr-2 h-4 w-4 animate-spin" viewBox="0 0 24 24">
            <circle
              className="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              strokeWidth="4"
              fill="none"
            />
            <path
              className="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            />
          </svg>
        )}
        {children}
      </button>
    )
  }
)

Button.displayName = 'Button'

export { Button }
```

---

#### 2. useDebounce Hook

```typescript
// hooks/useDebounce.ts
import { useEffect, useState } from 'react'

export function useDebounce<T>(value: T, delay: number = 500): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)

    return () => {
      clearTimeout(timer)
    }
  }, [value, delay])

  return debouncedValue
}
```

---

#### 3. cn å·¥å…·å‡½æ•°

```typescript
// utils/cn.ts
import { type ClassValue, clsx } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

---

#### 4. æ ¼å¼åŒ–å·¥å…·

```typescript
// utils/format.ts

// æ ¼å¼åŒ–æ•°å­—
export function formatNumber(
  value: number | string,
  options?: Intl.NumberFormatOptions
): string {
  const num = typeof value === 'string' ? parseFloat(value) : value
  return new Intl.NumberFormat('en-US', options).format(num)
}

// æ ¼å¼åŒ–è´§å¸
export function formatCurrency(
  value: number | string,
  currency: string = 'USD'
): string {
  return formatNumber(value, {
    style: 'currency',
    currency,
  })
}

// æ ¼å¼åŒ–ç™¾åˆ†æ¯”
export function formatPercent(value: number | string): string {
  const num = typeof value === 'string' ? parseFloat(value) : value
  return formatNumber(num, {
    style: 'percent',
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
  })
}

// ç¼©å†™å¤§æ•°å­—
export function formatCompactNumber(value: number): string {
  return formatNumber(value, {
    notation: 'compact',
    compactDisplay: 'short',
  })
}
```

---

#### 5. ç»Ÿä¸€å¯¼å‡º

```typescript
// index.ts
// ç»„ä»¶
export * from './components/ui/Button'
export * from './components/ui/Input'
export * from './components/ui/Card'
export * from './components/layout/Header'

// Hooks
export * from './hooks/useDebounce'
export * from './hooks/useMediaQuery'
export * from './hooks/useLocalStorage'

// å·¥å…·å‡½æ•°
export * from './utils/cn'
export * from './utils/format'
export * from './utils/validation'

// ç±»å‹
export * from './types/common'
```

---

## ğŸ¨ @biya/theme - ä¸»é¢˜ç®¡ç†åŒ…

### åŒ…ç»“æ„

```
packages/theme/
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ tsconfig.json
â”œâ”€â”€ ğŸ“„ index.ts
â”‚
â”œâ”€â”€ ğŸ“ store/                      # Zustand Store
â”‚   â”œâ”€â”€ ğŸ“„ theme-store.ts
â”‚   â””â”€â”€ ğŸ“„ theme-persist.ts
â”‚
â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”œâ”€â”€ ğŸ“„ useTheme.ts
â”‚   â””â”€â”€ ğŸ“„ useSystemTheme.ts
â”‚
â”œâ”€â”€ ğŸ“ components/
â”‚   â”œâ”€â”€ ğŸ“„ ThemeProvider.tsx
â”‚   â”œâ”€â”€ ğŸ“„ ThemeToggle.tsx
â”‚   â””â”€â”€ ğŸ“„ ThemeScript.tsx
â”‚
â”œâ”€â”€ ğŸ“ config/
â”‚   â”œâ”€â”€ ğŸ“„ themes.ts
â”‚   â””â”€â”€ ğŸ“„ colors.ts
â”‚
â””â”€â”€ ğŸ“ types/
    â””â”€â”€ ğŸ“„ theme.ts
```

---

### æ ¸å¿ƒå®ç°

#### 1. Theme Store

```typescript
// store/theme-store.ts
import { create } from 'zustand'
import { persist, createJSONStorage } from 'zustand/middleware'

export type Theme = 'light' | 'dark' | 'system'

interface ThemeState {
  theme: Theme
  isDark: boolean
  setTheme: (theme: Theme) => void
  toggleTheme: () => void
}

export const useThemeStore = create<ThemeState>()(
  persist(
    (set, get) => ({
      theme: 'system',
      isDark: false,
      
      setTheme: (theme) => {
        set({ theme })
        
        // æ›´æ–° DOM
        const root = document.documentElement
        const isDark = theme === 'dark' || 
          (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)
        
        if (isDark) {
          root.classList.add('dark')
        } else {
          root.classList.remove('dark')
        }
        
        set({ isDark })
      },
      
      toggleTheme: () => {
        const current = get().theme
        const newTheme = current === 'dark' ? 'light' : 'dark'
        get().setTheme(newTheme)
      },
    }),
    {
      name: 'biya-theme-storage',
      storage: createJSONStorage(() => localStorage),
      partialize: (state) => ({ theme: state.theme }),
    }
  )
)
```

---

#### 2. ThemeProvider

```typescript
// components/ThemeProvider.tsx
'use client'

import { useEffect } from 'react'
import { useThemeStore } from '../store/theme-store'

export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const { theme, setTheme } = useThemeStore()

  useEffect(() => {
    // åˆå§‹åŒ–ä¸»é¢˜
    setTheme(theme)
    
    // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
    if (theme === 'system') {
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')
      const handleChange = () => setTheme('system')
      
      mediaQuery.addEventListener('change', handleChange)
      return () => mediaQuery.removeEventListener('change', handleChange)
    }
  }, [theme, setTheme])

  return <>{children}</>
}
```

---

#### 3. ThemeToggle ç»„ä»¶

```typescript
// components/ThemeToggle.tsx
'use client'

import { Moon, Sun } from 'lucide-react'
import { useThemeStore } from '../store/theme-store'

export function ThemeToggle() {
  const { theme, isDark, toggleTheme } = useThemeStore()

  return (
    <button
      onClick={toggleTheme}
      className="rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
      aria-label="Toggle theme"
    >
      {isDark ? (
        <Sun className="h-5 w-5 text-gray-600 dark:text-gray-400" />
      ) : (
        <Moon className="h-5 w-5 text-gray-600 dark:text-gray-400" />
      )}
    </button>
  )
}
```

---

#### 4. ThemeScriptï¼ˆé˜²é—ªçƒï¼‰

```typescript
// components/ThemeScript.tsx
export function ThemeScript() {
  const themeScript = `
    (function() {
      const theme = localStorage.getItem('biya-theme-storage')
      if (theme) {
        const { state } = JSON.parse(theme)
        const isDark = state.theme === 'dark' || 
          (state.theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)
        
        if (isDark) {
          document.documentElement.classList.add('dark')
        }
      }
    })()
  `

  return (
    <script
      dangerouslySetInnerHTML={{ __html: themeScript }}
      suppressHydrationWarning
    />
  )
}
```

**ä½¿ç”¨æ–¹å¼**:
```typescript
// app/layout.tsx
import { ThemeScript } from '@biya/theme'

export default function RootLayout({ children }) {
  return (
    <html suppressHydrationWarning>
      <head>
        <ThemeScript />
      </head>
      <body>{children}</body>
    </html>
  )
}
```

---

## ğŸŒ @biya/i18n - å›½é™…åŒ–åŒ…

### åŒ…ç»“æ„

```
packages/i18n/
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ index.ts
â”‚
â”œâ”€â”€ ğŸ“ locales/                    # ç¿»è¯‘æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ common/                 # é€šç”¨ç¿»è¯‘
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ en.json
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ zh.json
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ja.json
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ko.json
â”‚   â”‚   â””â”€â”€ ğŸ“„ es.json
â”‚   â””â”€â”€ ğŸ“ domain/                 # é¢†åŸŸç¿»è¯‘
â”‚       â”œâ”€â”€ ğŸ“ wallet/
â”‚       â”œâ”€â”€ ğŸ“ trading/
â”‚       â””â”€â”€ ğŸ“ bridge/
â”‚
â”œâ”€â”€ ğŸ“ hooks/
â”‚   â””â”€â”€ ğŸ“„ useTranslation.ts
â”‚
â”œâ”€â”€ ğŸ“ utils/
â”‚   â”œâ”€â”€ ğŸ“„ merge.ts                # ç¿»è¯‘åˆå¹¶
â”‚   â””â”€â”€ ğŸ“„ format.ts
â”‚
â””â”€â”€ ğŸ“ config/
    â”œâ”€â”€ ğŸ“„ locales.ts
    â””â”€â”€ ğŸ“„ next-intl.ts
```

---

### æ ¸å¿ƒå®ç°

#### 1. è¯­è¨€é…ç½®

```typescript
// config/locales.ts
export const locales = ['en', 'zh', 'ja', 'ko', 'es'] as const
export type Locale = (typeof locales)[number]

export const defaultLocale: Locale = 'en'

export const localeNames: Record<Locale, string> = {
  en: 'English',
  zh: 'ä¸­æ–‡',
  ja: 'æ—¥æœ¬èª',
  ko: 'í•œêµ­ì–´',
  es: 'EspaÃ±ol',
}

export const localeFlags: Record<Locale, string> = {
  en: 'ğŸ‡ºğŸ‡¸',
  zh: 'ğŸ‡¨ğŸ‡³',
  ja: 'ğŸ‡¯ğŸ‡µ',
  ko: 'ğŸ‡°ğŸ‡·',
  es: 'ğŸ‡ªğŸ‡¸',
}
```

---

#### 2. ç¿»è¯‘åˆå¹¶å·¥å…·

```typescript
// utils/merge.ts
import type { Locale } from '../config/locales'

export function mergeTranslations(
  locale: Locale,
  layers: string[]
): Record<string, any> {
  const merged: Record<string, any> = {}

  for (const layer of layers) {
    try {
      let translations
      
      // å°è¯•ä» common åŠ è½½
      if (layer === 'common') {
        translations = require(`../locales/common/${locale}.json`)
      } else {
        // å°è¯•ä» domain åŠ è½½
        translations = require(`../locales/domain/${layer}/${locale}.json`)
      }
      
      // æ·±åº¦åˆå¹¶
      deepMerge(merged, translations)
    } catch (error) {
      console.warn(`Failed to load translations for ${layer}/${locale}`)
    }
  }

  return merged
}

function deepMerge(target: any, source: any): void {
  for (const key in source) {
    if (source[key] instanceof Object && key in target) {
      deepMerge(target[key], source[key])
    } else {
      target[key] = source[key]
    }
  }
}
```

---

#### 3. é€šç”¨ç¿»è¯‘

```json
// locales/common/en.json
{
  "common": {
    "button": {
      "submit": "Submit",
      "cancel": "Cancel",
      "confirm": "Confirm",
      "close": "Close",
      "save": "Save",
      "delete": "Delete",
      "edit": "Edit",
      "back": "Back",
      "next": "Next"
    },
    "status": {
      "loading": "Loading...",
      "success": "Success",
      "error": "Error",
      "pending": "Pending"
    },
    "language": {
      "en": "English",
      "zh": "ä¸­æ–‡",
      "ja": "æ—¥æœ¬èª",
      "ko": "í•œêµ­ì–´",
      "es": "EspaÃ±ol"
    }
  }
}
```

```json
// locales/common/zh.json
{
  "common": {
    "button": {
      "submit": "æäº¤",
      "cancel": "å–æ¶ˆ",
      "confirm": "ç¡®è®¤",
      "close": "å…³é—­",
      "save": "ä¿å­˜",
      "delete": "åˆ é™¤",
      "edit": "ç¼–è¾‘",
      "back": "è¿”å›",
      "next": "ä¸‹ä¸€æ­¥"
    },
    "status": {
      "loading": "åŠ è½½ä¸­...",
      "success": "æˆåŠŸ",
      "error": "é”™è¯¯",
      "pending": "å¾…å¤„ç†"
    },
    "language": {
      "en": "English",
      "zh": "ä¸­æ–‡",
      "ja": "æ—¥æœ¬èª",
      "ko": "í•œêµ­ì–´",
      "es": "EspaÃ±ol"
    }
  }
}
```

---

#### 4. é¢†åŸŸç¿»è¯‘ï¼ˆé’±åŒ…ï¼‰

```json
// locales/domain/wallet/en.json
{
  "wallet": {
    "title": "Wallet",
    "connect": "Connect Wallet",
    "disconnect": "Disconnect",
    "connected": "Connected",
    "connecting": "Connecting...",
    "balance": "Balance",
    "address": "Address",
    "network": "Network",
    "switchNetwork": "Switch Network",
    "copied": "Address copied!"
  }
}
```

```json
// locales/domain/wallet/zh.json
{
  "wallet": {
    "title": "é’±åŒ…",
    "connect": "è¿æ¥é’±åŒ…",
    "disconnect": "æ–­å¼€è¿æ¥",
    "connected": "å·²è¿æ¥",
    "connecting": "è¿æ¥ä¸­...",
    "balance": "ä½™é¢",
    "address": "åœ°å€",
    "network": "ç½‘ç»œ",
    "switchNetwork": "åˆ‡æ¢ç½‘ç»œ",
    "copied": "åœ°å€å·²å¤åˆ¶ï¼"
  }
}
```

---

## ğŸ’° @biya/wallet - é’±åŒ…ç®¡ç†åŒ…

### åŒ…ç»“æ„

```
packages/wallet/
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ index.ts
â”‚
â”œâ”€â”€ ğŸ“ store/
â”‚   â””â”€â”€ ğŸ“„ wallet-store.ts         # Zustand Store
â”‚
â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”œâ”€â”€ ğŸ“„ useWallet.ts
â”‚   â”œâ”€â”€ ğŸ“„ useBalance.ts
â”‚   â””â”€â”€ ğŸ“„ useNetwork.ts
â”‚
â”œâ”€â”€ ğŸ“ components/
â”‚   â”œâ”€â”€ ğŸ“„ WalletButton.tsx
â”‚   â”œâ”€â”€ ğŸ“„ WalletModal.tsx
â”‚   â””â”€â”€ ğŸ“„ WalletIcon.tsx
â”‚
â”œâ”€â”€ ğŸ“ services/
â”‚   â””â”€â”€ ğŸ“„ wallet-service.ts
â”‚
â””â”€â”€ ğŸ“ types/
    â””â”€â”€ ğŸ“„ wallet.ts
```

---

### æ ¸å¿ƒå®ç°

#### 1. Wallet Store

```typescript
// store/wallet-store.ts
import { create } from 'zustand'
import { persist, createJSONStorage } from 'zustand/middleware'

interface WalletState {
  // çŠ¶æ€
  address: string | null
  injectiveAddress: string | null
  chainId: number | null
  isConnected: boolean
  isConnecting: boolean
  balance: string | null
  
  // æ“ä½œ
  setAddress: (address: string | null) => void
  setInjectiveAddress: (address: string | null) => void
  setChainId: (chainId: number | null) => void
  setConnected: (connected: boolean) => void
  setConnecting: (connecting: boolean) => void
  setBalance: (balance: string | null) => void
  disconnect: () => void
  reset: () => void
}

export const useWalletStore = create<WalletState>()(
  persist(
    (set) => ({
      // åˆå§‹çŠ¶æ€
      address: null,
      injectiveAddress: null,
      chainId: null,
      isConnected: false,
      isConnecting: false,
      balance: null,
      
      // æ“ä½œæ–¹æ³•
      setAddress: (address) => set({ address }),
      setInjectiveAddress: (injectiveAddress) => set({ injectiveAddress }),
      setChainId: (chainId) => set({ chainId }),
      setConnected: (isConnected) => set({ isConnected }),
      setConnecting: (isConnecting) => set({ isConnecting }),
      setBalance: (balance) => set({ balance }),
      
      disconnect: () => set({
        address: null,
        injectiveAddress: null,
        isConnected: false,
        balance: null,
      }),
      
      reset: () => set({
        address: null,
        injectiveAddress: null,
        chainId: null,
        isConnected: false,
        isConnecting: false,
        balance: null,
      }),
    }),
    {
      name: 'biya-wallet-storage',
      storage: createJSONStorage(() => localStorage),
      partialize: (state) => ({
        address: state.address,
        injectiveAddress: state.injectiveAddress,
        chainId: state.chainId,
      }),
    }
  )
)
```

---

#### 2. WalletButton ç»„ä»¶

```typescript
// components/WalletButton.tsx
'use client'

import { Wallet } from 'lucide-react'
import { Button } from '@biya/shared'
import { useWalletStore } from '../store/wallet-store'

export function WalletButton() {
  const { address, isConnected, isConnecting, disconnect } = useWalletStore()

  const handleClick = () => {
    if (isConnected) {
      disconnect()
    } else {
      // æ‰“å¼€é’±åŒ…è¿æ¥å¼¹çª—
      // TODO: å®ç°è¿æ¥é€»è¾‘
    }
  }

  const formatAddress = (addr: string) => {
    return `${addr.slice(0, 6)}...${addr.slice(-4)}`
  }

  return (
    <Button
      onClick={handleClick}
      isLoading={isConnecting}
      variant={isConnected ? 'secondary' : 'primary'}
    >
      <Wallet className="mr-2 h-4 w-4" />
      {isConnected && address ? formatAddress(address) : 'Connect Wallet'}
    </Button>
  )
}
```

---

## ğŸ” @biya/auth - è®¤è¯ç®¡ç†åŒ…

### åŒ…ç»“æ„

```
packages/auth/
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ index.ts
â”‚
â”œâ”€â”€ ğŸ“ store/
â”‚   â”œâ”€â”€ ğŸ“„ auth-store.ts
â”‚   â””â”€â”€ ğŸ“„ session-store.ts
â”‚
â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”œâ”€â”€ ğŸ“„ useAuth.ts
â”‚   â”œâ”€â”€ ğŸ“„ useSession.ts
â”‚   â””â”€â”€ ğŸ“„ useUser.ts
â”‚
â”œâ”€â”€ ğŸ“ services/
â”‚   â”œâ”€â”€ ğŸ“„ auth.ts
â”‚   â””â”€â”€ ğŸ“„ session.ts
â”‚
â””â”€â”€ ğŸ“ types/
    â”œâ”€â”€ ğŸ“„ auth.ts
    â””â”€â”€ ğŸ“„ user.ts
```

---

### æ ¸å¿ƒå®ç°

#### 1. Auth Store

```typescript
// store/auth-store.ts
import { create } from 'zustand'
import { persist, createJSONStorage } from 'zustand/middleware'

interface User {
  id: string
  email: string
  name: string
  avatar?: string
}

interface AuthState {
  // çŠ¶æ€
  user: User | null
  isAuthenticated: boolean
  isLoading: boolean
  token: string | null
  
  // æ“ä½œ
  setUser: (user: User | null) => void
  setToken: (token: string | null) => void
  setLoading: (loading: boolean) => void
  login: (email: string, password: string) => Promise<void>
  logout: () => void
}

export const useAuthStore = create<AuthState>()(
  persist(
    (set) => ({
      // åˆå§‹çŠ¶æ€
      user: null,
      isAuthenticated: false,
      isLoading: false,
      token: null,
      
      // æ“ä½œæ–¹æ³•
      setUser: (user) => set({ 
        user, 
        isAuthenticated: !!user 
      }),
      
      setToken: (token) => set({ token }),
      
      setLoading: (isLoading) => set({ isLoading }),
      
      login: async (email, password) => {
        set({ isLoading: true })
        try {
          // TODO: å®ç°ç™»å½•é€»è¾‘
          // const response = await authService.login(email, password)
          // set({ user: response.user, token: response.token, isAuthenticated: true })
        } catch (error) {
          console.error('Login failed:', error)
          throw error
        } finally {
          set({ isLoading: false })
        }
      },
      
      logout: () => set({
        user: null,
        isAuthenticated: false,
        token: null,
      }),
    }),
    {
      name: 'biya-auth-storage',
      storage: createJSONStorage(() => localStorage),
      partialize: (state) => ({
        user: state.user,
        token: state.token,
      }),
    }
  )
)
```

---

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### åœ¨åº”ç”¨ä¸­ä½¿ç”¨å…±äº«åŒ…

```typescript
// apps/bridge/app/[locale]/bridge/page.tsx
'use client'

import { Button, formatCurrency, useDebounce } from '@biya/shared'
import { ThemeToggle, useThemeStore } from '@biya/theme'
import { useTranslations } from 'next-intl'
import { WalletButton, useWalletStore } from '@biya/wallet'
import { useAuthStore } from '@biya/auth'

export default function BridgePage() {
  const t = useTranslations()
  const { isDark } = useThemeStore()
  const { isConnected, address } = useWalletStore()
  const { user, isAuthenticated } = useAuthStore()
  
  const amount = useDebounce('100', 500)

  return (
    <div className="container mx-auto py-8">
      <div className="flex items-center justify-between mb-8">
        <h1 className="text-4xl font-bold">
          {t('bridge.title')}
        </h1>
        <div className="flex items-center gap-4">
          <ThemeToggle />
          <WalletButton />
        </div>
      </div>
      
      <div className="grid gap-6">
        <p className="text-gray-600 dark:text-gray-400">
          {t('common.status.loading')}
        </p>
        
        <div className="text-2xl font-bold">
          {formatCurrency(amount)}
        </div>
        
        <Button variant="primary">
          {t('common.button.submit')}
        </Button>
      </div>
    </div>
  )
}
```

---

## ğŸ¯ å…±äº«ç»„ä»¶æœ€ä½³å®è·µ

> **æ ¸å¿ƒé—®é¢˜**: å¦‚ä½•åœ¨ä¸åŒåº”ç”¨ä¸­ä½¿ç”¨ç›¸åŒæ ·å¼ä½†ä¸åŒåŠŸèƒ½çš„ç»„ä»¶ï¼Ÿ  
> **è§£å†³æ–¹æ¡ˆ**: å…±äº«ç»„ä»¶æä¾›æ ·å¼å’ŒåŸºç¡€è¡Œä¸ºï¼Œå…·ä½“ä¸šåŠ¡é€»è¾‘é€šè¿‡ props ä¼ é€’æˆ–å°è£…ä¸ºä¸šåŠ¡ç»„ä»¶ã€‚

---

### 1. åŸºç¡€ç”¨æ³•ï¼šé€šè¿‡ Props ä¼ é€’ä¸åŒåŠŸèƒ½

#### å…±äº«ç»„ä»¶è®¾è®¡ï¼ˆæä¾›ç»Ÿä¸€æ ·å¼ï¼‰

```typescript
// packages/shared/components/ui/Button.tsx
import { ButtonHTMLAttributes, ReactNode } from 'react'
import { cn } from '@biya/shared/utils'

export interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  children: ReactNode
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger'
  size?: 'sm' | 'md' | 'lg'
  loading?: boolean
  fullWidth?: boolean
  leftIcon?: ReactNode
  rightIcon?: ReactNode
  className?: string
}

export function Button({
  children,
  variant = 'primary',
  size = 'md',
  loading = false,
  fullWidth = false,
  leftIcon,
  rightIcon,
  className,
  disabled,
  onClick,  // ğŸ‘ˆ åŠŸèƒ½ç”±å¤–éƒ¨ä¼ å…¥
  ...props
}: ButtonProps) {
  return (
    <button
      onClick={onClick}
      disabled={disabled || loading}
      className={cn(
        // åŸºç¡€æ ·å¼ï¼ˆæ‰€æœ‰åº”ç”¨å…±äº«ï¼‰
        'inline-flex items-center justify-center gap-2 rounded-lg font-medium',
        'transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2',
        
        // variant æ ·å¼
        {
          'bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 focus:ring-blue-500':
            variant === 'primary',
          'bg-gray-100 text-gray-900 hover:bg-gray-200 active:bg-gray-300 focus:ring-gray-500':
            variant === 'secondary',
          'border-2 border-blue-600 text-blue-600 hover:bg-blue-50 active:bg-blue-100 focus:ring-blue-500':
            variant === 'outline',
          'text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus:ring-gray-500':
            variant === 'ghost',
          'bg-red-600 text-white hover:bg-red-700 active:bg-red-800 focus:ring-red-500':
            variant === 'danger',
        },
        
        // size æ ·å¼
        {
          'px-3 py-1.5 text-sm': size === 'sm',
          'px-4 py-2 text-base': size === 'md',
          'px-6 py-3 text-lg': size === 'lg',
        },
        
        // fullWidth
        { 'w-full': fullWidth },
        
        // disabled/loading çŠ¶æ€
        { 'opacity-50 cursor-not-allowed': disabled || loading },
        
        className  // å…è®¸é¢å¤–å®šåˆ¶
      )}
      {...props}
    >
      {loading && (
        <svg className="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
          <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
          <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
        </svg>
      )}
      {leftIcon}
      {children}
      {rightIcon}
    </button>
  )
}
```

---

#### åº”ç”¨ä¸­ä½¿ç”¨ï¼ˆä¸åŒåŠŸèƒ½ï¼‰

```typescript
// apps/bridge/app/page.tsx
'use client'

import { Button } from '@biya/shared'
import { useState } from 'react'
import { ArrowRightIcon } from '@heroicons/react/24/outline'

export default function BridgePage() {
  const [amount, setAmount] = useState('')
  
  // ğŸ‘‡ Bridge åº”ç”¨çš„å…·ä½“åŠŸèƒ½
  const handleBridge = async () => {
    console.log('BridgeåŠŸèƒ½ï¼šè·¨é“¾è½¬è´¦', amount)
    try {
      await bridgeTokens(amount)
      alert('è·¨é“¾è½¬è´¦æˆåŠŸï¼')
    } catch (error) {
      alert('è·¨é“¾è½¬è´¦å¤±è´¥ï¼š' + error.message)
    }
  }
  
  const handleCancel = () => {
    console.log('BridgeåŠŸèƒ½ï¼šå–æ¶ˆè½¬è´¦')
    setAmount('')
  }
  
  return (
    <div className="space-y-4">
      <input 
        value={amount} 
        onChange={(e) => setAmount(e.target.value)}
        placeholder="è¾“å…¥é‡‘é¢"
      />
      
      {/* âœ… ç›¸åŒçš„æ ·å¼ï¼Œä¸åŒçš„åŠŸèƒ½ */}
      <Button 
        variant="primary" 
        size="lg"
        fullWidth
        rightIcon={<ArrowRightIcon className="w-5 h-5" />}
        onClick={handleBridge}  // ğŸ‘ˆ Bridge åŠŸèƒ½
      >
        ç¡®è®¤è·¨é“¾è½¬è´¦
      </Button>
      
      <Button 
        variant="outline" 
        onClick={handleCancel}  // ğŸ‘ˆ å–æ¶ˆåŠŸèƒ½
      >
        å–æ¶ˆ
      </Button>
    </div>
  )
}
```

```typescript
// apps/dex/app/page.tsx
'use client'

import { Button } from '@biya/shared'
import { useState } from 'react'

export default function DexPage() {
  const [amount, setAmount] = useState('')
  const [price, setPrice] = useState('')
  
  // ğŸ‘‡ DEX åº”ç”¨çš„å…·ä½“åŠŸèƒ½
  const handleBuy = async () => {
    console.log('DEXåŠŸèƒ½ï¼šè´­ä¹°', { amount, price })
    try {
      await placeOrder('buy', amount, price)
      alert('è´­ä¹°è®¢å•å·²æäº¤ï¼')
    } catch (error) {
      alert('è´­ä¹°å¤±è´¥ï¼š' + error.message)
    }
  }
  
  const handleSell = async () => {
    console.log('DEXåŠŸèƒ½ï¼šå–å‡º', { amount, price })
    try {
      await placeOrder('sell', amount, price)
      alert('å–å‡ºè®¢å•å·²æäº¤ï¼')
    } catch (error) {
      alert('å–å‡ºå¤±è´¥ï¼š' + error.message)
    }
  }
  
  return (
    <div className="space-y-4">
      <input value={amount} onChange={(e) => setAmount(e.target.value)} />
      <input value={price} onChange={(e) => setPrice(e.target.value)} />
      
      {/* âœ… ç›¸åŒçš„æ ·å¼ï¼Œä¸åŒçš„åŠŸèƒ½ */}
      <div className="grid grid-cols-2 gap-4">
        <Button 
          variant="primary" 
          size="lg"
          onClick={handleBuy}  // ğŸ‘ˆ DEX è´­ä¹°åŠŸèƒ½
        >
          ä¹°å…¥
        </Button>
        
        <Button 
          variant="danger" 
          size="lg"
          onClick={handleSell}  // ğŸ‘ˆ DEX å–å‡ºåŠŸèƒ½
        >
          å–å‡º
        </Button>
      </div>
    </div>
  )
}
```

---

### 2. è¿›é˜¶æ–¹æ¡ˆï¼šå°è£…ä¸šåŠ¡ç»„ä»¶ï¼ˆæ¨èï¼‰âœ…

#### ä¸ºä»€ä¹ˆéœ€è¦ä¸šåŠ¡ç»„ä»¶ï¼Ÿ

å½“ä¸šåŠ¡é€»è¾‘å˜å¤æ‚æ—¶ï¼ˆéªŒè¯ã€é”™è¯¯å¤„ç†ã€çŠ¶æ€ç®¡ç†ï¼‰ï¼Œç›´æ¥åœ¨é¡µé¢ä¸­ä½¿ç”¨åŸºç¡€ç»„ä»¶ä¼šå¯¼è‡´ï¼š
- âŒ é¡µé¢ä»£ç å†—é•¿
- âŒ é€»è¾‘é‡å¤
- âŒ éš¾ä»¥ç»´æŠ¤

**è§£å†³æ–¹æ¡ˆ**ï¼šå°è£…ä¸šåŠ¡ç»„ä»¶

---

#### Bridge ä¸šåŠ¡ç»„ä»¶

```typescript
// apps/bridge/components/BridgeButton.tsx
'use client'

import { Button } from '@biya/shared'
import { useBridgeStore } from '../store/bridge-store'
import { useWalletStore } from '@biya/wallet'
import { ArrowRightIcon } from '@heroicons/react/24/outline'

interface BridgeButtonProps {
  amount: string
  fromChain: string
  toChain: string
  token: string
  onSuccess?: () => void
  onError?: (error: Error) => void
}

export function BridgeButton({ 
  amount, 
  fromChain, 
  toChain, 
  token,
  onSuccess,
  onError 
}: BridgeButtonProps) {
  const { isConnected, balance } = useWalletStore()
  const { isTransferring, setTransferring, addTransaction } = useBridgeStore()
  
  // ğŸ‘‡ å°è£…å¤æ‚çš„ Bridge ä¸šåŠ¡é€»è¾‘
  const handleBridge = async () => {
    // 1. å‰ç½®éªŒè¯
    if (!isConnected) {
      alert('è¯·å…ˆè¿æ¥é’±åŒ…')
      return
    }
    
    if (!amount || parseFloat(amount) <= 0) {
      alert('è¯·è¾“å…¥æœ‰æ•ˆé‡‘é¢')
      return
    }
    
    if (parseFloat(amount) > parseFloat(balance)) {
      alert('ä½™é¢ä¸è¶³')
      return
    }
    
    // 2. æ‰§è¡Œè·¨é“¾è½¬è´¦
    try {
      setTransferring(true)
      
      console.log(`è·¨é“¾è½¬è´¦ï¼šä» ${fromChain} åˆ° ${toChain}ï¼Œé‡‘é¢ ${amount} ${token}`)
      
      // è°ƒç”¨æ™ºèƒ½åˆçº¦
      const tx = await performBridgeTransfer({
        amount,
        fromChain,
        toChain,
        token,
      })
      
      // 3. è®°å½•äº¤æ˜“
      addTransaction({
        id: tx.hash,
        from: fromChain,
        to: toChain,
        amount,
        token,
        status: 'pending',
        timestamp: Date.now(),
        txHash: tx.hash,
      })
      
      // 4. æˆåŠŸå›è°ƒ
      onSuccess?.()
      alert('è·¨é“¾è½¬è´¦å·²æäº¤ï¼')
      
    } catch (error) {
      console.error('è·¨é“¾è½¬è´¦å¤±è´¥:', error)
      onError?.(error as Error)
      alert('è·¨é“¾è½¬è´¦å¤±è´¥ï¼š' + (error as Error).message)
    } finally {
      setTransferring(false)
    }
  }
  
  // è®¡ç®—æŒ‰é’®çŠ¶æ€
  const isDisabled = 
    !isConnected || 
    !amount || 
    parseFloat(amount) <= 0 ||
    parseFloat(amount) > parseFloat(balance) ||
    isTransferring
  
  return (
    <Button 
      variant="primary" 
      size="lg"
      fullWidth
      loading={isTransferring}
      disabled={isDisabled}
      rightIcon={<ArrowRightIcon className="w-5 h-5" />}
      onClick={handleBridge}
    >
      {isTransferring ? 'è½¬è´¦ä¸­...' : 'ç¡®è®¤è·¨é“¾è½¬è´¦'}
    </Button>
  )
}
```

---

#### DEX ä¸šåŠ¡ç»„ä»¶

```typescript
// apps/dex/components/TradeButton.tsx
'use client'

import { Button } from '@biya/shared'
import { useDexStore } from '../store/dex-store'
import { useWalletStore } from '@biya/wallet'

interface TradeButtonProps {
  type: 'buy' | 'sell'
  amount: string
  price: string
  token: string
  onSuccess?: () => void
}

export function TradeButton({ 
  type, 
  amount, 
  price, 
  token,
  onSuccess 
}: TradeButtonProps) {
  const { isConnected, balance } = useWalletStore()
  const { isTrading, setTrading, addOrder } = useDexStore()
  
  // ğŸ‘‡ å°è£…å¤æ‚çš„ DEX ä¸šåŠ¡é€»è¾‘
  const handleTrade = async () => {
    // 1. éªŒè¯
    if (!isConnected) {
      alert('è¯·å…ˆè¿æ¥é’±åŒ…')
      return
    }
    
    const amountNum = parseFloat(amount)
    const priceNum = parseFloat(price)
    
    if (!amountNum || amountNum <= 0) {
      alert('è¯·è¾“å…¥æœ‰æ•ˆæ•°é‡')
      return
    }
    
    if (!priceNum || priceNum <= 0) {
      alert('è¯·è¾“å…¥æœ‰æ•ˆä»·æ ¼')
      return
    }
    
    // 2. ä½™é¢æ£€æŸ¥
    const total = amountNum * priceNum
    if (type === 'buy' && total > parseFloat(balance)) {
      alert('ä½™é¢ä¸è¶³')
      return
    }
    
    // 3. æ‰§è¡Œäº¤æ˜“
    try {
      setTrading(true)
      
      console.log(`${type === 'buy' ? 'è´­ä¹°' : 'å–å‡º'}ï¼šæ•°é‡ ${amount}ï¼Œä»·æ ¼ ${price}`)
      
      const order = await placeOrder({
        type,
        amount,
        price,
        token,
      })
      
      // 4. è®°å½•è®¢å•
      addOrder({
        id: order.id,
        type,
        price,
        amount,
        total: total.toString(),
        timestamp: Date.now(),
        status: 'pending',
      })
      
      onSuccess?.()
      alert(`${type === 'buy' ? 'è´­ä¹°' : 'å–å‡º'}è®¢å•å·²æäº¤ï¼`)
      
    } catch (error) {
      console.error('äº¤æ˜“å¤±è´¥:', error)
      alert('äº¤æ˜“å¤±è´¥ï¼š' + (error as Error).message)
    } finally {
      setTrading(false)
    }
  }
  
  const isDisabled = 
    !isConnected || 
    !amount || 
    !price ||
    parseFloat(amount) <= 0 ||
    parseFloat(price) <= 0 ||
    isTrading
  
  return (
    <Button 
      variant={type === 'buy' ? 'primary' : 'danger'} 
      size="lg"
      fullWidth
      loading={isTrading}
      disabled={isDisabled}
      onClick={handleTrade}
    >
      {isTrading ? 'äº¤æ˜“ä¸­...' : (type === 'buy' ? 'ä¹°å…¥' : 'å–å‡º')}
    </Button>
  )
}
```

---

#### é¡µé¢ä¸­ä½¿ç”¨ä¸šåŠ¡ç»„ä»¶

```typescript
// apps/bridge/app/page.tsx
'use client'

import { BridgeButton } from '../components/BridgeButton'
import { useState } from 'react'

export default function BridgePage() {
  const [amount, setAmount] = useState('')
  const [fromChain, setFromChain] = useState('ethereum')
  const [toChain, setToChain] = useState('injective')
  
  return (
    <div className="space-y-6">
      <select value={fromChain} onChange={(e) => setFromChain(e.target.value)}>
        <option value="ethereum">Ethereum</option>
        <option value="bsc">BSC</option>
      </select>
      
      <select value={toChain} onChange={(e) => setToChain(e.target.value)}>
        <option value="injective">Injective</option>
        <option value="polygon">Polygon</option>
      </select>
      
      <input 
        value={amount} 
        onChange={(e) => setAmount(e.target.value)}
        placeholder="è¾“å…¥é‡‘é¢"
      />
      
      {/* âœ… ä½¿ç”¨å°è£…å¥½çš„ä¸šåŠ¡ç»„ä»¶ */}
      <BridgeButton 
        amount={amount}
        fromChain={fromChain}
        toChain={toChain}
        token="USDT"
        onSuccess={() => setAmount('')}
      />
    </div>
  )
}
```

```typescript
// apps/dex/app/page.tsx
'use client'

import { TradeButton } from '../components/TradeButton'
import { useState } from 'react'

export default function DexPage() {
  const [amount, setAmount] = useState('')
  const [price, setPrice] = useState('')
  
  return (
    <div className="space-y-6">
      <input 
        value={amount} 
        onChange={(e) => setAmount(e.target.value)}
        placeholder="æ•°é‡"
      />
      
      <input 
        value={price} 
        onChange={(e) => setPrice(e.target.value)}
        placeholder="ä»·æ ¼"
      />
      
      {/* âœ… ä½¿ç”¨å°è£…å¥½çš„ä¸šåŠ¡ç»„ä»¶ */}
      <div className="grid grid-cols-2 gap-4">
        <TradeButton 
          type="buy" 
          amount={amount} 
          price={price}
          token="BTC/USDT"
          onSuccess={() => {
            setAmount('')
            setPrice('')
          }}
        />
        
        <TradeButton 
          type="sell" 
          amount={amount} 
          price={price}
          token="BTC/USDT"
          onSuccess={() => {
            setAmount('')
            setPrice('')
          }}
        />
      </div>
    </div>
  )
}
```

---

### 3. ä¸‰å±‚ç»„ä»¶æ¶æ„

#### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨å±‚ï¼ˆapps/*/components/ï¼‰                        â”‚
â”‚  â†“ ä¸šåŠ¡ç»„ä»¶ï¼ˆå°è£…ä¸šåŠ¡é€»è¾‘ + ä½¿ç”¨å…±äº«ç»„ä»¶ï¼‰             â”‚
â”‚                                                      â”‚
â”‚  - BridgeButtonï¼ˆè·¨é“¾è½¬è´¦é€»è¾‘ï¼‰                       â”‚
â”‚  - TradeButtonï¼ˆäº¤æ˜“é€»è¾‘ï¼‰                           â”‚
â”‚  - WalletConnectButtonï¼ˆé’±åŒ…è¿æ¥é€»è¾‘ï¼‰                â”‚
â”‚  - ApproveButtonï¼ˆæˆæƒé€»è¾‘ï¼‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ ä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…±äº«å±‚ï¼ˆpackages/shared/components/ï¼‰                â”‚
â”‚  â†“ åŸºç¡€ç»„ä»¶ï¼ˆæä¾›æ ·å¼ + åŸºç¡€äº¤äº’ï¼‰                     â”‚
â”‚                                                      â”‚
â”‚  - Buttonï¼ˆæŒ‰é’®æ ·å¼ï¼‰                                â”‚
â”‚  - Inputï¼ˆè¾“å…¥æ¡†æ ·å¼ï¼‰                               â”‚
â”‚  - Modalï¼ˆå¼¹çª—æ ·å¼ï¼‰                                 â”‚
â”‚  - Cardï¼ˆå¡ç‰‡æ ·å¼ï¼‰                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ ä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŸå­å±‚ï¼ˆpackages/shared/utils/ï¼‰                    â”‚
â”‚  â†“ å·¥å…·å‡½æ•°ï¼ˆçº¯å‡½æ•°ï¼‰                                â”‚
â”‚                                                      â”‚
â”‚  - cn()ï¼ˆæ ·å¼åˆå¹¶ï¼‰                                  â”‚
â”‚  - formatCurrency()ï¼ˆæ ¼å¼åŒ–è´§å¸ï¼‰                    â”‚
â”‚  - formatAddress()ï¼ˆæ ¼å¼åŒ–åœ°å€ï¼‰                     â”‚
â”‚  - debounce()ï¼ˆé˜²æŠ–ï¼‰                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ä»£ç ç¤ºä¾‹

```typescript
// ğŸ”¹ åŸå­å±‚ï¼šå·¥å…·å‡½æ•°ï¼ˆçº¯å‡½æ•°ï¼Œæ— å‰¯ä½œç”¨ï¼‰
// packages/shared/utils/cn.ts
import { clsx, type ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

```typescript
// ğŸ”¹ å…±äº«å±‚ï¼šåŸºç¡€ç»„ä»¶ï¼ˆæ ·å¼ + åŸºç¡€äº¤äº’ï¼Œæ— ä¸šåŠ¡é€»è¾‘ï¼‰
// packages/shared/components/ui/Button.tsx
export function Button({ 
  children, 
  variant, 
  size, 
  onClick,  // ğŸ‘ˆ è¡Œä¸ºç”±å¤–éƒ¨ä¼ å…¥
  ...props 
}: ButtonProps) {
  return (
    <button
      onClick={onClick}
      className={cn(/* ç»Ÿä¸€æ ·å¼ */)}
      {...props}
    >
      {children}
    </button>
  )
}
```

```typescript
// ğŸ”¹ åº”ç”¨å±‚ï¼šä¸šåŠ¡ç»„ä»¶ï¼ˆä¸šåŠ¡é€»è¾‘ + ä½¿ç”¨å…±äº«ç»„ä»¶ï¼‰
// apps/bridge/components/BridgeButton.tsx
export function BridgeButton({ amount, fromChain, toChain }: Props) {
  const { isConnected } = useWalletStore()
  
  // ğŸ‘‡ å°è£… Bridge ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘
  const handleBridge = async () => {
    if (!isConnected) return alert('è¯·å…ˆè¿æ¥é’±åŒ…')
    await performBridgeTransfer(amount, fromChain, toChain)
  }
  
  return (
    <Button onClick={handleBridge}>  {/* ä½¿ç”¨å…±äº«ç»„ä»¶ */}
      ç¡®è®¤è·¨é“¾è½¬è´¦
    </Button>
  )
}
```

---

### 4. æ ·å¼å®šåˆ¶ç­–ç•¥

#### æ–¹æ¡ˆ Aï¼šé€šè¿‡ className æ‰©å±•ï¼ˆæ¨èï¼‰

```typescript
// apps/bridge/app/page.tsx
<Button 
  variant="primary"
  className="shadow-xl ring-2 ring-green-500 hover:shadow-2xl"  // ğŸ‘ˆ é¢å¤–æ ·å¼
  onClick={handleBridge}
>
  è·¨é“¾è½¬è´¦
</Button>
```

**ä¼˜ç‚¹**ï¼š
- âœ… çµæ´»æ€§é«˜
- âœ… ä¸æ±¡æŸ“å…±äº«ç»„ä»¶
- âœ… ä½¿ç”¨ Tailwind ç±»å

---

#### æ–¹æ¡ˆ Bï¼šæ‰©å±• variant

```typescript
// packages/shared/components/ui/Button.tsx
export function Button({ variant = 'primary', ... }: ButtonProps) {
  return (
    <button
      className={cn(
        'base-styles',
        {
          'bg-blue-600 ...': variant === 'primary',
          'bg-gray-200 ...': variant === 'secondary',
          'bg-green-500 ...': variant === 'success',     // ğŸ‘ˆ æ–°å¢
          'bg-red-500 ...': variant === 'danger',        // ğŸ‘ˆ æ–°å¢
          'bg-yellow-500 ...': variant === 'warning',    // ğŸ‘ˆ æ–°å¢
        }
      )}
    >
      {children}
    </button>
  )
}
```

```typescript
// ä½¿ç”¨æ–° variant
<Button variant="success">æˆåŠŸ</Button>
<Button variant="danger">åˆ é™¤</Button>
<Button variant="warning">è­¦å‘Š</Button>
```

---

#### æ–¹æ¡ˆ Cï¼šåº”ç”¨ç‰¹å®šä¸»é¢˜ï¼ˆé«˜çº§ï¼‰

```typescript
// apps/bridge/styles/bridge-theme.ts
export const bridgeTheme = {
  button: {
    primary: 'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700',
    secondary: 'bg-gray-800 hover:bg-gray-900 text-white',
  },
}

// apps/bridge/components/BridgeButton.tsx
import { Button } from '@biya/shared'
import { bridgeTheme } from '../styles/bridge-theme'

export function BridgeButton({ ... }) {
  return (
    <Button 
      className={bridgeTheme.button.primary}  // ğŸ‘ˆ åº”ç”¨ç‰¹å®šä¸»é¢˜
      onClick={handleBridge}
    >
      è·¨é“¾è½¬è´¦
    </Button>
  )
}
```

---

### 5. è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **å…³æ³¨ç‚¹åˆ†ç¦»** | æ ·å¼å½’å…±äº«ç»„ä»¶ï¼Œä¸šåŠ¡é€»è¾‘å½’åº”ç”¨å±‚ | Button ä¸åŒ…å« Bridge é€»è¾‘ |
| **ç»„åˆä¼˜äºç»§æ‰¿** | é€šè¿‡ props ç»„åˆåŠŸèƒ½ï¼Œè€Œéç»§æ‰¿ | `<Button onClick={handleBridge}>` |
| **å•ä¸€èŒè´£** | æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ | Button åªè´Ÿè´£æŒ‰é’® UI |
| **å¼€æ”¾å°é—­** | å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ | é€šè¿‡ `className` æ‰©å±•æ ·å¼ |
| **æœ€å°çŸ¥è¯†** | ç»„ä»¶ä¸éœ€è¦çŸ¥é“ä½¿ç”¨è€…çš„å…·ä½“ä¸šåŠ¡ | Button ä¸çŸ¥é“ Bridge å­˜åœ¨ |
| **æ¥å£éš”ç¦»** | åªæš´éœ²å¿…è¦çš„ props | ä¸æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚ |

---

### 6. å®Œæ•´ç¤ºä¾‹å¯¹æ¯”

#### âŒ ä¸å¥½çš„åšæ³•

```typescript
// packages/shared/components/BridgeButton.tsx
// âŒ åœ¨å…±äº«ç»„ä»¶ä¸­å†™ä¸šåŠ¡é€»è¾‘
export function BridgeButton({ amount }: Props) {
  const { isConnected } = useWalletStore()  // âŒ ä¾èµ–ç‰¹å®šåŒ…
  
  const handleBridge = async () => {
    // âŒ Bridge ä¸šåŠ¡é€»è¾‘å†™åœ¨å…±äº«ç»„ä»¶ä¸­
    if (!isConnected) return
    await performBridgeTransfer(amount)
  }
  
  return <button onClick={handleBridge}>è·¨é“¾è½¬è´¦</button>
}

// é—®é¢˜ï¼š
// 1. å…±äº«ç»„ä»¶ä¾èµ–äº†ä¸šåŠ¡é€»è¾‘
// 2. DEX åº”ç”¨æ— æ³•å¤ç”¨è¿™ä¸ªç»„ä»¶
// 3. éš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤
```

---

#### âœ… å¥½çš„åšæ³•

```typescript
// packages/shared/components/ui/Button.tsx
// âœ… å…±äº«ç»„ä»¶åªè´Ÿè´£ UI
export function Button({ children, variant, onClick, ...props }: ButtonProps) {
  return (
    <button
      onClick={onClick}  // ğŸ‘ˆ è¡Œä¸ºç”±å¤–éƒ¨ä¼ å…¥
      className={cn(/* æ ·å¼ */)}
      {...props}
    >
      {children}
    </button>
  )
}

// apps/bridge/components/BridgeButton.tsx
// âœ… ä¸šåŠ¡é€»è¾‘åœ¨åº”ç”¨å±‚
export function BridgeButton({ amount, fromChain, toChain }: Props) {
  const { isConnected } = useWalletStore()
  
  const handleBridge = async () => {
    // âœ… Bridge ç‰¹å®šé€»è¾‘
    if (!isConnected) return
    await performBridgeTransfer(amount, fromChain, toChain)
  }
  
  return (
    <Button variant="primary" onClick={handleBridge}>
      ç¡®è®¤è·¨é“¾è½¬è´¦
    </Button>
  )
}

// ä¼˜ç‚¹ï¼š
// 1. Button å¯ä»¥è¢«ä»»ä½•åº”ç”¨å¤ç”¨
// 2. Bridge é€»è¾‘åªåœ¨ Bridge åº”ç”¨ä¸­
// 3. æ˜“äºæµ‹è¯•å’Œç»´æŠ¤
```

---

### 7. æ€»ç»“ï¼šä½•æ—¶ä½¿ç”¨å“ªç§æ–¹æ¡ˆ

| åœºæ™¯ | æ–¹æ¡ˆ | ç¤ºä¾‹ |
|------|------|------|
| **ç®€å•äº¤äº’** | ç›´æ¥ä½¿ç”¨å…±äº«ç»„ä»¶ + props | `<Button onClick={handleClick}>` |
| **å¤æ‚ä¸šåŠ¡é€»è¾‘** | å°è£…ä¸šåŠ¡ç»„ä»¶ | `<BridgeButton>`, `<TradeButton>` |
| **è·¨åº”ç”¨å¤ç”¨** | åˆ›å»ºå…±äº«ä¸šåŠ¡ç»„ä»¶ | `<WalletButton>` â†’ packages/wallet |
| **æ ·å¼å®šåˆ¶** | className + variant | `<Button className="...">` |
| **åº”ç”¨ç‰¹å®šæ ·å¼** | åº”ç”¨ä¸»é¢˜ | `bridgeTheme.button.primary` |

---

### 8. å¿«é€Ÿæ£€æŸ¥æ¸…å•

è®¾è®¡å…±äº«ç»„ä»¶æ—¶ï¼Œé—®è‡ªå·±ï¼š

- [ ] âœ… ç»„ä»¶åªåŒ…å«æ ·å¼å’ŒåŸºç¡€äº¤äº’ï¼Ÿ
- [ ] âœ… æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ API è°ƒç”¨ã€çŠ¶æ€ç®¡ç†ï¼‰ï¼Ÿ
- [ ] âœ… å¯ä»¥è¢«ä»»ä½•åº”ç”¨å¤ç”¨ï¼Ÿ
- [ ] âœ… é€šè¿‡ props æ¥æ”¶è¡Œä¸ºï¼ˆå¦‚ onClickï¼‰ï¼Ÿ
- [ ] âœ… æä¾›è¶³å¤Ÿçš„æ‰©å±•ç‚¹ï¼ˆclassNameã€variantï¼‰ï¼Ÿ
- [ ] âœ… æœ‰å®Œæ•´çš„ TypeScript ç±»å‹ï¼Ÿ
- [ ] âœ… æœ‰æ¸…æ™°çš„æ–‡æ¡£å’Œç¤ºä¾‹ï¼Ÿ

å¦‚æœæœ‰ä»»ä½• âŒï¼Œè€ƒè™‘é‡æ–°è®¾è®¡æˆ–æ”¹ä¸ºä¸šåŠ¡ç»„ä»¶ã€‚

---

## ğŸš€ ä¸‹ä¸€æ­¥

å…±äº«åŒ…è®¾è®¡å·²æ˜ç¡®ï¼Œç»§ç»­é˜…è¯»ï¼š

**â†’ [05-çŠ¶æ€ç®¡ç†.md](./05-çŠ¶æ€ç®¡ç†.md)**

äº†è§£ Zustand çŠ¶æ€ç®¡ç†ç­–ç•¥å’Œæœ€ä½³å®è·µã€‚

---

## ğŸ“š æœ¬ç« å°ç»“

### 5 ä¸ªæ ¸å¿ƒå…±äº«åŒ…

1. **@biya/shared**: åŸºç¡€ç»„ä»¶ã€Hooksã€å·¥å…·å‡½æ•°
2. **@biya/theme**: ä¸»é¢˜ç®¡ç†ï¼ˆZustand + Tailwindï¼‰
3. **@biya/i18n**: å›½é™…åŒ–ï¼ˆåˆ†å±‚ç¿»è¯‘ + next-intlï¼‰
4. **@biya/wallet**: é’±åŒ…ç®¡ç†ï¼ˆZustand + Web3ï¼‰
5. **@biya/auth**: è®¤è¯ç®¡ç†ï¼ˆZustand + JWTï¼‰

### è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**: æ¯ä¸ªåŒ…åªåšä¸€ä»¶äº‹
2. **é›¶ä¾èµ–**: åŒ…ä¹‹é—´å°½é‡å‡å°‘ä¾èµ–
3. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript æ”¯æŒ
4. **æ˜“äºä½¿ç”¨**: ç®€å•çš„ APIï¼Œæ¸…æ™°çš„æ–‡æ¡£
5. **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½

---

*æœ€åæ›´æ–°: 2025-10-31*

